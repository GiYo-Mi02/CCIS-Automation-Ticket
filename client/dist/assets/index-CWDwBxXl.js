function T1(e,n){for(var s=0;s<n.length;s++){const l=n[s];if(typeof l!="string"&&!Array.isArray(l)){for(const u in l)if(u!=="default"&&!(u in e)){const d=Object.getOwnPropertyDescriptor(l,u);d&&Object.defineProperty(e,u,d.get?d:{enumerable:!0,get:()=>l[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))l(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const x of d.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&l(x)}).observe(document,{childList:!0,subtree:!0});function s(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(u){if(u.ep)return;u.ep=!0;const d=s(u);fetch(u.href,d)}})();var rs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function R1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var O1={exports:{}},pa={},k1={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hs=Symbol.for("react.element"),Gh=Symbol.for("react.portal"),Xh=Symbol.for("react.fragment"),Yh=Symbol.for("react.strict_mode"),Zh=Symbol.for("react.profiler"),Kh=Symbol.for("react.provider"),Qh=Symbol.for("react.context"),qh=Symbol.for("react.forward_ref"),$h=Symbol.for("react.suspense"),Jh=Symbol.for("react.memo"),e2=Symbol.for("react.lazy"),Gu=Symbol.iterator;function t2(e){return e===null||typeof e!="object"?null:(e=Gu&&e[Gu]||e["@@iterator"],typeof e=="function"?e:null)}var D1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M1=Object.assign,P1={};function Vi(e,n,s){this.props=e,this.context=n,this.refs=P1,this.updater=s||D1}Vi.prototype.isReactComponent={};Vi.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};Vi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function B1(){}B1.prototype=Vi.prototype;function Rc(e,n,s){this.props=e,this.context=n,this.refs=P1,this.updater=s||D1}var Oc=Rc.prototype=new B1;Oc.constructor=Rc;M1(Oc,Vi.prototype);Oc.isPureReactComponent=!0;var Xu=Array.isArray,L1=Object.prototype.hasOwnProperty,kc={current:null},F1={key:!0,ref:!0,__self:!0,__source:!0};function j1(e,n,s){var l,u={},d=null,x=null;if(n!=null)for(l in n.ref!==void 0&&(x=n.ref),n.key!==void 0&&(d=""+n.key),n)L1.call(n,l)&&!F1.hasOwnProperty(l)&&(u[l]=n[l]);var w=arguments.length-2;if(w===1)u.children=s;else if(1<w){for(var y=Array(w),p=0;p<w;p++)y[p]=arguments[p+2];u.children=y}if(e&&e.defaultProps)for(l in w=e.defaultProps,w)u[l]===void 0&&(u[l]=w[l]);return{$$typeof:Hs,type:e,key:d,ref:x,props:u,_owner:kc.current}}function n2(e,n){return{$$typeof:Hs,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function Dc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hs}function r2(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return n[s]})}var Yu=/\/+/g;function tl(e,n){return typeof e=="object"&&e!==null&&e.key!=null?r2(""+e.key):n.toString(36)}function To(e,n,s,l,u){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var x=!1;if(e===null)x=!0;else switch(d){case"string":case"number":x=!0;break;case"object":switch(e.$$typeof){case Hs:case Gh:x=!0}}if(x)return x=e,u=u(x),e=l===""?"."+tl(x,0):l,Xu(u)?(s="",e!=null&&(s=e.replace(Yu,"$&/")+"/"),To(u,n,s,"",function(p){return p})):u!=null&&(Dc(u)&&(u=n2(u,s+(!u.key||x&&x.key===u.key?"":(""+u.key).replace(Yu,"$&/")+"/")+e)),n.push(u)),1;if(x=0,l=l===""?".":l+":",Xu(e))for(var w=0;w<e.length;w++){d=e[w];var y=l+tl(d,w);x+=To(d,n,s,y,u)}else if(y=t2(e),typeof y=="function")for(e=y.call(e),w=0;!(d=e.next()).done;)d=d.value,y=l+tl(d,w++),x+=To(d,n,s,y,u);else if(d==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return x}function uo(e,n,s){if(e==null)return e;var l=[],u=0;return To(e,l,"","",function(d){return n.call(s,d,u++)}),l}function i2(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var jt={current:null},Ro={transition:null},s2={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:Ro,ReactCurrentOwner:kc};function U1(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:uo,forEach:function(e,n,s){uo(e,function(){n.apply(this,arguments)},s)},count:function(e){var n=0;return uo(e,function(){n++}),n},toArray:function(e){return uo(e,function(n){return n})||[]},only:function(e){if(!Dc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ie.Component=Vi;Ie.Fragment=Xh;Ie.Profiler=Zh;Ie.PureComponent=Rc;Ie.StrictMode=Yh;Ie.Suspense=$h;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s2;Ie.act=U1;Ie.cloneElement=function(e,n,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=M1({},e.props),u=e.key,d=e.ref,x=e._owner;if(n!=null){if(n.ref!==void 0&&(d=n.ref,x=kc.current),n.key!==void 0&&(u=""+n.key),e.type&&e.type.defaultProps)var w=e.type.defaultProps;for(y in n)L1.call(n,y)&&!F1.hasOwnProperty(y)&&(l[y]=n[y]===void 0&&w!==void 0?w[y]:n[y])}var y=arguments.length-2;if(y===1)l.children=s;else if(1<y){w=Array(y);for(var p=0;p<y;p++)w[p]=arguments[p+2];l.children=w}return{$$typeof:Hs,type:e.type,key:u,ref:d,props:l,_owner:x}};Ie.createContext=function(e){return e={$$typeof:Qh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Kh,_context:e},e.Consumer=e};Ie.createElement=j1;Ie.createFactory=function(e){var n=j1.bind(null,e);return n.type=e,n};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(e){return{$$typeof:qh,render:e}};Ie.isValidElement=Dc;Ie.lazy=function(e){return{$$typeof:e2,_payload:{_status:-1,_result:e},_init:i2}};Ie.memo=function(e,n){return{$$typeof:Jh,type:e,compare:n===void 0?null:n}};Ie.startTransition=function(e){var n=Ro.transition;Ro.transition={};try{e()}finally{Ro.transition=n}};Ie.unstable_act=U1;Ie.useCallback=function(e,n){return jt.current.useCallback(e,n)};Ie.useContext=function(e){return jt.current.useContext(e)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(e){return jt.current.useDeferredValue(e)};Ie.useEffect=function(e,n){return jt.current.useEffect(e,n)};Ie.useId=function(){return jt.current.useId()};Ie.useImperativeHandle=function(e,n,s){return jt.current.useImperativeHandle(e,n,s)};Ie.useInsertionEffect=function(e,n){return jt.current.useInsertionEffect(e,n)};Ie.useLayoutEffect=function(e,n){return jt.current.useLayoutEffect(e,n)};Ie.useMemo=function(e,n){return jt.current.useMemo(e,n)};Ie.useReducer=function(e,n,s){return jt.current.useReducer(e,n,s)};Ie.useRef=function(e){return jt.current.useRef(e)};Ie.useState=function(e){return jt.current.useState(e)};Ie.useSyncExternalStore=function(e,n,s){return jt.current.useSyncExternalStore(e,n,s)};Ie.useTransition=function(){return jt.current.useTransition()};Ie.version="18.3.1";k1.exports=Ie;var P=k1.exports;const V1=R1(P),o2=T1({__proto__:null,default:V1},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a2=P,l2=Symbol.for("react.element"),c2=Symbol.for("react.fragment"),u2=Object.prototype.hasOwnProperty,f2=a2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d2={key:!0,ref:!0,__self:!0,__source:!0};function W1(e,n,s){var l,u={},d=null,x=null;s!==void 0&&(d=""+s),n.key!==void 0&&(d=""+n.key),n.ref!==void 0&&(x=n.ref);for(l in n)u2.call(n,l)&&!d2.hasOwnProperty(l)&&(u[l]=n[l]);if(e&&e.defaultProps)for(l in n=e.defaultProps,n)u[l]===void 0&&(u[l]=n[l]);return{$$typeof:l2,type:e,key:d,ref:x,props:u,_owner:f2.current}}pa.Fragment=c2;pa.jsx=W1;pa.jsxs=W1;O1.exports=pa;var E=O1.exports,Rl={},z1={exports:{}},on={},H1={exports:{}},G1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(ie,ge){var pe=ie.length;ie.push(ge);e:for(;0<pe;){var Oe=pe-1>>>1,Ae=ie[Oe];if(0<u(Ae,ge))ie[Oe]=ge,ie[pe]=Ae,pe=Oe;else break e}}function s(ie){return ie.length===0?null:ie[0]}function l(ie){if(ie.length===0)return null;var ge=ie[0],pe=ie.pop();if(pe!==ge){ie[0]=pe;e:for(var Oe=0,Ae=ie.length,ln=Ae>>>1;Oe<ln;){var Qe=2*(Oe+1)-1,Mr=ie[Qe],he=Qe+1,tr=ie[he];if(0>u(Mr,pe))he<Ae&&0>u(tr,Mr)?(ie[Oe]=tr,ie[he]=pe,Oe=he):(ie[Oe]=Mr,ie[Qe]=pe,Oe=Qe);else if(he<Ae&&0>u(tr,pe))ie[Oe]=tr,ie[he]=pe,Oe=he;else break e}}return ge}function u(ie,ge){var pe=ie.sortIndex-ge.sortIndex;return pe!==0?pe:ie.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var x=Date,w=x.now();e.unstable_now=function(){return x.now()-w}}var y=[],p=[],N=1,S=null,O=3,B=!1,Y=!1,j=!1,q=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(ie){for(var ge=s(p);ge!==null;){if(ge.callback===null)l(p);else if(ge.startTime<=ie)l(p),ge.sortIndex=ge.expirationTime,n(y,ge);else break;ge=s(p)}}function L(ie){if(j=!1,T(ie),!Y)if(s(y)!==null)Y=!0,ae(Z);else{var ge=s(p);ge!==null&&se(L,ge.startTime-ie)}}function Z(ie,ge){Y=!1,j&&(j=!1,R(F),F=-1),B=!0;var pe=O;try{for(T(ge),S=s(y);S!==null&&(!(S.expirationTime>ge)||ie&&!$());){var Oe=S.callback;if(typeof Oe=="function"){S.callback=null,O=S.priorityLevel;var Ae=Oe(S.expirationTime<=ge);ge=e.unstable_now(),typeof Ae=="function"?S.callback=Ae:S===s(y)&&l(y),T(ge)}else l(y);S=s(y)}if(S!==null)var ln=!0;else{var Qe=s(p);Qe!==null&&se(L,Qe.startTime-ge),ln=!1}return ln}finally{S=null,O=pe,B=!1}}var K=!1,z=null,F=-1,U=5,M=-1;function $(){return!(e.unstable_now()-M<U)}function ee(){if(z!==null){var ie=e.unstable_now();M=ie;var ge=!0;try{ge=z(!0,ie)}finally{ge?fe():(K=!1,z=null)}}else K=!1}var fe;if(typeof b=="function")fe=function(){b(ee)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,H=Ee.port2;Ee.port1.onmessage=ee,fe=function(){H.postMessage(null)}}else fe=function(){q(ee,0)};function ae(ie){z=ie,K||(K=!0,fe())}function se(ie,ge){F=q(function(){ie(e.unstable_now())},ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_continueExecution=function(){Y||B||(Y=!0,ae(Z))},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return s(y)},e.unstable_next=function(ie){switch(O){case 1:case 2:case 3:var ge=3;break;default:ge=O}var pe=O;O=ge;try{return ie()}finally{O=pe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ie,ge){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var pe=O;O=ie;try{return ge()}finally{O=pe}},e.unstable_scheduleCallback=function(ie,ge,pe){var Oe=e.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Oe+pe:Oe):pe=Oe,ie){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=pe+Ae,ie={id:N++,callback:ge,priorityLevel:ie,startTime:pe,expirationTime:Ae,sortIndex:-1},pe>Oe?(ie.sortIndex=pe,n(p,ie),s(y)===null&&ie===s(p)&&(j?(R(F),F=-1):j=!0,se(L,pe-Oe))):(ie.sortIndex=Ae,n(y,ie),Y||B||(Y=!0,ae(Z))),ie},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(ie){var ge=O;return function(){var pe=O;O=ge;try{return ie.apply(this,arguments)}finally{O=pe}}}})(G1);H1.exports=G1;var h2=H1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g2=P,sn=h2;function te(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X1=new Set,Is={};function Jr(e,n){Di(e,n),Di(e+"Capture",n)}function Di(e,n){for(Is[e]=n,e=0;e<n.length;e++)X1.add(n[e])}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ol=Object.prototype.hasOwnProperty,x2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zu={},Ku={};function p2(e){return Ol.call(Ku,e)?!0:Ol.call(Zu,e)?!1:x2.test(e)?Ku[e]=!0:(Zu[e]=!0,!1)}function m2(e,n,s,l){if(s!==null&&s.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return l?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function w2(e,n,s,l){if(n===null||typeof n>"u"||m2(e,n,s,l))return!0;if(l)return!1;if(s!==null)switch(s.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Ut(e,n,s,l,u,d,x){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=l,this.attributeNamespace=u,this.mustUseProperty=s,this.propertyName=e,this.type=n,this.sanitizeURL=d,this.removeEmptyString=x}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){bt[e]=new Ut(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];bt[n]=new Ut(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){bt[e]=new Ut(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){bt[e]=new Ut(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){bt[e]=new Ut(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){bt[e]=new Ut(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){bt[e]=new Ut(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){bt[e]=new Ut(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){bt[e]=new Ut(e,5,!1,e.toLowerCase(),null,!1,!1)});var Mc=/[\-:]([a-z])/g;function Pc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(Mc,Pc);bt[n]=new Ut(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(Mc,Pc);bt[n]=new Ut(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(Mc,Pc);bt[n]=new Ut(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){bt[e]=new Ut(e,1,!1,e.toLowerCase(),null,!1,!1)});bt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){bt[e]=new Ut(e,1,!1,e.toLowerCase(),null,!0,!0)});function Bc(e,n,s,l){var u=bt.hasOwnProperty(n)?bt[n]:null;(u!==null?u.type!==0:l||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(w2(n,s,u,l)&&(s=null),l||u===null?p2(n)&&(s===null?e.removeAttribute(n):e.setAttribute(n,""+s)):u.mustUseProperty?e[u.propertyName]=s===null?u.type===3?!1:"":s:(n=u.attributeName,l=u.attributeNamespace,s===null?e.removeAttribute(n):(u=u.type,s=u===3||u===4&&s===!0?"":""+s,l?e.setAttributeNS(l,n,s):e.setAttribute(n,s))))}var er=g2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fo=Symbol.for("react.element"),gi=Symbol.for("react.portal"),xi=Symbol.for("react.fragment"),Lc=Symbol.for("react.strict_mode"),kl=Symbol.for("react.profiler"),Y1=Symbol.for("react.provider"),Z1=Symbol.for("react.context"),Fc=Symbol.for("react.forward_ref"),Dl=Symbol.for("react.suspense"),Ml=Symbol.for("react.suspense_list"),jc=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),K1=Symbol.for("react.offscreen"),Qu=Symbol.iterator;function is(e){return e===null||typeof e!="object"?null:(e=Qu&&e[Qu]||e["@@iterator"],typeof e=="function"?e:null)}var et=Object.assign,nl;function ds(e){if(nl===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);nl=n&&n[1]||""}return`
`+nl+e}var rl=!1;function il(e,n){if(!e||rl)return"";rl=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(p){var l=p}Reflect.construct(e,[],n)}else{try{n.call()}catch(p){l=p}e.call(n.prototype)}else{try{throw Error()}catch(p){l=p}e()}}catch(p){if(p&&l&&typeof p.stack=="string"){for(var u=p.stack.split(`
`),d=l.stack.split(`
`),x=u.length-1,w=d.length-1;1<=x&&0<=w&&u[x]!==d[w];)w--;for(;1<=x&&0<=w;x--,w--)if(u[x]!==d[w]){if(x!==1||w!==1)do if(x--,w--,0>w||u[x]!==d[w]){var y=`
`+u[x].replace(" at new "," at ");return e.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",e.displayName)),y}while(1<=x&&0<=w);break}}}finally{rl=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?ds(e):""}function y2(e){switch(e.tag){case 5:return ds(e.type);case 16:return ds("Lazy");case 13:return ds("Suspense");case 19:return ds("SuspenseList");case 0:case 2:case 15:return e=il(e.type,!1),e;case 11:return e=il(e.type.render,!1),e;case 1:return e=il(e.type,!0),e;default:return""}}function Pl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xi:return"Fragment";case gi:return"Portal";case kl:return"Profiler";case Lc:return"StrictMode";case Dl:return"Suspense";case Ml:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Z1:return(e.displayName||"Context")+".Consumer";case Y1:return(e._context.displayName||"Context")+".Provider";case Fc:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case jc:return n=e.displayName||null,n!==null?n:Pl(e.type)||"Memo";case dr:n=e._payload,e=e._init;try{return Pl(e(n))}catch{}}return null}function E2(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pl(n);case 8:return n===Lc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function _r(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Q1(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function C2(e){var n=Q1(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),l=""+e[n];if(!e.hasOwnProperty(n)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var u=s.get,d=s.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(x){l=""+x,d.call(this,x)}}),Object.defineProperty(e,n,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function ho(e){e._valueTracker||(e._valueTracker=C2(e))}function q1(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),l="";return e&&(l=Q1(e)?e.checked?"true":"false":e.value),e=l,e!==s?(n.setValue(e),!0):!1}function Vo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Bl(e,n){var s=n.checked;return et({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function qu(e,n){var s=n.defaultValue==null?"":n.defaultValue,l=n.checked!=null?n.checked:n.defaultChecked;s=_r(n.value!=null?n.value:s),e._wrapperState={initialChecked:l,initialValue:s,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function $1(e,n){n=n.checked,n!=null&&Bc(e,"checked",n,!1)}function Ll(e,n){$1(e,n);var s=_r(n.value),l=n.type;if(s!=null)l==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Fl(e,n.type,s):n.hasOwnProperty("defaultValue")&&Fl(e,n.type,_r(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function $u(e,n,s){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var l=n.type;if(!(l!=="submit"&&l!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,s||n===e.value||(e.value=n),e.defaultValue=n}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Fl(e,n,s){(n!=="number"||Vo(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var hs=Array.isArray;function bi(e,n,s,l){if(e=e.options,n){n={};for(var u=0;u<s.length;u++)n["$"+s[u]]=!0;for(s=0;s<e.length;s++)u=n.hasOwnProperty("$"+e[s].value),e[s].selected!==u&&(e[s].selected=u),u&&l&&(e[s].defaultSelected=!0)}else{for(s=""+_r(s),n=null,u=0;u<e.length;u++){if(e[u].value===s){e[u].selected=!0,l&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function jl(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(te(91));return et({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ju(e,n){var s=n.value;if(s==null){if(s=n.children,n=n.defaultValue,s!=null){if(n!=null)throw Error(te(92));if(hs(s)){if(1<s.length)throw Error(te(93));s=s[0]}n=s}n==null&&(n=""),s=n}e._wrapperState={initialValue:_r(s)}}function J1(e,n){var s=_r(n.value),l=_r(n.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),n.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),l!=null&&(e.defaultValue=""+l)}function e0(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function ef(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ul(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?ef(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var go,tf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,s,l,u){MSApp.execUnsafeLocalFunction(function(){return e(n,s,l,u)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(go=go||document.createElement("div"),go.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=go.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Ns(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var ps={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},v2=["Webkit","ms","Moz","O"];Object.keys(ps).forEach(function(e){v2.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),ps[n]=ps[e]})});function nf(e,n,s){return n==null||typeof n=="boolean"||n===""?"":s||typeof n!="number"||n===0||ps.hasOwnProperty(e)&&ps[e]?(""+n).trim():n+"px"}function rf(e,n){e=e.style;for(var s in n)if(n.hasOwnProperty(s)){var l=s.indexOf("--")===0,u=nf(s,n[s],l);s==="float"&&(s="cssFloat"),l?e.setProperty(s,u):e[s]=u}}var A2=et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vl(e,n){if(n){if(A2[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(te(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(te(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(te(61))}if(n.style!=null&&typeof n.style!="object")throw Error(te(62))}}function Wl(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zl=null;function Uc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hl=null,_i=null,Ti=null;function t0(e){if(e=Ys(e)){if(typeof Hl!="function")throw Error(te(280));var n=e.stateNode;n&&(n=Ca(n),Hl(e.stateNode,e.type,n))}}function sf(e){_i?Ti?Ti.push(e):Ti=[e]:_i=e}function of(){if(_i){var e=_i,n=Ti;if(Ti=_i=null,t0(e),n)for(e=0;e<n.length;e++)t0(n[e])}}function af(e,n){return e(n)}function lf(){}var sl=!1;function cf(e,n,s){if(sl)return e(n,s);sl=!0;try{return af(e,n,s)}finally{sl=!1,(_i!==null||Ti!==null)&&(lf(),of())}}function bs(e,n){var s=e.stateNode;if(s===null)return null;var l=Ca(s);if(l===null)return null;s=l[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(te(231,n,typeof s));return s}var Gl=!1;if(Kn)try{var ss={};Object.defineProperty(ss,"passive",{get:function(){Gl=!0}}),window.addEventListener("test",ss,ss),window.removeEventListener("test",ss,ss)}catch{Gl=!1}function S2(e,n,s,l,u,d,x,w,y){var p=Array.prototype.slice.call(arguments,3);try{n.apply(s,p)}catch(N){this.onError(N)}}var ms=!1,Wo=null,zo=!1,Xl=null,I2={onError:function(e){ms=!0,Wo=e}};function N2(e,n,s,l,u,d,x,w,y){ms=!1,Wo=null,S2.apply(I2,arguments)}function b2(e,n,s,l,u,d,x,w,y){if(N2.apply(this,arguments),ms){if(ms){var p=Wo;ms=!1,Wo=null}else throw Error(te(198));zo||(zo=!0,Xl=p)}}function ei(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function uf(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function n0(e){if(ei(e)!==e)throw Error(te(188))}function _2(e){var n=e.alternate;if(!n){if(n=ei(e),n===null)throw Error(te(188));return n!==e?null:e}for(var s=e,l=n;;){var u=s.return;if(u===null)break;var d=u.alternate;if(d===null){if(l=u.return,l!==null){s=l;continue}break}if(u.child===d.child){for(d=u.child;d;){if(d===s)return n0(u),e;if(d===l)return n0(u),n;d=d.sibling}throw Error(te(188))}if(s.return!==l.return)s=u,l=d;else{for(var x=!1,w=u.child;w;){if(w===s){x=!0,s=u,l=d;break}if(w===l){x=!0,l=u,s=d;break}w=w.sibling}if(!x){for(w=d.child;w;){if(w===s){x=!0,s=d,l=u;break}if(w===l){x=!0,l=d,s=u;break}w=w.sibling}if(!x)throw Error(te(189))}}if(s.alternate!==l)throw Error(te(190))}if(s.tag!==3)throw Error(te(188));return s.stateNode.current===s?e:n}function ff(e){return e=_2(e),e!==null?df(e):null}function df(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=df(e);if(n!==null)return n;e=e.sibling}return null}var hf=sn.unstable_scheduleCallback,r0=sn.unstable_cancelCallback,T2=sn.unstable_shouldYield,R2=sn.unstable_requestPaint,lt=sn.unstable_now,O2=sn.unstable_getCurrentPriorityLevel,Vc=sn.unstable_ImmediatePriority,gf=sn.unstable_UserBlockingPriority,Ho=sn.unstable_NormalPriority,k2=sn.unstable_LowPriority,xf=sn.unstable_IdlePriority,ma=null,jn=null;function D2(e){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(ma,e,void 0,(e.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:B2,M2=Math.log,P2=Math.LN2;function B2(e){return e>>>=0,e===0?32:31-(M2(e)/P2|0)|0}var xo=64,po=4194304;function gs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Go(e,n){var s=e.pendingLanes;if(s===0)return 0;var l=0,u=e.suspendedLanes,d=e.pingedLanes,x=s&268435455;if(x!==0){var w=x&~u;w!==0?l=gs(w):(d&=x,d!==0&&(l=gs(d)))}else x=s&~u,x!==0?l=gs(x):d!==0&&(l=gs(d));if(l===0)return 0;if(n!==0&&n!==l&&!(n&u)&&(u=l&-l,d=n&-n,u>=d||u===16&&(d&4194240)!==0))return n;if(l&4&&(l|=s&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=l;0<n;)s=31-Nn(n),u=1<<s,l|=e[s],n&=~u;return l}function L2(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F2(e,n){for(var s=e.suspendedLanes,l=e.pingedLanes,u=e.expirationTimes,d=e.pendingLanes;0<d;){var x=31-Nn(d),w=1<<x,y=u[x];y===-1?(!(w&s)||w&l)&&(u[x]=L2(w,n)):y<=n&&(e.expiredLanes|=w),d&=~w}}function Yl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function pf(){var e=xo;return xo<<=1,!(xo&4194240)&&(xo=64),e}function ol(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function Gs(e,n,s){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Nn(n),e[n]=s}function j2(e,n){var s=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<s;){var u=31-Nn(s),d=1<<u;n[u]=0,l[u]=-1,e[u]=-1,s&=~d}}function Wc(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var l=31-Nn(s),u=1<<l;u&n|e[l]&n&&(e[l]|=n),s&=~u}}var Be=0;function mf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wf,zc,yf,Ef,Cf,Zl=!1,mo=[],yr=null,Er=null,Cr=null,_s=new Map,Ts=new Map,gr=[],U2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function i0(e,n){switch(e){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":_s.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ts.delete(n.pointerId)}}function os(e,n,s,l,u,d){return e===null||e.nativeEvent!==d?(e={blockedOn:n,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[u]},n!==null&&(n=Ys(n),n!==null&&zc(n)),e):(e.eventSystemFlags|=l,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function V2(e,n,s,l,u){switch(n){case"focusin":return yr=os(yr,e,n,s,l,u),!0;case"dragenter":return Er=os(Er,e,n,s,l,u),!0;case"mouseover":return Cr=os(Cr,e,n,s,l,u),!0;case"pointerover":var d=u.pointerId;return _s.set(d,os(_s.get(d)||null,e,n,s,l,u)),!0;case"gotpointercapture":return d=u.pointerId,Ts.set(d,os(Ts.get(d)||null,e,n,s,l,u)),!0}return!1}function vf(e){var n=zr(e.target);if(n!==null){var s=ei(n);if(s!==null){if(n=s.tag,n===13){if(n=uf(s),n!==null){e.blockedOn=n,Cf(e.priority,function(){yf(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Oo(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Kl(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);zl=l,s.target.dispatchEvent(l),zl=null}else return n=Ys(s),n!==null&&zc(n),e.blockedOn=s,!1;n.shift()}return!0}function s0(e,n,s){Oo(e)&&s.delete(n)}function W2(){Zl=!1,yr!==null&&Oo(yr)&&(yr=null),Er!==null&&Oo(Er)&&(Er=null),Cr!==null&&Oo(Cr)&&(Cr=null),_s.forEach(s0),Ts.forEach(s0)}function as(e,n){e.blockedOn===n&&(e.blockedOn=null,Zl||(Zl=!0,sn.unstable_scheduleCallback(sn.unstable_NormalPriority,W2)))}function Rs(e){function n(u){return as(u,e)}if(0<mo.length){as(mo[0],e);for(var s=1;s<mo.length;s++){var l=mo[s];l.blockedOn===e&&(l.blockedOn=null)}}for(yr!==null&&as(yr,e),Er!==null&&as(Er,e),Cr!==null&&as(Cr,e),_s.forEach(n),Ts.forEach(n),s=0;s<gr.length;s++)l=gr[s],l.blockedOn===e&&(l.blockedOn=null);for(;0<gr.length&&(s=gr[0],s.blockedOn===null);)vf(s),s.blockedOn===null&&gr.shift()}var Ri=er.ReactCurrentBatchConfig,Xo=!0;function z2(e,n,s,l){var u=Be,d=Ri.transition;Ri.transition=null;try{Be=1,Hc(e,n,s,l)}finally{Be=u,Ri.transition=d}}function H2(e,n,s,l){var u=Be,d=Ri.transition;Ri.transition=null;try{Be=4,Hc(e,n,s,l)}finally{Be=u,Ri.transition=d}}function Hc(e,n,s,l){if(Xo){var u=Kl(e,n,s,l);if(u===null)pl(e,n,l,Yo,s),i0(e,l);else if(V2(u,e,n,s,l))l.stopPropagation();else if(i0(e,l),n&4&&-1<U2.indexOf(e)){for(;u!==null;){var d=Ys(u);if(d!==null&&wf(d),d=Kl(e,n,s,l),d===null&&pl(e,n,l,Yo,s),d===u)break;u=d}u!==null&&l.stopPropagation()}else pl(e,n,l,null,s)}}var Yo=null;function Kl(e,n,s,l){if(Yo=null,e=Uc(l),e=zr(e),e!==null)if(n=ei(e),n===null)e=null;else if(s=n.tag,s===13){if(e=uf(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Yo=e,null}function Af(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(O2()){case Vc:return 1;case gf:return 4;case Ho:case k2:return 16;case xf:return 536870912;default:return 16}default:return 16}}var pr=null,Gc=null,ko=null;function Sf(){if(ko)return ko;var e,n=Gc,s=n.length,l,u="value"in pr?pr.value:pr.textContent,d=u.length;for(e=0;e<s&&n[e]===u[e];e++);var x=s-e;for(l=1;l<=x&&n[s-l]===u[d-l];l++);return ko=u.slice(e,1<l?1-l:void 0)}function Do(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function wo(){return!0}function o0(){return!1}function an(e){function n(s,l,u,d,x){this._reactName=s,this._targetInst=u,this.type=l,this.nativeEvent=d,this.target=x,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(s=e[w],this[w]=s?s(d):d[w]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?wo:o0,this.isPropagationStopped=o0,this}return et(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=wo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=wo)},persist:function(){},isPersistent:wo}),n}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xc=an(Wi),Xs=et({},Wi,{view:0,detail:0}),G2=an(Xs),al,ll,ls,wa=et({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ls&&(ls&&e.type==="mousemove"?(al=e.screenX-ls.screenX,ll=e.screenY-ls.screenY):ll=al=0,ls=e),al)},movementY:function(e){return"movementY"in e?e.movementY:ll}}),a0=an(wa),X2=et({},wa,{dataTransfer:0}),Y2=an(X2),Z2=et({},Xs,{relatedTarget:0}),cl=an(Z2),K2=et({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Q2=an(K2),q2=et({},Wi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$2=an(q2),J2=et({},Wi,{data:0}),l0=an(J2),eg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ng={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rg(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ng[e])?!!n[e]:!1}function Yc(){return rg}var ig=et({},Xs,{key:function(e){if(e.key){var n=eg[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Do(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yc,charCode:function(e){return e.type==="keypress"?Do(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Do(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sg=an(ig),og=et({},wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c0=an(og),ag=et({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yc}),lg=an(ag),cg=et({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ug=an(cg),fg=et({},wa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),dg=an(fg),hg=[9,13,27,32],Zc=Kn&&"CompositionEvent"in window,ws=null;Kn&&"documentMode"in document&&(ws=document.documentMode);var gg=Kn&&"TextEvent"in window&&!ws,If=Kn&&(!Zc||ws&&8<ws&&11>=ws),u0=" ",f0=!1;function Nf(e,n){switch(e){case"keyup":return hg.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pi=!1;function xg(e,n){switch(e){case"compositionend":return bf(n);case"keypress":return n.which!==32?null:(f0=!0,u0);case"textInput":return e=n.data,e===u0&&f0?null:e;default:return null}}function pg(e,n){if(pi)return e==="compositionend"||!Zc&&Nf(e,n)?(e=Sf(),ko=Gc=pr=null,pi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return If&&n.locale!=="ko"?null:n.data;default:return null}}var mg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d0(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!mg[e.type]:n==="textarea"}function _f(e,n,s,l){sf(l),n=Zo(n,"onChange"),0<n.length&&(s=new Xc("onChange","change",null,s,l),e.push({event:s,listeners:n}))}var ys=null,Os=null;function wg(e){jf(e,0)}function ya(e){var n=yi(e);if(q1(n))return e}function yg(e,n){if(e==="change")return n}var Tf=!1;if(Kn){var ul;if(Kn){var fl="oninput"in document;if(!fl){var h0=document.createElement("div");h0.setAttribute("oninput","return;"),fl=typeof h0.oninput=="function"}ul=fl}else ul=!1;Tf=ul&&(!document.documentMode||9<document.documentMode)}function g0(){ys&&(ys.detachEvent("onpropertychange",Rf),Os=ys=null)}function Rf(e){if(e.propertyName==="value"&&ya(Os)){var n=[];_f(n,Os,e,Uc(e)),cf(wg,n)}}function Eg(e,n,s){e==="focusin"?(g0(),ys=n,Os=s,ys.attachEvent("onpropertychange",Rf)):e==="focusout"&&g0()}function Cg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ya(Os)}function vg(e,n){if(e==="click")return ya(n)}function Ag(e,n){if(e==="input"||e==="change")return ya(n)}function Sg(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var _n=typeof Object.is=="function"?Object.is:Sg;function ks(e,n){if(_n(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),l=Object.keys(n);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var u=s[l];if(!Ol.call(n,u)||!_n(e[u],n[u]))return!1}return!0}function x0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function p0(e,n){var s=x0(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=n&&l>=n)return{node:s,offset:n-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=x0(s)}}function Of(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Of(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function kf(){for(var e=window,n=Vo();n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=Vo(e.document)}return n}function Kc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function Ig(e){var n=kf(),s=e.focusedElem,l=e.selectionRange;if(n!==s&&s&&s.ownerDocument&&Of(s.ownerDocument.documentElement,s)){if(l!==null&&Kc(s)){if(n=l.start,e=l.end,e===void 0&&(e=n),"selectionStart"in s)s.selectionStart=n,s.selectionEnd=Math.min(e,s.value.length);else if(e=(n=s.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var u=s.textContent.length,d=Math.min(l.start,u);l=l.end===void 0?d:Math.min(l.end,u),!e.extend&&d>l&&(u=l,l=d,d=u),u=p0(s,d);var x=p0(s,l);u&&x&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==x.node||e.focusOffset!==x.offset)&&(n=n.createRange(),n.setStart(u.node,u.offset),e.removeAllRanges(),d>l?(e.addRange(n),e.extend(x.node,x.offset)):(n.setEnd(x.node,x.offset),e.addRange(n)))}}for(n=[],e=s;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<n.length;s++)e=n[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ng=Kn&&"documentMode"in document&&11>=document.documentMode,mi=null,Ql=null,Es=null,ql=!1;function m0(e,n,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ql||mi==null||mi!==Vo(l)||(l=mi,"selectionStart"in l&&Kc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Es&&ks(Es,l)||(Es=l,l=Zo(Ql,"onSelect"),0<l.length&&(n=new Xc("onSelect","select",null,n,s),e.push({event:n,listeners:l}),n.target=mi)))}function yo(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var wi={animationend:yo("Animation","AnimationEnd"),animationiteration:yo("Animation","AnimationIteration"),animationstart:yo("Animation","AnimationStart"),transitionend:yo("Transition","TransitionEnd")},dl={},Df={};Kn&&(Df=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);function Ea(e){if(dl[e])return dl[e];if(!wi[e])return e;var n=wi[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Df)return dl[e]=n[s];return e}var Mf=Ea("animationend"),Pf=Ea("animationiteration"),Bf=Ea("animationstart"),Lf=Ea("transitionend"),Ff=new Map,w0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,n){Ff.set(e,n),Jr(n,[e])}for(var hl=0;hl<w0.length;hl++){var gl=w0[hl],bg=gl.toLowerCase(),_g=gl[0].toUpperCase()+gl.slice(1);Rr(bg,"on"+_g)}Rr(Mf,"onAnimationEnd");Rr(Pf,"onAnimationIteration");Rr(Bf,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(Lf,"onTransitionEnd");Di("onMouseEnter",["mouseout","mouseover"]);Di("onMouseLeave",["mouseout","mouseover"]);Di("onPointerEnter",["pointerout","pointerover"]);Di("onPointerLeave",["pointerout","pointerover"]);Jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tg=new Set("cancel close invalid load scroll toggle".split(" ").concat(xs));function y0(e,n,s){var l=e.type||"unknown-event";e.currentTarget=s,b2(l,n,void 0,e),e.currentTarget=null}function jf(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],u=l.event;l=l.listeners;e:{var d=void 0;if(n)for(var x=l.length-1;0<=x;x--){var w=l[x],y=w.instance,p=w.currentTarget;if(w=w.listener,y!==d&&u.isPropagationStopped())break e;y0(u,w,p),d=y}else for(x=0;x<l.length;x++){if(w=l[x],y=w.instance,p=w.currentTarget,w=w.listener,y!==d&&u.isPropagationStopped())break e;y0(u,w,p),d=y}}}if(zo)throw e=Xl,zo=!1,Xl=null,e}function Ge(e,n){var s=n[nc];s===void 0&&(s=n[nc]=new Set);var l=e+"__bubble";s.has(l)||(Uf(n,e,2,!1),s.add(l))}function xl(e,n,s){var l=0;n&&(l|=4),Uf(s,e,l,n)}var Eo="_reactListening"+Math.random().toString(36).slice(2);function Ds(e){if(!e[Eo]){e[Eo]=!0,X1.forEach(function(s){s!=="selectionchange"&&(Tg.has(s)||xl(s,!1,e),xl(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Eo]||(n[Eo]=!0,xl("selectionchange",!1,n))}}function Uf(e,n,s,l){switch(Af(n)){case 1:var u=z2;break;case 4:u=H2;break;default:u=Hc}s=u.bind(null,n,s,e),u=void 0,!Gl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),l?u!==void 0?e.addEventListener(n,s,{capture:!0,passive:u}):e.addEventListener(n,s,!0):u!==void 0?e.addEventListener(n,s,{passive:u}):e.addEventListener(n,s,!1)}function pl(e,n,s,l,u){var d=l;if(!(n&1)&&!(n&2)&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var w=l.stateNode.containerInfo;if(w===u||w.nodeType===8&&w.parentNode===u)break;if(x===4)for(x=l.return;x!==null;){var y=x.tag;if((y===3||y===4)&&(y=x.stateNode.containerInfo,y===u||y.nodeType===8&&y.parentNode===u))return;x=x.return}for(;w!==null;){if(x=zr(w),x===null)return;if(y=x.tag,y===5||y===6){l=d=x;continue e}w=w.parentNode}}l=l.return}cf(function(){var p=d,N=Uc(s),S=[];e:{var O=Ff.get(e);if(O!==void 0){var B=Xc,Y=e;switch(e){case"keypress":if(Do(s)===0)break e;case"keydown":case"keyup":B=sg;break;case"focusin":Y="focus",B=cl;break;case"focusout":Y="blur",B=cl;break;case"beforeblur":case"afterblur":B=cl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=a0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Y2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=lg;break;case Mf:case Pf:case Bf:B=Q2;break;case Lf:B=ug;break;case"scroll":B=G2;break;case"wheel":B=dg;break;case"copy":case"cut":case"paste":B=$2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=c0}var j=(n&4)!==0,q=!j&&e==="scroll",R=j?O!==null?O+"Capture":null:O;j=[];for(var b=p,T;b!==null;){T=b;var L=T.stateNode;if(T.tag===5&&L!==null&&(T=L,R!==null&&(L=bs(b,R),L!=null&&j.push(Ms(b,L,T)))),q)break;b=b.return}0<j.length&&(O=new B(O,Y,null,s,N),S.push({event:O,listeners:j}))}}if(!(n&7)){e:{if(O=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",O&&s!==zl&&(Y=s.relatedTarget||s.fromElement)&&(zr(Y)||Y[Qn]))break e;if((B||O)&&(O=N.window===N?N:(O=N.ownerDocument)?O.defaultView||O.parentWindow:window,B?(Y=s.relatedTarget||s.toElement,B=p,Y=Y?zr(Y):null,Y!==null&&(q=ei(Y),Y!==q||Y.tag!==5&&Y.tag!==6)&&(Y=null)):(B=null,Y=p),B!==Y)){if(j=a0,L="onMouseLeave",R="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(j=c0,L="onPointerLeave",R="onPointerEnter",b="pointer"),q=B==null?O:yi(B),T=Y==null?O:yi(Y),O=new j(L,b+"leave",B,s,N),O.target=q,O.relatedTarget=T,L=null,zr(N)===p&&(j=new j(R,b+"enter",Y,s,N),j.target=T,j.relatedTarget=q,L=j),q=L,B&&Y)t:{for(j=B,R=Y,b=0,T=j;T;T=di(T))b++;for(T=0,L=R;L;L=di(L))T++;for(;0<b-T;)j=di(j),b--;for(;0<T-b;)R=di(R),T--;for(;b--;){if(j===R||R!==null&&j===R.alternate)break t;j=di(j),R=di(R)}j=null}else j=null;B!==null&&E0(S,O,B,j,!1),Y!==null&&q!==null&&E0(S,q,Y,j,!0)}}e:{if(O=p?yi(p):window,B=O.nodeName&&O.nodeName.toLowerCase(),B==="select"||B==="input"&&O.type==="file")var Z=yg;else if(d0(O))if(Tf)Z=Ag;else{Z=Cg;var K=Eg}else(B=O.nodeName)&&B.toLowerCase()==="input"&&(O.type==="checkbox"||O.type==="radio")&&(Z=vg);if(Z&&(Z=Z(e,p))){_f(S,Z,s,N);break e}K&&K(e,O,p),e==="focusout"&&(K=O._wrapperState)&&K.controlled&&O.type==="number"&&Fl(O,"number",O.value)}switch(K=p?yi(p):window,e){case"focusin":(d0(K)||K.contentEditable==="true")&&(mi=K,Ql=p,Es=null);break;case"focusout":Es=Ql=mi=null;break;case"mousedown":ql=!0;break;case"contextmenu":case"mouseup":case"dragend":ql=!1,m0(S,s,N);break;case"selectionchange":if(Ng)break;case"keydown":case"keyup":m0(S,s,N)}var z;if(Zc)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else pi?Nf(e,s)&&(F="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(F="onCompositionStart");F&&(If&&s.locale!=="ko"&&(pi||F!=="onCompositionStart"?F==="onCompositionEnd"&&pi&&(z=Sf()):(pr=N,Gc="value"in pr?pr.value:pr.textContent,pi=!0)),K=Zo(p,F),0<K.length&&(F=new l0(F,e,null,s,N),S.push({event:F,listeners:K}),z?F.data=z:(z=bf(s),z!==null&&(F.data=z)))),(z=gg?xg(e,s):pg(e,s))&&(p=Zo(p,"onBeforeInput"),0<p.length&&(N=new l0("onBeforeInput","beforeinput",null,s,N),S.push({event:N,listeners:p}),N.data=z))}jf(S,n)})}function Ms(e,n,s){return{instance:e,listener:n,currentTarget:s}}function Zo(e,n){for(var s=n+"Capture",l=[];e!==null;){var u=e,d=u.stateNode;u.tag===5&&d!==null&&(u=d,d=bs(e,s),d!=null&&l.unshift(Ms(e,d,u)),d=bs(e,n),d!=null&&l.push(Ms(e,d,u))),e=e.return}return l}function di(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function E0(e,n,s,l,u){for(var d=n._reactName,x=[];s!==null&&s!==l;){var w=s,y=w.alternate,p=w.stateNode;if(y!==null&&y===l)break;w.tag===5&&p!==null&&(w=p,u?(y=bs(s,d),y!=null&&x.unshift(Ms(s,y,w))):u||(y=bs(s,d),y!=null&&x.push(Ms(s,y,w)))),s=s.return}x.length!==0&&e.push({event:n,listeners:x})}var Rg=/\r\n?/g,Og=/\u0000|\uFFFD/g;function C0(e){return(typeof e=="string"?e:""+e).replace(Rg,`
`).replace(Og,"")}function Co(e,n,s){if(n=C0(n),C0(e)!==n&&s)throw Error(te(425))}function Ko(){}var $l=null,Jl=null;function ec(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var tc=typeof setTimeout=="function"?setTimeout:void 0,kg=typeof clearTimeout=="function"?clearTimeout:void 0,v0=typeof Promise=="function"?Promise:void 0,Dg=typeof queueMicrotask=="function"?queueMicrotask:typeof v0<"u"?function(e){return v0.resolve(null).then(e).catch(Mg)}:tc;function Mg(e){setTimeout(function(){throw e})}function ml(e,n){var s=n,l=0;do{var u=s.nextSibling;if(e.removeChild(s),u&&u.nodeType===8)if(s=u.data,s==="/$"){if(l===0){e.removeChild(u),Rs(n);return}l--}else s!=="$"&&s!=="$?"&&s!=="$!"||l++;s=u}while(s);Rs(n)}function vr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function A0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(n===0)return e;n--}else s==="/$"&&n++}e=e.previousSibling}return null}var zi=Math.random().toString(36).slice(2),Fn="__reactFiber$"+zi,Ps="__reactProps$"+zi,Qn="__reactContainer$"+zi,nc="__reactEvents$"+zi,Pg="__reactListeners$"+zi,Bg="__reactHandles$"+zi;function zr(e){var n=e[Fn];if(n)return n;for(var s=e.parentNode;s;){if(n=s[Qn]||s[Fn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=A0(e);e!==null;){if(s=e[Fn])return s;e=A0(e)}return n}e=s,s=e.parentNode}return null}function Ys(e){return e=e[Fn]||e[Qn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function yi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(te(33))}function Ca(e){return e[Ps]||null}var rc=[],Ei=-1;function Or(e){return{current:e}}function Ye(e){0>Ei||(e.current=rc[Ei],rc[Ei]=null,Ei--)}function ze(e,n){Ei++,rc[Ei]=e.current,e.current=n}var Tr={},Dt=Or(Tr),Qt=Or(!1),Zr=Tr;function Mi(e,n){var s=e.type.contextTypes;if(!s)return Tr;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===n)return l.__reactInternalMemoizedMaskedChildContext;var u={},d;for(d in s)u[d]=n[d];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=u),u}function qt(e){return e=e.childContextTypes,e!=null}function Qo(){Ye(Qt),Ye(Dt)}function S0(e,n,s){if(Dt.current!==Tr)throw Error(te(168));ze(Dt,n),ze(Qt,s)}function Vf(e,n,s){var l=e.stateNode;if(n=n.childContextTypes,typeof l.getChildContext!="function")return s;l=l.getChildContext();for(var u in l)if(!(u in n))throw Error(te(108,E2(e)||"Unknown",u));return et({},s,l)}function qo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Zr=Dt.current,ze(Dt,e),ze(Qt,Qt.current),!0}function I0(e,n,s){var l=e.stateNode;if(!l)throw Error(te(169));s?(e=Vf(e,n,Zr),l.__reactInternalMemoizedMergedChildContext=e,Ye(Qt),Ye(Dt),ze(Dt,e)):Ye(Qt),ze(Qt,s)}var Gn=null,va=!1,wl=!1;function Wf(e){Gn===null?Gn=[e]:Gn.push(e)}function Lg(e){va=!0,Wf(e)}function kr(){if(!wl&&Gn!==null){wl=!0;var e=0,n=Be;try{var s=Gn;for(Be=1;e<s.length;e++){var l=s[e];do l=l(!0);while(l!==null)}Gn=null,va=!1}catch(u){throw Gn!==null&&(Gn=Gn.slice(e+1)),hf(Vc,kr),u}finally{Be=n,wl=!1}}return null}var Ci=[],vi=0,$o=null,Jo=0,hn=[],gn=0,Kr=null,Xn=1,Yn="";function Vr(e,n){Ci[vi++]=Jo,Ci[vi++]=$o,$o=e,Jo=n}function zf(e,n,s){hn[gn++]=Xn,hn[gn++]=Yn,hn[gn++]=Kr,Kr=e;var l=Xn;e=Yn;var u=32-Nn(l)-1;l&=~(1<<u),s+=1;var d=32-Nn(n)+u;if(30<d){var x=u-u%5;d=(l&(1<<x)-1).toString(32),l>>=x,u-=x,Xn=1<<32-Nn(n)+u|s<<u|l,Yn=d+e}else Xn=1<<d|s<<u|l,Yn=e}function Qc(e){e.return!==null&&(Vr(e,1),zf(e,1,0))}function qc(e){for(;e===$o;)$o=Ci[--vi],Ci[vi]=null,Jo=Ci[--vi],Ci[vi]=null;for(;e===Kr;)Kr=hn[--gn],hn[gn]=null,Yn=hn[--gn],hn[gn]=null,Xn=hn[--gn],hn[gn]=null}var rn=null,nn=null,Ke=!1,In=null;function Hf(e,n){var s=xn(5,null,null,0);s.elementType="DELETED",s.stateNode=n,s.return=e,n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)}function N0(e,n){switch(e.tag){case 5:var s=e.type;return n=n.nodeType!==1||s.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,rn=e,nn=vr(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,rn=e,nn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(s=Kr!==null?{id:Xn,overflow:Yn}:null,e.memoizedState={dehydrated:n,treeContext:s,retryLane:1073741824},s=xn(18,null,null,0),s.stateNode=n,s.return=e,e.child=s,rn=e,nn=null,!0):!1;default:return!1}}function ic(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sc(e){if(Ke){var n=nn;if(n){var s=n;if(!N0(e,n)){if(ic(e))throw Error(te(418));n=vr(s.nextSibling);var l=rn;n&&N0(e,n)?Hf(l,s):(e.flags=e.flags&-4097|2,Ke=!1,rn=e)}}else{if(ic(e))throw Error(te(418));e.flags=e.flags&-4097|2,Ke=!1,rn=e}}}function b0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rn=e}function vo(e){if(e!==rn)return!1;if(!Ke)return b0(e),Ke=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!ec(e.type,e.memoizedProps)),n&&(n=nn)){if(ic(e))throw Gf(),Error(te(418));for(;n;)Hf(e,n),n=vr(n.nextSibling)}if(b0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(n===0){nn=vr(e.nextSibling);break e}n--}else s!=="$"&&s!=="$!"&&s!=="$?"||n++}e=e.nextSibling}nn=null}}else nn=rn?vr(e.stateNode.nextSibling):null;return!0}function Gf(){for(var e=nn;e;)e=vr(e.nextSibling)}function Pi(){nn=rn=null,Ke=!1}function $c(e){In===null?In=[e]:In.push(e)}var Fg=er.ReactCurrentBatchConfig;function cs(e,n,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(te(309));var l=s.stateNode}if(!l)throw Error(te(147,e));var u=l,d=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===d?n.ref:(n=function(x){var w=u.refs;x===null?delete w[d]:w[d]=x},n._stringRef=d,n)}if(typeof e!="string")throw Error(te(284));if(!s._owner)throw Error(te(290,e))}return e}function Ao(e,n){throw e=Object.prototype.toString.call(n),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function _0(e){var n=e._init;return n(e._payload)}function Xf(e){function n(R,b){if(e){var T=R.deletions;T===null?(R.deletions=[b],R.flags|=16):T.push(b)}}function s(R,b){if(!e)return null;for(;b!==null;)n(R,b),b=b.sibling;return null}function l(R,b){for(R=new Map;b!==null;)b.key!==null?R.set(b.key,b):R.set(b.index,b),b=b.sibling;return R}function u(R,b){return R=Nr(R,b),R.index=0,R.sibling=null,R}function d(R,b,T){return R.index=T,e?(T=R.alternate,T!==null?(T=T.index,T<b?(R.flags|=2,b):T):(R.flags|=2,b)):(R.flags|=1048576,b)}function x(R){return e&&R.alternate===null&&(R.flags|=2),R}function w(R,b,T,L){return b===null||b.tag!==6?(b=Il(T,R.mode,L),b.return=R,b):(b=u(b,T),b.return=R,b)}function y(R,b,T,L){var Z=T.type;return Z===xi?N(R,b,T.props.children,L,T.key):b!==null&&(b.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===dr&&_0(Z)===b.type)?(L=u(b,T.props),L.ref=cs(R,b,T),L.return=R,L):(L=Uo(T.type,T.key,T.props,null,R.mode,L),L.ref=cs(R,b,T),L.return=R,L)}function p(R,b,T,L){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=Nl(T,R.mode,L),b.return=R,b):(b=u(b,T.children||[]),b.return=R,b)}function N(R,b,T,L,Z){return b===null||b.tag!==7?(b=Yr(T,R.mode,L,Z),b.return=R,b):(b=u(b,T),b.return=R,b)}function S(R,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Il(""+b,R.mode,T),b.return=R,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case fo:return T=Uo(b.type,b.key,b.props,null,R.mode,T),T.ref=cs(R,null,b),T.return=R,T;case gi:return b=Nl(b,R.mode,T),b.return=R,b;case dr:var L=b._init;return S(R,L(b._payload),T)}if(hs(b)||is(b))return b=Yr(b,R.mode,T,null),b.return=R,b;Ao(R,b)}return null}function O(R,b,T,L){var Z=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return Z!==null?null:w(R,b,""+T,L);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case fo:return T.key===Z?y(R,b,T,L):null;case gi:return T.key===Z?p(R,b,T,L):null;case dr:return Z=T._init,O(R,b,Z(T._payload),L)}if(hs(T)||is(T))return Z!==null?null:N(R,b,T,L,null);Ao(R,T)}return null}function B(R,b,T,L,Z){if(typeof L=="string"&&L!==""||typeof L=="number")return R=R.get(T)||null,w(b,R,""+L,Z);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case fo:return R=R.get(L.key===null?T:L.key)||null,y(b,R,L,Z);case gi:return R=R.get(L.key===null?T:L.key)||null,p(b,R,L,Z);case dr:var K=L._init;return B(R,b,T,K(L._payload),Z)}if(hs(L)||is(L))return R=R.get(T)||null,N(b,R,L,Z,null);Ao(b,L)}return null}function Y(R,b,T,L){for(var Z=null,K=null,z=b,F=b=0,U=null;z!==null&&F<T.length;F++){z.index>F?(U=z,z=null):U=z.sibling;var M=O(R,z,T[F],L);if(M===null){z===null&&(z=U);break}e&&z&&M.alternate===null&&n(R,z),b=d(M,b,F),K===null?Z=M:K.sibling=M,K=M,z=U}if(F===T.length)return s(R,z),Ke&&Vr(R,F),Z;if(z===null){for(;F<T.length;F++)z=S(R,T[F],L),z!==null&&(b=d(z,b,F),K===null?Z=z:K.sibling=z,K=z);return Ke&&Vr(R,F),Z}for(z=l(R,z);F<T.length;F++)U=B(z,R,F,T[F],L),U!==null&&(e&&U.alternate!==null&&z.delete(U.key===null?F:U.key),b=d(U,b,F),K===null?Z=U:K.sibling=U,K=U);return e&&z.forEach(function($){return n(R,$)}),Ke&&Vr(R,F),Z}function j(R,b,T,L){var Z=is(T);if(typeof Z!="function")throw Error(te(150));if(T=Z.call(T),T==null)throw Error(te(151));for(var K=Z=null,z=b,F=b=0,U=null,M=T.next();z!==null&&!M.done;F++,M=T.next()){z.index>F?(U=z,z=null):U=z.sibling;var $=O(R,z,M.value,L);if($===null){z===null&&(z=U);break}e&&z&&$.alternate===null&&n(R,z),b=d($,b,F),K===null?Z=$:K.sibling=$,K=$,z=U}if(M.done)return s(R,z),Ke&&Vr(R,F),Z;if(z===null){for(;!M.done;F++,M=T.next())M=S(R,M.value,L),M!==null&&(b=d(M,b,F),K===null?Z=M:K.sibling=M,K=M);return Ke&&Vr(R,F),Z}for(z=l(R,z);!M.done;F++,M=T.next())M=B(z,R,F,M.value,L),M!==null&&(e&&M.alternate!==null&&z.delete(M.key===null?F:M.key),b=d(M,b,F),K===null?Z=M:K.sibling=M,K=M);return e&&z.forEach(function(ee){return n(R,ee)}),Ke&&Vr(R,F),Z}function q(R,b,T,L){if(typeof T=="object"&&T!==null&&T.type===xi&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case fo:e:{for(var Z=T.key,K=b;K!==null;){if(K.key===Z){if(Z=T.type,Z===xi){if(K.tag===7){s(R,K.sibling),b=u(K,T.props.children),b.return=R,R=b;break e}}else if(K.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===dr&&_0(Z)===K.type){s(R,K.sibling),b=u(K,T.props),b.ref=cs(R,K,T),b.return=R,R=b;break e}s(R,K);break}else n(R,K);K=K.sibling}T.type===xi?(b=Yr(T.props.children,R.mode,L,T.key),b.return=R,R=b):(L=Uo(T.type,T.key,T.props,null,R.mode,L),L.ref=cs(R,b,T),L.return=R,R=L)}return x(R);case gi:e:{for(K=T.key;b!==null;){if(b.key===K)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){s(R,b.sibling),b=u(b,T.children||[]),b.return=R,R=b;break e}else{s(R,b);break}else n(R,b);b=b.sibling}b=Nl(T,R.mode,L),b.return=R,R=b}return x(R);case dr:return K=T._init,q(R,b,K(T._payload),L)}if(hs(T))return Y(R,b,T,L);if(is(T))return j(R,b,T,L);Ao(R,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,b!==null&&b.tag===6?(s(R,b.sibling),b=u(b,T),b.return=R,R=b):(s(R,b),b=Il(T,R.mode,L),b.return=R,R=b),x(R)):s(R,b)}return q}var Bi=Xf(!0),Yf=Xf(!1),ea=Or(null),ta=null,Ai=null,Jc=null;function eu(){Jc=Ai=ta=null}function tu(e){var n=ea.current;Ye(ea),e._currentValue=n}function oc(e,n,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),e===s)break;e=e.return}}function Oi(e,n){ta=e,Jc=Ai=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(Kt=!0),e.firstContext=null)}function mn(e){var n=e._currentValue;if(Jc!==e)if(e={context:e,memoizedValue:n,next:null},Ai===null){if(ta===null)throw Error(te(308));Ai=e,ta.dependencies={lanes:0,firstContext:e}}else Ai=Ai.next=e;return n}var Hr=null;function nu(e){Hr===null?Hr=[e]:Hr.push(e)}function Zf(e,n,s,l){var u=n.interleaved;return u===null?(s.next=s,nu(n)):(s.next=u.next,u.next=s),n.interleaved=s,qn(e,l)}function qn(e,n){e.lanes|=n;var s=e.alternate;for(s!==null&&(s.lanes|=n),s=e,e=e.return;e!==null;)e.childLanes|=n,s=e.alternate,s!==null&&(s.childLanes|=n),s=e,e=e.return;return s.tag===3?s.stateNode:null}var hr=!1;function ru(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zn(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Ar(e,n,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,Re&2){var u=l.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),l.pending=n,qn(e,s)}return u=l.interleaved,u===null?(n.next=n,nu(l)):(n.next=u.next,u.next=n),l.interleaved=n,qn(e,s)}function Mo(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194240)!==0)){var l=n.lanes;l&=e.pendingLanes,s|=l,n.lanes=s,Wc(e,s)}}function T0(e,n){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var u=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var x={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};d===null?u=d=x:d=d.next=x,s=s.next}while(s!==null);d===null?u=d=n:d=d.next=n}else u=d=n;s={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:d,shared:l.shared,effects:l.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}function na(e,n,s,l){var u=e.updateQueue;hr=!1;var d=u.firstBaseUpdate,x=u.lastBaseUpdate,w=u.shared.pending;if(w!==null){u.shared.pending=null;var y=w,p=y.next;y.next=null,x===null?d=p:x.next=p,x=y;var N=e.alternate;N!==null&&(N=N.updateQueue,w=N.lastBaseUpdate,w!==x&&(w===null?N.firstBaseUpdate=p:w.next=p,N.lastBaseUpdate=y))}if(d!==null){var S=u.baseState;x=0,N=p=y=null,w=d;do{var O=w.lane,B=w.eventTime;if((l&O)===O){N!==null&&(N=N.next={eventTime:B,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var Y=e,j=w;switch(O=n,B=s,j.tag){case 1:if(Y=j.payload,typeof Y=="function"){S=Y.call(B,S,O);break e}S=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=j.payload,O=typeof Y=="function"?Y.call(B,S,O):Y,O==null)break e;S=et({},S,O);break e;case 2:hr=!0}}w.callback!==null&&w.lane!==0&&(e.flags|=64,O=u.effects,O===null?u.effects=[w]:O.push(w))}else B={eventTime:B,lane:O,tag:w.tag,payload:w.payload,callback:w.callback,next:null},N===null?(p=N=B,y=S):N=N.next=B,x|=O;if(w=w.next,w===null){if(w=u.shared.pending,w===null)break;O=w,w=O.next,O.next=null,u.lastBaseUpdate=O,u.shared.pending=null}}while(!0);if(N===null&&(y=S),u.baseState=y,u.firstBaseUpdate=p,u.lastBaseUpdate=N,n=u.shared.interleaved,n!==null){u=n;do x|=u.lane,u=u.next;while(u!==n)}else d===null&&(u.shared.lanes=0);qr|=x,e.lanes=x,e.memoizedState=S}}function R0(e,n,s){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var l=e[n],u=l.callback;if(u!==null){if(l.callback=null,l=s,typeof u!="function")throw Error(te(191,u));u.call(l)}}}var Zs={},Un=Or(Zs),Bs=Or(Zs),Ls=Or(Zs);function Gr(e){if(e===Zs)throw Error(te(174));return e}function iu(e,n){switch(ze(Ls,n),ze(Bs,e),ze(Un,Zs),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Ul(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=Ul(n,e)}Ye(Un),ze(Un,n)}function Li(){Ye(Un),Ye(Bs),Ye(Ls)}function Qf(e){Gr(Ls.current);var n=Gr(Un.current),s=Ul(n,e.type);n!==s&&(ze(Bs,e),ze(Un,s))}function su(e){Bs.current===e&&(Ye(Un),Ye(Bs))}var $e=Or(0);function ra(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var yl=[];function ou(){for(var e=0;e<yl.length;e++)yl[e]._workInProgressVersionPrimary=null;yl.length=0}var Po=er.ReactCurrentDispatcher,El=er.ReactCurrentBatchConfig,Qr=0,Je=null,gt=null,yt=null,ia=!1,Cs=!1,Fs=0,jg=0;function Rt(){throw Error(te(321))}function au(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!_n(e[s],n[s]))return!1;return!0}function lu(e,n,s,l,u,d){if(Qr=d,Je=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Po.current=e===null||e.memoizedState===null?zg:Hg,e=s(l,u),Cs){d=0;do{if(Cs=!1,Fs=0,25<=d)throw Error(te(301));d+=1,yt=gt=null,n.updateQueue=null,Po.current=Gg,e=s(l,u)}while(Cs)}if(Po.current=sa,n=gt!==null&&gt.next!==null,Qr=0,yt=gt=Je=null,ia=!1,n)throw Error(te(300));return e}function cu(){var e=Fs!==0;return Fs=0,e}function Ln(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Je.memoizedState=yt=e:yt=yt.next=e,yt}function wn(){if(gt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var n=yt===null?Je.memoizedState:yt.next;if(n!==null)yt=n,gt=e;else{if(e===null)throw Error(te(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},yt===null?Je.memoizedState=yt=e:yt=yt.next=e}return yt}function js(e,n){return typeof n=="function"?n(e):n}function Cl(e){var n=wn(),s=n.queue;if(s===null)throw Error(te(311));s.lastRenderedReducer=e;var l=gt,u=l.baseQueue,d=s.pending;if(d!==null){if(u!==null){var x=u.next;u.next=d.next,d.next=x}l.baseQueue=u=d,s.pending=null}if(u!==null){d=u.next,l=l.baseState;var w=x=null,y=null,p=d;do{var N=p.lane;if((Qr&N)===N)y!==null&&(y=y.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),l=p.hasEagerState?p.eagerState:e(l,p.action);else{var S={lane:N,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};y===null?(w=y=S,x=l):y=y.next=S,Je.lanes|=N,qr|=N}p=p.next}while(p!==null&&p!==d);y===null?x=l:y.next=w,_n(l,n.memoizedState)||(Kt=!0),n.memoizedState=l,n.baseState=x,n.baseQueue=y,s.lastRenderedState=l}if(e=s.interleaved,e!==null){u=e;do d=u.lane,Je.lanes|=d,qr|=d,u=u.next;while(u!==e)}else u===null&&(s.lanes=0);return[n.memoizedState,s.dispatch]}function vl(e){var n=wn(),s=n.queue;if(s===null)throw Error(te(311));s.lastRenderedReducer=e;var l=s.dispatch,u=s.pending,d=n.memoizedState;if(u!==null){s.pending=null;var x=u=u.next;do d=e(d,x.action),x=x.next;while(x!==u);_n(d,n.memoizedState)||(Kt=!0),n.memoizedState=d,n.baseQueue===null&&(n.baseState=d),s.lastRenderedState=d}return[d,l]}function qf(){}function $f(e,n){var s=Je,l=wn(),u=n(),d=!_n(l.memoizedState,u);if(d&&(l.memoizedState=u,Kt=!0),l=l.queue,uu(td.bind(null,s,l,e),[e]),l.getSnapshot!==n||d||yt!==null&&yt.memoizedState.tag&1){if(s.flags|=2048,Us(9,ed.bind(null,s,l,u,n),void 0,null),Et===null)throw Error(te(349));Qr&30||Jf(s,n,u)}return u}function Jf(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Je.updateQueue,n===null?(n={lastEffect:null,stores:null},Je.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function ed(e,n,s,l){n.value=s,n.getSnapshot=l,nd(n)&&rd(e)}function td(e,n,s){return s(function(){nd(n)&&rd(e)})}function nd(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!_n(e,s)}catch{return!0}}function rd(e){var n=qn(e,1);n!==null&&bn(n,e,1,-1)}function O0(e){var n=Ln();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:js,lastRenderedState:e},n.queue=e,e=e.dispatch=Wg.bind(null,Je,e),[n.memoizedState,e]}function Us(e,n,s,l){return e={tag:e,create:n,destroy:s,deps:l,next:null},n=Je.updateQueue,n===null?(n={lastEffect:null,stores:null},Je.updateQueue=n,n.lastEffect=e.next=e):(s=n.lastEffect,s===null?n.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,n.lastEffect=e)),e}function id(){return wn().memoizedState}function Bo(e,n,s,l){var u=Ln();Je.flags|=e,u.memoizedState=Us(1|n,s,void 0,l===void 0?null:l)}function Aa(e,n,s,l){var u=wn();l=l===void 0?null:l;var d=void 0;if(gt!==null){var x=gt.memoizedState;if(d=x.destroy,l!==null&&au(l,x.deps)){u.memoizedState=Us(n,s,d,l);return}}Je.flags|=e,u.memoizedState=Us(1|n,s,d,l)}function k0(e,n){return Bo(8390656,8,e,n)}function uu(e,n){return Aa(2048,8,e,n)}function sd(e,n){return Aa(4,2,e,n)}function od(e,n){return Aa(4,4,e,n)}function ad(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function ld(e,n,s){return s=s!=null?s.concat([e]):null,Aa(4,4,ad.bind(null,n,e),s)}function fu(){}function cd(e,n){var s=wn();n=n===void 0?null:n;var l=s.memoizedState;return l!==null&&n!==null&&au(n,l[1])?l[0]:(s.memoizedState=[e,n],e)}function ud(e,n){var s=wn();n=n===void 0?null:n;var l=s.memoizedState;return l!==null&&n!==null&&au(n,l[1])?l[0]:(e=e(),s.memoizedState=[e,n],e)}function fd(e,n,s){return Qr&21?(_n(s,n)||(s=pf(),Je.lanes|=s,qr|=s,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,Kt=!0),e.memoizedState=s)}function Ug(e,n){var s=Be;Be=s!==0&&4>s?s:4,e(!0);var l=El.transition;El.transition={};try{e(!1),n()}finally{Be=s,El.transition=l}}function dd(){return wn().memoizedState}function Vg(e,n,s){var l=Ir(e);if(s={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null},hd(e))gd(n,s);else if(s=Zf(e,n,s,l),s!==null){var u=Ft();bn(s,e,l,u),xd(s,n,l)}}function Wg(e,n,s){var l=Ir(e),u={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null};if(hd(e))gd(n,u);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=n.lastRenderedReducer,d!==null))try{var x=n.lastRenderedState,w=d(x,s);if(u.hasEagerState=!0,u.eagerState=w,_n(w,x)){var y=n.interleaved;y===null?(u.next=u,nu(n)):(u.next=y.next,y.next=u),n.interleaved=u;return}}catch{}finally{}s=Zf(e,n,u,l),s!==null&&(u=Ft(),bn(s,e,l,u),xd(s,n,l))}}function hd(e){var n=e.alternate;return e===Je||n!==null&&n===Je}function gd(e,n){Cs=ia=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function xd(e,n,s){if(s&4194240){var l=n.lanes;l&=e.pendingLanes,s|=l,n.lanes=s,Wc(e,s)}}var sa={readContext:mn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},zg={readContext:mn,useCallback:function(e,n){return Ln().memoizedState=[e,n===void 0?null:n],e},useContext:mn,useEffect:k0,useImperativeHandle:function(e,n,s){return s=s!=null?s.concat([e]):null,Bo(4194308,4,ad.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Bo(4194308,4,e,n)},useInsertionEffect:function(e,n){return Bo(4,2,e,n)},useMemo:function(e,n){var s=Ln();return n=n===void 0?null:n,e=e(),s.memoizedState=[e,n],e},useReducer:function(e,n,s){var l=Ln();return n=s!==void 0?s(n):n,l.memoizedState=l.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=Vg.bind(null,Je,e),[l.memoizedState,e]},useRef:function(e){var n=Ln();return e={current:e},n.memoizedState=e},useState:O0,useDebugValue:fu,useDeferredValue:function(e){return Ln().memoizedState=e},useTransition:function(){var e=O0(!1),n=e[0];return e=Ug.bind(null,e[1]),Ln().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,s){var l=Je,u=Ln();if(Ke){if(s===void 0)throw Error(te(407));s=s()}else{if(s=n(),Et===null)throw Error(te(349));Qr&30||Jf(l,n,s)}u.memoizedState=s;var d={value:s,getSnapshot:n};return u.queue=d,k0(td.bind(null,l,d,e),[e]),l.flags|=2048,Us(9,ed.bind(null,l,d,s,n),void 0,null),s},useId:function(){var e=Ln(),n=Et.identifierPrefix;if(Ke){var s=Yn,l=Xn;s=(l&~(1<<32-Nn(l)-1)).toString(32)+s,n=":"+n+"R"+s,s=Fs++,0<s&&(n+="H"+s.toString(32)),n+=":"}else s=jg++,n=":"+n+"r"+s.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},Hg={readContext:mn,useCallback:cd,useContext:mn,useEffect:uu,useImperativeHandle:ld,useInsertionEffect:sd,useLayoutEffect:od,useMemo:ud,useReducer:Cl,useRef:id,useState:function(){return Cl(js)},useDebugValue:fu,useDeferredValue:function(e){var n=wn();return fd(n,gt.memoizedState,e)},useTransition:function(){var e=Cl(js)[0],n=wn().memoizedState;return[e,n]},useMutableSource:qf,useSyncExternalStore:$f,useId:dd,unstable_isNewReconciler:!1},Gg={readContext:mn,useCallback:cd,useContext:mn,useEffect:uu,useImperativeHandle:ld,useInsertionEffect:sd,useLayoutEffect:od,useMemo:ud,useReducer:vl,useRef:id,useState:function(){return vl(js)},useDebugValue:fu,useDeferredValue:function(e){var n=wn();return gt===null?n.memoizedState=e:fd(n,gt.memoizedState,e)},useTransition:function(){var e=vl(js)[0],n=wn().memoizedState;return[e,n]},useMutableSource:qf,useSyncExternalStore:$f,useId:dd,unstable_isNewReconciler:!1};function An(e,n){if(e&&e.defaultProps){n=et({},n),e=e.defaultProps;for(var s in e)n[s]===void 0&&(n[s]=e[s]);return n}return n}function ac(e,n,s,l){n=e.memoizedState,s=s(l,n),s=s==null?n:et({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Sa={isMounted:function(e){return(e=e._reactInternals)?ei(e)===e:!1},enqueueSetState:function(e,n,s){e=e._reactInternals;var l=Ft(),u=Ir(e),d=Zn(l,u);d.payload=n,s!=null&&(d.callback=s),n=Ar(e,d,u),n!==null&&(bn(n,e,u,l),Mo(n,e,u))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var l=Ft(),u=Ir(e),d=Zn(l,u);d.tag=1,d.payload=n,s!=null&&(d.callback=s),n=Ar(e,d,u),n!==null&&(bn(n,e,u,l),Mo(n,e,u))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=Ft(),l=Ir(e),u=Zn(s,l);u.tag=2,n!=null&&(u.callback=n),n=Ar(e,u,l),n!==null&&(bn(n,e,l,s),Mo(n,e,l))}};function D0(e,n,s,l,u,d,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,x):n.prototype&&n.prototype.isPureReactComponent?!ks(s,l)||!ks(u,d):!0}function pd(e,n,s){var l=!1,u=Tr,d=n.contextType;return typeof d=="object"&&d!==null?d=mn(d):(u=qt(n)?Zr:Dt.current,l=n.contextTypes,d=(l=l!=null)?Mi(e,u):Tr),n=new n(s,d),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Sa,e.stateNode=n,n._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=d),n}function M0(e,n,s,l){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,l),n.state!==e&&Sa.enqueueReplaceState(n,n.state,null)}function lc(e,n,s,l){var u=e.stateNode;u.props=s,u.state=e.memoizedState,u.refs={},ru(e);var d=n.contextType;typeof d=="object"&&d!==null?u.context=mn(d):(d=qt(n)?Zr:Dt.current,u.context=Mi(e,d)),u.state=e.memoizedState,d=n.getDerivedStateFromProps,typeof d=="function"&&(ac(e,n,d,s),u.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(n=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),n!==u.state&&Sa.enqueueReplaceState(u,u.state,null),na(e,s,u,l),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function Fi(e,n){try{var s="",l=n;do s+=y2(l),l=l.return;while(l);var u=s}catch(d){u=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:n,stack:u,digest:null}}function Al(e,n,s){return{value:e,source:null,stack:s??null,digest:n??null}}function cc(e,n){try{console.error(n.value)}catch(s){setTimeout(function(){throw s})}}var Xg=typeof WeakMap=="function"?WeakMap:Map;function md(e,n,s){s=Zn(-1,s),s.tag=3,s.payload={element:null};var l=n.value;return s.callback=function(){aa||(aa=!0,yc=l),cc(e,n)},s}function wd(e,n,s){s=Zn(-1,s),s.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var u=n.value;s.payload=function(){return l(u)},s.callback=function(){cc(e,n)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(s.callback=function(){cc(e,n),typeof l!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var x=n.stack;this.componentDidCatch(n.value,{componentStack:x!==null?x:""})}),s}function P0(e,n,s){var l=e.pingCache;if(l===null){l=e.pingCache=new Xg;var u=new Set;l.set(n,u)}else u=l.get(n),u===void 0&&(u=new Set,l.set(n,u));u.has(s)||(u.add(s),e=ox.bind(null,e,n,s),n.then(e,e))}function B0(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function L0(e,n,s,l,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===n?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(n=Zn(-1,1),n.tag=2,Ar(s,n,1))),s.lanes|=1),e)}var Yg=er.ReactCurrentOwner,Kt=!1;function Lt(e,n,s,l){n.child=e===null?Yf(n,null,s,l):Bi(n,e.child,s,l)}function F0(e,n,s,l,u){s=s.render;var d=n.ref;return Oi(n,u),l=lu(e,n,s,l,d,u),s=cu(),e!==null&&!Kt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~u,$n(e,n,u)):(Ke&&s&&Qc(n),n.flags|=1,Lt(e,n,l,u),n.child)}function j0(e,n,s,l,u){if(e===null){var d=s.type;return typeof d=="function"&&!yu(d)&&d.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(n.tag=15,n.type=d,yd(e,n,d,l,u)):(e=Uo(s.type,null,l,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(d=e.child,!(e.lanes&u)){var x=d.memoizedProps;if(s=s.compare,s=s!==null?s:ks,s(x,l)&&e.ref===n.ref)return $n(e,n,u)}return n.flags|=1,e=Nr(d,l),e.ref=n.ref,e.return=n,n.child=e}function yd(e,n,s,l,u){if(e!==null){var d=e.memoizedProps;if(ks(d,l)&&e.ref===n.ref)if(Kt=!1,n.pendingProps=l=d,(e.lanes&u)!==0)e.flags&131072&&(Kt=!0);else return n.lanes=e.lanes,$n(e,n,u)}return uc(e,n,s,l,u)}function Ed(e,n,s){var l=n.pendingProps,u=l.children,d=e!==null?e.memoizedState:null;if(l.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Ii,tn),tn|=s;else{if(!(s&1073741824))return e=d!==null?d.baseLanes|s:s,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,ze(Ii,tn),tn|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=d!==null?d.baseLanes:s,ze(Ii,tn),tn|=l}else d!==null?(l=d.baseLanes|s,n.memoizedState=null):l=s,ze(Ii,tn),tn|=l;return Lt(e,n,u,s),n.child}function Cd(e,n){var s=n.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(n.flags|=512,n.flags|=2097152)}function uc(e,n,s,l,u){var d=qt(s)?Zr:Dt.current;return d=Mi(n,d),Oi(n,u),s=lu(e,n,s,l,d,u),l=cu(),e!==null&&!Kt?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~u,$n(e,n,u)):(Ke&&l&&Qc(n),n.flags|=1,Lt(e,n,s,u),n.child)}function U0(e,n,s,l,u){if(qt(s)){var d=!0;qo(n)}else d=!1;if(Oi(n,u),n.stateNode===null)Lo(e,n),pd(n,s,l),lc(n,s,l,u),l=!0;else if(e===null){var x=n.stateNode,w=n.memoizedProps;x.props=w;var y=x.context,p=s.contextType;typeof p=="object"&&p!==null?p=mn(p):(p=qt(s)?Zr:Dt.current,p=Mi(n,p));var N=s.getDerivedStateFromProps,S=typeof N=="function"||typeof x.getSnapshotBeforeUpdate=="function";S||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(w!==l||y!==p)&&M0(n,x,l,p),hr=!1;var O=n.memoizedState;x.state=O,na(n,l,x,u),y=n.memoizedState,w!==l||O!==y||Qt.current||hr?(typeof N=="function"&&(ac(n,s,N,l),y=n.memoizedState),(w=hr||D0(n,s,w,l,O,y,p))?(S||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(n.flags|=4194308)):(typeof x.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=y),x.props=l,x.state=y,x.context=p,l=w):(typeof x.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{x=n.stateNode,Kf(e,n),w=n.memoizedProps,p=n.type===n.elementType?w:An(n.type,w),x.props=p,S=n.pendingProps,O=x.context,y=s.contextType,typeof y=="object"&&y!==null?y=mn(y):(y=qt(s)?Zr:Dt.current,y=Mi(n,y));var B=s.getDerivedStateFromProps;(N=typeof B=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(w!==S||O!==y)&&M0(n,x,l,y),hr=!1,O=n.memoizedState,x.state=O,na(n,l,x,u);var Y=n.memoizedState;w!==S||O!==Y||Qt.current||hr?(typeof B=="function"&&(ac(n,s,B,l),Y=n.memoizedState),(p=hr||D0(n,s,p,l,O,Y,y)||!1)?(N||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(l,Y,y),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(l,Y,y)),typeof x.componentDidUpdate=="function"&&(n.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof x.componentDidUpdate!="function"||w===e.memoizedProps&&O===e.memoizedState||(n.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&O===e.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=Y),x.props=l,x.state=Y,x.context=y,l=p):(typeof x.componentDidUpdate!="function"||w===e.memoizedProps&&O===e.memoizedState||(n.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&O===e.memoizedState||(n.flags|=1024),l=!1)}return fc(e,n,s,l,d,u)}function fc(e,n,s,l,u,d){Cd(e,n);var x=(n.flags&128)!==0;if(!l&&!x)return u&&I0(n,s,!1),$n(e,n,d);l=n.stateNode,Yg.current=n;var w=x&&typeof s.getDerivedStateFromError!="function"?null:l.render();return n.flags|=1,e!==null&&x?(n.child=Bi(n,e.child,null,d),n.child=Bi(n,null,w,d)):Lt(e,n,w,d),n.memoizedState=l.state,u&&I0(n,s,!0),n.child}function vd(e){var n=e.stateNode;n.pendingContext?S0(e,n.pendingContext,n.pendingContext!==n.context):n.context&&S0(e,n.context,!1),iu(e,n.containerInfo)}function V0(e,n,s,l,u){return Pi(),$c(u),n.flags|=256,Lt(e,n,s,l),n.child}var dc={dehydrated:null,treeContext:null,retryLane:0};function hc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ad(e,n,s){var l=n.pendingProps,u=$e.current,d=!1,x=(n.flags&128)!==0,w;if((w=x)||(w=e!==null&&e.memoizedState===null?!1:(u&2)!==0),w?(d=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),ze($e,u&1),e===null)return sc(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(x=l.children,e=l.fallback,d?(l=n.mode,d=n.child,x={mode:"hidden",children:x},!(l&1)&&d!==null?(d.childLanes=0,d.pendingProps=x):d=ba(x,l,0,null),e=Yr(e,l,s,null),d.return=n,e.return=n,d.sibling=e,n.child=d,n.child.memoizedState=hc(s),n.memoizedState=dc,e):du(n,x));if(u=e.memoizedState,u!==null&&(w=u.dehydrated,w!==null))return Zg(e,n,x,l,w,u,s);if(d){d=l.fallback,x=n.mode,u=e.child,w=u.sibling;var y={mode:"hidden",children:l.children};return!(x&1)&&n.child!==u?(l=n.child,l.childLanes=0,l.pendingProps=y,n.deletions=null):(l=Nr(u,y),l.subtreeFlags=u.subtreeFlags&14680064),w!==null?d=Nr(w,d):(d=Yr(d,x,s,null),d.flags|=2),d.return=n,l.return=n,l.sibling=d,n.child=l,l=d,d=n.child,x=e.child.memoizedState,x=x===null?hc(s):{baseLanes:x.baseLanes|s,cachePool:null,transitions:x.transitions},d.memoizedState=x,d.childLanes=e.childLanes&~s,n.memoizedState=dc,l}return d=e.child,e=d.sibling,l=Nr(d,{mode:"visible",children:l.children}),!(n.mode&1)&&(l.lanes=s),l.return=n,l.sibling=null,e!==null&&(s=n.deletions,s===null?(n.deletions=[e],n.flags|=16):s.push(e)),n.child=l,n.memoizedState=null,l}function du(e,n){return n=ba({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function So(e,n,s,l){return l!==null&&$c(l),Bi(n,e.child,null,s),e=du(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Zg(e,n,s,l,u,d,x){if(s)return n.flags&256?(n.flags&=-257,l=Al(Error(te(422))),So(e,n,x,l)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(d=l.fallback,u=n.mode,l=ba({mode:"visible",children:l.children},u,0,null),d=Yr(d,u,x,null),d.flags|=2,l.return=n,d.return=n,l.sibling=d,n.child=l,n.mode&1&&Bi(n,e.child,null,x),n.child.memoizedState=hc(x),n.memoizedState=dc,d);if(!(n.mode&1))return So(e,n,x,null);if(u.data==="$!"){if(l=u.nextSibling&&u.nextSibling.dataset,l)var w=l.dgst;return l=w,d=Error(te(419)),l=Al(d,l,void 0),So(e,n,x,l)}if(w=(x&e.childLanes)!==0,Kt||w){if(l=Et,l!==null){switch(x&-x){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(l.suspendedLanes|x)?0:u,u!==0&&u!==d.retryLane&&(d.retryLane=u,qn(e,u),bn(l,e,u,-1))}return wu(),l=Al(Error(te(421))),So(e,n,x,l)}return u.data==="$?"?(n.flags|=128,n.child=e.child,n=ax.bind(null,e),u._reactRetry=n,null):(e=d.treeContext,nn=vr(u.nextSibling),rn=n,Ke=!0,In=null,e!==null&&(hn[gn++]=Xn,hn[gn++]=Yn,hn[gn++]=Kr,Xn=e.id,Yn=e.overflow,Kr=n),n=du(n,l.children),n.flags|=4096,n)}function W0(e,n,s){e.lanes|=n;var l=e.alternate;l!==null&&(l.lanes|=n),oc(e.return,n,s)}function Sl(e,n,s,l,u){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:u}:(d.isBackwards=n,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=s,d.tailMode=u)}function Sd(e,n,s){var l=n.pendingProps,u=l.revealOrder,d=l.tail;if(Lt(e,n,l.children,s),l=$e.current,l&2)l=l&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&W0(e,s,n);else if(e.tag===19)W0(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(ze($e,l),!(n.mode&1))n.memoizedState=null;else switch(u){case"forwards":for(s=n.child,u=null;s!==null;)e=s.alternate,e!==null&&ra(e)===null&&(u=s),s=s.sibling;s=u,s===null?(u=n.child,n.child=null):(u=s.sibling,s.sibling=null),Sl(n,!1,u,s,d);break;case"backwards":for(s=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&ra(e)===null){n.child=u;break}e=u.sibling,u.sibling=s,s=u,u=e}Sl(n,!0,s,null,d);break;case"together":Sl(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Lo(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function $n(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),qr|=n.lanes,!(s&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(te(153));if(n.child!==null){for(e=n.child,s=Nr(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=Nr(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Kg(e,n,s){switch(n.tag){case 3:vd(n),Pi();break;case 5:Qf(n);break;case 1:qt(n.type)&&qo(n);break;case 4:iu(n,n.stateNode.containerInfo);break;case 10:var l=n.type._context,u=n.memoizedProps.value;ze(ea,l._currentValue),l._currentValue=u;break;case 13:if(l=n.memoizedState,l!==null)return l.dehydrated!==null?(ze($e,$e.current&1),n.flags|=128,null):s&n.child.childLanes?Ad(e,n,s):(ze($e,$e.current&1),e=$n(e,n,s),e!==null?e.sibling:null);ze($e,$e.current&1);break;case 19:if(l=(s&n.childLanes)!==0,e.flags&128){if(l)return Sd(e,n,s);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ze($e,$e.current),l)break;return null;case 22:case 23:return n.lanes=0,Ed(e,n,s)}return $n(e,n,s)}var Id,gc,Nd,bd;Id=function(e,n){for(var s=n.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};gc=function(){};Nd=function(e,n,s,l){var u=e.memoizedProps;if(u!==l){e=n.stateNode,Gr(Un.current);var d=null;switch(s){case"input":u=Bl(e,u),l=Bl(e,l),d=[];break;case"select":u=et({},u,{value:void 0}),l=et({},l,{value:void 0}),d=[];break;case"textarea":u=jl(e,u),l=jl(e,l),d=[];break;default:typeof u.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=Ko)}Vl(s,l);var x;s=null;for(p in u)if(!l.hasOwnProperty(p)&&u.hasOwnProperty(p)&&u[p]!=null)if(p==="style"){var w=u[p];for(x in w)w.hasOwnProperty(x)&&(s||(s={}),s[x]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Is.hasOwnProperty(p)?d||(d=[]):(d=d||[]).push(p,null));for(p in l){var y=l[p];if(w=u!=null?u[p]:void 0,l.hasOwnProperty(p)&&y!==w&&(y!=null||w!=null))if(p==="style")if(w){for(x in w)!w.hasOwnProperty(x)||y&&y.hasOwnProperty(x)||(s||(s={}),s[x]="");for(x in y)y.hasOwnProperty(x)&&w[x]!==y[x]&&(s||(s={}),s[x]=y[x])}else s||(d||(d=[]),d.push(p,s)),s=y;else p==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,w=w?w.__html:void 0,y!=null&&w!==y&&(d=d||[]).push(p,y)):p==="children"?typeof y!="string"&&typeof y!="number"||(d=d||[]).push(p,""+y):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Is.hasOwnProperty(p)?(y!=null&&p==="onScroll"&&Ge("scroll",e),d||w===y||(d=[])):(d=d||[]).push(p,y))}s&&(d=d||[]).push("style",s);var p=d;(n.updateQueue=p)&&(n.flags|=4)}};bd=function(e,n,s,l){s!==l&&(n.flags|=4)};function us(e,n){if(!Ke)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ot(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(n)for(var u=e.child;u!==null;)s|=u.lanes|u.childLanes,l|=u.subtreeFlags&14680064,l|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)s|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=l,e.childLanes=s,n}function Qg(e,n,s){var l=n.pendingProps;switch(qc(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(n),null;case 1:return qt(n.type)&&Qo(),Ot(n),null;case 3:return l=n.stateNode,Li(),Ye(Qt),Ye(Dt),ou(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(vo(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,In!==null&&(vc(In),In=null))),gc(e,n),Ot(n),null;case 5:su(n);var u=Gr(Ls.current);if(s=n.type,e!==null&&n.stateNode!=null)Nd(e,n,s,l,u),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!l){if(n.stateNode===null)throw Error(te(166));return Ot(n),null}if(e=Gr(Un.current),vo(n)){l=n.stateNode,s=n.type;var d=n.memoizedProps;switch(l[Fn]=n,l[Ps]=d,e=(n.mode&1)!==0,s){case"dialog":Ge("cancel",l),Ge("close",l);break;case"iframe":case"object":case"embed":Ge("load",l);break;case"video":case"audio":for(u=0;u<xs.length;u++)Ge(xs[u],l);break;case"source":Ge("error",l);break;case"img":case"image":case"link":Ge("error",l),Ge("load",l);break;case"details":Ge("toggle",l);break;case"input":qu(l,d),Ge("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!d.multiple},Ge("invalid",l);break;case"textarea":Ju(l,d),Ge("invalid",l)}Vl(s,d),u=null;for(var x in d)if(d.hasOwnProperty(x)){var w=d[x];x==="children"?typeof w=="string"?l.textContent!==w&&(d.suppressHydrationWarning!==!0&&Co(l.textContent,w,e),u=["children",w]):typeof w=="number"&&l.textContent!==""+w&&(d.suppressHydrationWarning!==!0&&Co(l.textContent,w,e),u=["children",""+w]):Is.hasOwnProperty(x)&&w!=null&&x==="onScroll"&&Ge("scroll",l)}switch(s){case"input":ho(l),$u(l,d,!0);break;case"textarea":ho(l),e0(l);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(l.onclick=Ko)}l=u,n.updateQueue=l,l!==null&&(n.flags|=4)}else{x=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ef(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=x.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=x.createElement(s,{is:l.is}):(e=x.createElement(s),s==="select"&&(x=e,l.multiple?x.multiple=!0:l.size&&(x.size=l.size))):e=x.createElementNS(e,s),e[Fn]=n,e[Ps]=l,Id(e,n,!1,!1),n.stateNode=e;e:{switch(x=Wl(s,l),s){case"dialog":Ge("cancel",e),Ge("close",e),u=l;break;case"iframe":case"object":case"embed":Ge("load",e),u=l;break;case"video":case"audio":for(u=0;u<xs.length;u++)Ge(xs[u],e);u=l;break;case"source":Ge("error",e),u=l;break;case"img":case"image":case"link":Ge("error",e),Ge("load",e),u=l;break;case"details":Ge("toggle",e),u=l;break;case"input":qu(e,l),u=Bl(e,l),Ge("invalid",e);break;case"option":u=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},u=et({},l,{value:void 0}),Ge("invalid",e);break;case"textarea":Ju(e,l),u=jl(e,l),Ge("invalid",e);break;default:u=l}Vl(s,u),w=u;for(d in w)if(w.hasOwnProperty(d)){var y=w[d];d==="style"?rf(e,y):d==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&tf(e,y)):d==="children"?typeof y=="string"?(s!=="textarea"||y!=="")&&Ns(e,y):typeof y=="number"&&Ns(e,""+y):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Is.hasOwnProperty(d)?y!=null&&d==="onScroll"&&Ge("scroll",e):y!=null&&Bc(e,d,y,x))}switch(s){case"input":ho(e),$u(e,l,!1);break;case"textarea":ho(e),e0(e);break;case"option":l.value!=null&&e.setAttribute("value",""+_r(l.value));break;case"select":e.multiple=!!l.multiple,d=l.value,d!=null?bi(e,!!l.multiple,d,!1):l.defaultValue!=null&&bi(e,!!l.multiple,l.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=Ko)}switch(s){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Ot(n),null;case 6:if(e&&n.stateNode!=null)bd(e,n,e.memoizedProps,l);else{if(typeof l!="string"&&n.stateNode===null)throw Error(te(166));if(s=Gr(Ls.current),Gr(Un.current),vo(n)){if(l=n.stateNode,s=n.memoizedProps,l[Fn]=n,(d=l.nodeValue!==s)&&(e=rn,e!==null))switch(e.tag){case 3:Co(l.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Co(l.nodeValue,s,(e.mode&1)!==0)}d&&(n.flags|=4)}else l=(s.nodeType===9?s:s.ownerDocument).createTextNode(l),l[Fn]=n,n.stateNode=l}return Ot(n),null;case 13:if(Ye($e),l=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ke&&nn!==null&&n.mode&1&&!(n.flags&128))Gf(),Pi(),n.flags|=98560,d=!1;else if(d=vo(n),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(te(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(te(317));d[Fn]=n}else Pi(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Ot(n),d=!1}else In!==null&&(vc(In),In=null),d=!0;if(!d)return n.flags&65536?n:null}return n.flags&128?(n.lanes=s,n):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(n.child.flags|=8192,n.mode&1&&(e===null||$e.current&1?xt===0&&(xt=3):wu())),n.updateQueue!==null&&(n.flags|=4),Ot(n),null);case 4:return Li(),gc(e,n),e===null&&Ds(n.stateNode.containerInfo),Ot(n),null;case 10:return tu(n.type._context),Ot(n),null;case 17:return qt(n.type)&&Qo(),Ot(n),null;case 19:if(Ye($e),d=n.memoizedState,d===null)return Ot(n),null;if(l=(n.flags&128)!==0,x=d.rendering,x===null)if(l)us(d,!1);else{if(xt!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(x=ra(e),x!==null){for(n.flags|=128,us(d,!1),l=x.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),n.subtreeFlags=0,l=s,s=n.child;s!==null;)d=s,e=l,d.flags&=14680066,x=d.alternate,x===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=x.childLanes,d.lanes=x.lanes,d.child=x.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=x.memoizedProps,d.memoizedState=x.memoizedState,d.updateQueue=x.updateQueue,d.type=x.type,e=x.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return ze($e,$e.current&1|2),n.child}e=e.sibling}d.tail!==null&&lt()>ji&&(n.flags|=128,l=!0,us(d,!1),n.lanes=4194304)}else{if(!l)if(e=ra(x),e!==null){if(n.flags|=128,l=!0,s=e.updateQueue,s!==null&&(n.updateQueue=s,n.flags|=4),us(d,!0),d.tail===null&&d.tailMode==="hidden"&&!x.alternate&&!Ke)return Ot(n),null}else 2*lt()-d.renderingStartTime>ji&&s!==1073741824&&(n.flags|=128,l=!0,us(d,!1),n.lanes=4194304);d.isBackwards?(x.sibling=n.child,n.child=x):(s=d.last,s!==null?s.sibling=x:n.child=x,d.last=x)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=lt(),n.sibling=null,s=$e.current,ze($e,l?s&1|2:s&1),n):(Ot(n),null);case 22:case 23:return mu(),l=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(n.flags|=8192),l&&n.mode&1?tn&1073741824&&(Ot(n),n.subtreeFlags&6&&(n.flags|=8192)):Ot(n),null;case 24:return null;case 25:return null}throw Error(te(156,n.tag))}function qg(e,n){switch(qc(n),n.tag){case 1:return qt(n.type)&&Qo(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Li(),Ye(Qt),Ye(Dt),ou(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return su(n),null;case 13:if(Ye($e),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(te(340));Pi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ye($e),null;case 4:return Li(),null;case 10:return tu(n.type._context),null;case 22:case 23:return mu(),null;case 24:return null;default:return null}}var Io=!1,kt=!1,$g=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Si(e,n){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(l){st(e,n,l)}else s.current=null}function xc(e,n,s){try{s()}catch(l){st(e,n,l)}}var z0=!1;function Jg(e,n){if($l=Xo,e=kf(),Kc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var u=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var x=0,w=-1,y=-1,p=0,N=0,S=e,O=null;t:for(;;){for(var B;S!==s||u!==0&&S.nodeType!==3||(w=x+u),S!==d||l!==0&&S.nodeType!==3||(y=x+l),S.nodeType===3&&(x+=S.nodeValue.length),(B=S.firstChild)!==null;)O=S,S=B;for(;;){if(S===e)break t;if(O===s&&++p===u&&(w=x),O===d&&++N===l&&(y=x),(B=S.nextSibling)!==null)break;S=O,O=S.parentNode}S=B}s=w===-1||y===-1?null:{start:w,end:y}}else s=null}s=s||{start:0,end:0}}else s=null;for(Jl={focusedElem:e,selectionRange:s},Xo=!1,ue=n;ue!==null;)if(n=ue,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,ue=e;else for(;ue!==null;){n=ue;try{var Y=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Y!==null){var j=Y.memoizedProps,q=Y.memoizedState,R=n.stateNode,b=R.getSnapshotBeforeUpdate(n.elementType===n.type?j:An(n.type,j),q);R.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=n.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(L){st(n,n.return,L)}if(e=n.sibling,e!==null){e.return=n.return,ue=e;break}ue=n.return}return Y=z0,z0=!1,Y}function vs(e,n,s){var l=n.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var u=l=l.next;do{if((u.tag&e)===e){var d=u.destroy;u.destroy=void 0,d!==void 0&&xc(n,s,d)}u=u.next}while(u!==l)}}function Ia(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var l=s.create;s.destroy=l()}s=s.next}while(s!==n)}}function pc(e){var n=e.ref;if(n!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof n=="function"?n(e):n.current=e}}function _d(e){var n=e.alternate;n!==null&&(e.alternate=null,_d(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Fn],delete n[Ps],delete n[nc],delete n[Pg],delete n[Bg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Td(e){return e.tag===5||e.tag===3||e.tag===4}function H0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Td(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mc(e,n,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?s.nodeType===8?s.parentNode.insertBefore(e,n):s.insertBefore(e,n):(s.nodeType===8?(n=s.parentNode,n.insertBefore(e,s)):(n=s,n.appendChild(e)),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Ko));else if(l!==4&&(e=e.child,e!==null))for(mc(e,n,s),e=e.sibling;e!==null;)mc(e,n,s),e=e.sibling}function wc(e,n,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(wc(e,n,s),e=e.sibling;e!==null;)wc(e,n,s),e=e.sibling}var It=null,Sn=!1;function cr(e,n,s){for(s=s.child;s!==null;)Rd(e,n,s),s=s.sibling}function Rd(e,n,s){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(ma,s)}catch{}switch(s.tag){case 5:kt||Si(s,n);case 6:var l=It,u=Sn;It=null,cr(e,n,s),It=l,Sn=u,It!==null&&(Sn?(e=It,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):It.removeChild(s.stateNode));break;case 18:It!==null&&(Sn?(e=It,s=s.stateNode,e.nodeType===8?ml(e.parentNode,s):e.nodeType===1&&ml(e,s),Rs(e)):ml(It,s.stateNode));break;case 4:l=It,u=Sn,It=s.stateNode.containerInfo,Sn=!0,cr(e,n,s),It=l,Sn=u;break;case 0:case 11:case 14:case 15:if(!kt&&(l=s.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){u=l=l.next;do{var d=u,x=d.destroy;d=d.tag,x!==void 0&&(d&2||d&4)&&xc(s,n,x),u=u.next}while(u!==l)}cr(e,n,s);break;case 1:if(!kt&&(Si(s,n),l=s.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=s.memoizedProps,l.state=s.memoizedState,l.componentWillUnmount()}catch(w){st(s,n,w)}cr(e,n,s);break;case 21:cr(e,n,s);break;case 22:s.mode&1?(kt=(l=kt)||s.memoizedState!==null,cr(e,n,s),kt=l):cr(e,n,s);break;default:cr(e,n,s)}}function G0(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new $g),n.forEach(function(l){var u=lx.bind(null,e,l);s.has(l)||(s.add(l),l.then(u,u))})}}function vn(e,n){var s=n.deletions;if(s!==null)for(var l=0;l<s.length;l++){var u=s[l];try{var d=e,x=n,w=x;e:for(;w!==null;){switch(w.tag){case 5:It=w.stateNode,Sn=!1;break e;case 3:It=w.stateNode.containerInfo,Sn=!0;break e;case 4:It=w.stateNode.containerInfo,Sn=!0;break e}w=w.return}if(It===null)throw Error(te(160));Rd(d,x,u),It=null,Sn=!1;var y=u.alternate;y!==null&&(y.return=null),u.return=null}catch(p){st(u,n,p)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Od(n,e),n=n.sibling}function Od(e,n){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vn(n,e),Bn(e),l&4){try{vs(3,e,e.return),Ia(3,e)}catch(j){st(e,e.return,j)}try{vs(5,e,e.return)}catch(j){st(e,e.return,j)}}break;case 1:vn(n,e),Bn(e),l&512&&s!==null&&Si(s,s.return);break;case 5:if(vn(n,e),Bn(e),l&512&&s!==null&&Si(s,s.return),e.flags&32){var u=e.stateNode;try{Ns(u,"")}catch(j){st(e,e.return,j)}}if(l&4&&(u=e.stateNode,u!=null)){var d=e.memoizedProps,x=s!==null?s.memoizedProps:d,w=e.type,y=e.updateQueue;if(e.updateQueue=null,y!==null)try{w==="input"&&d.type==="radio"&&d.name!=null&&$1(u,d),Wl(w,x);var p=Wl(w,d);for(x=0;x<y.length;x+=2){var N=y[x],S=y[x+1];N==="style"?rf(u,S):N==="dangerouslySetInnerHTML"?tf(u,S):N==="children"?Ns(u,S):Bc(u,N,S,p)}switch(w){case"input":Ll(u,d);break;case"textarea":J1(u,d);break;case"select":var O=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!d.multiple;var B=d.value;B!=null?bi(u,!!d.multiple,B,!1):O!==!!d.multiple&&(d.defaultValue!=null?bi(u,!!d.multiple,d.defaultValue,!0):bi(u,!!d.multiple,d.multiple?[]:"",!1))}u[Ps]=d}catch(j){st(e,e.return,j)}}break;case 6:if(vn(n,e),Bn(e),l&4){if(e.stateNode===null)throw Error(te(162));u=e.stateNode,d=e.memoizedProps;try{u.nodeValue=d}catch(j){st(e,e.return,j)}}break;case 3:if(vn(n,e),Bn(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Rs(n.containerInfo)}catch(j){st(e,e.return,j)}break;case 4:vn(n,e),Bn(e);break;case 13:vn(n,e),Bn(e),u=e.child,u.flags&8192&&(d=u.memoizedState!==null,u.stateNode.isHidden=d,!d||u.alternate!==null&&u.alternate.memoizedState!==null||(xu=lt())),l&4&&G0(e);break;case 22:if(N=s!==null&&s.memoizedState!==null,e.mode&1?(kt=(p=kt)||N,vn(n,e),kt=p):vn(n,e),Bn(e),l&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!N&&e.mode&1)for(ue=e,N=e.child;N!==null;){for(S=ue=N;ue!==null;){switch(O=ue,B=O.child,O.tag){case 0:case 11:case 14:case 15:vs(4,O,O.return);break;case 1:Si(O,O.return);var Y=O.stateNode;if(typeof Y.componentWillUnmount=="function"){l=O,s=O.return;try{n=l,Y.props=n.memoizedProps,Y.state=n.memoizedState,Y.componentWillUnmount()}catch(j){st(l,s,j)}}break;case 5:Si(O,O.return);break;case 22:if(O.memoizedState!==null){Y0(S);continue}}B!==null?(B.return=O,ue=B):Y0(S)}N=N.sibling}e:for(N=null,S=e;;){if(S.tag===5){if(N===null){N=S;try{u=S.stateNode,p?(d=u.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(w=S.stateNode,y=S.memoizedProps.style,x=y!=null&&y.hasOwnProperty("display")?y.display:null,w.style.display=nf("display",x))}catch(j){st(e,e.return,j)}}}else if(S.tag===6){if(N===null)try{S.stateNode.nodeValue=p?"":S.memoizedProps}catch(j){st(e,e.return,j)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===e)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===e)break e;for(;S.sibling===null;){if(S.return===null||S.return===e)break e;N===S&&(N=null),S=S.return}N===S&&(N=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:vn(n,e),Bn(e),l&4&&G0(e);break;case 21:break;default:vn(n,e),Bn(e)}}function Bn(e){var n=e.flags;if(n&2){try{e:{for(var s=e.return;s!==null;){if(Td(s)){var l=s;break e}s=s.return}throw Error(te(160))}switch(l.tag){case 5:var u=l.stateNode;l.flags&32&&(Ns(u,""),l.flags&=-33);var d=H0(e);wc(e,d,u);break;case 3:case 4:var x=l.stateNode.containerInfo,w=H0(e);mc(e,w,x);break;default:throw Error(te(161))}}catch(y){st(e,e.return,y)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function ex(e,n,s){ue=e,kd(e)}function kd(e,n,s){for(var l=(e.mode&1)!==0;ue!==null;){var u=ue,d=u.child;if(u.tag===22&&l){var x=u.memoizedState!==null||Io;if(!x){var w=u.alternate,y=w!==null&&w.memoizedState!==null||kt;w=Io;var p=kt;if(Io=x,(kt=y)&&!p)for(ue=u;ue!==null;)x=ue,y=x.child,x.tag===22&&x.memoizedState!==null?Z0(u):y!==null?(y.return=x,ue=y):Z0(u);for(;d!==null;)ue=d,kd(d),d=d.sibling;ue=u,Io=w,kt=p}X0(e)}else u.subtreeFlags&8772&&d!==null?(d.return=u,ue=d):X0(e)}}function X0(e){for(;ue!==null;){var n=ue;if(n.flags&8772){var s=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:kt||Ia(5,n);break;case 1:var l=n.stateNode;if(n.flags&4&&!kt)if(s===null)l.componentDidMount();else{var u=n.elementType===n.type?s.memoizedProps:An(n.type,s.memoizedProps);l.componentDidUpdate(u,s.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var d=n.updateQueue;d!==null&&R0(n,d,l);break;case 3:var x=n.updateQueue;if(x!==null){if(s=null,n.child!==null)switch(n.child.tag){case 5:s=n.child.stateNode;break;case 1:s=n.child.stateNode}R0(n,x,s)}break;case 5:var w=n.stateNode;if(s===null&&n.flags&4){s=w;var y=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&s.focus();break;case"img":y.src&&(s.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var p=n.alternate;if(p!==null){var N=p.memoizedState;if(N!==null){var S=N.dehydrated;S!==null&&Rs(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}kt||n.flags&512&&pc(n)}catch(O){st(n,n.return,O)}}if(n===e){ue=null;break}if(s=n.sibling,s!==null){s.return=n.return,ue=s;break}ue=n.return}}function Y0(e){for(;ue!==null;){var n=ue;if(n===e){ue=null;break}var s=n.sibling;if(s!==null){s.return=n.return,ue=s;break}ue=n.return}}function Z0(e){for(;ue!==null;){var n=ue;try{switch(n.tag){case 0:case 11:case 15:var s=n.return;try{Ia(4,n)}catch(y){st(n,s,y)}break;case 1:var l=n.stateNode;if(typeof l.componentDidMount=="function"){var u=n.return;try{l.componentDidMount()}catch(y){st(n,u,y)}}var d=n.return;try{pc(n)}catch(y){st(n,d,y)}break;case 5:var x=n.return;try{pc(n)}catch(y){st(n,x,y)}}}catch(y){st(n,n.return,y)}if(n===e){ue=null;break}var w=n.sibling;if(w!==null){w.return=n.return,ue=w;break}ue=n.return}}var tx=Math.ceil,oa=er.ReactCurrentDispatcher,hu=er.ReactCurrentOwner,pn=er.ReactCurrentBatchConfig,Re=0,Et=null,ut=null,Nt=0,tn=0,Ii=Or(0),xt=0,Vs=null,qr=0,Na=0,gu=0,As=null,Yt=null,xu=0,ji=1/0,Hn=null,aa=!1,yc=null,Sr=null,No=!1,mr=null,la=0,Ss=0,Ec=null,Fo=-1,jo=0;function Ft(){return Re&6?lt():Fo!==-1?Fo:Fo=lt()}function Ir(e){return e.mode&1?Re&2&&Nt!==0?Nt&-Nt:Fg.transition!==null?(jo===0&&(jo=pf()),jo):(e=Be,e!==0||(e=window.event,e=e===void 0?16:Af(e.type)),e):1}function bn(e,n,s,l){if(50<Ss)throw Ss=0,Ec=null,Error(te(185));Gs(e,s,l),(!(Re&2)||e!==Et)&&(e===Et&&(!(Re&2)&&(Na|=s),xt===4&&xr(e,Nt)),$t(e,l),s===1&&Re===0&&!(n.mode&1)&&(ji=lt()+500,va&&kr()))}function $t(e,n){var s=e.callbackNode;F2(e,n);var l=Go(e,e===Et?Nt:0);if(l===0)s!==null&&r0(s),e.callbackNode=null,e.callbackPriority=0;else if(n=l&-l,e.callbackPriority!==n){if(s!=null&&r0(s),n===1)e.tag===0?Lg(K0.bind(null,e)):Wf(K0.bind(null,e)),Dg(function(){!(Re&6)&&kr()}),s=null;else{switch(mf(l)){case 1:s=Vc;break;case 4:s=gf;break;case 16:s=Ho;break;case 536870912:s=xf;break;default:s=Ho}s=Ud(s,Dd.bind(null,e))}e.callbackPriority=n,e.callbackNode=s}}function Dd(e,n){if(Fo=-1,jo=0,Re&6)throw Error(te(327));var s=e.callbackNode;if(ki()&&e.callbackNode!==s)return null;var l=Go(e,e===Et?Nt:0);if(l===0)return null;if(l&30||l&e.expiredLanes||n)n=ca(e,l);else{n=l;var u=Re;Re|=2;var d=Pd();(Et!==e||Nt!==n)&&(Hn=null,ji=lt()+500,Xr(e,n));do try{ix();break}catch(w){Md(e,w)}while(!0);eu(),oa.current=d,Re=u,ut!==null?n=0:(Et=null,Nt=0,n=xt)}if(n!==0){if(n===2&&(u=Yl(e),u!==0&&(l=u,n=Cc(e,u))),n===1)throw s=Vs,Xr(e,0),xr(e,l),$t(e,lt()),s;if(n===6)xr(e,l);else{if(u=e.current.alternate,!(l&30)&&!nx(u)&&(n=ca(e,l),n===2&&(d=Yl(e),d!==0&&(l=d,n=Cc(e,d))),n===1))throw s=Vs,Xr(e,0),xr(e,l),$t(e,lt()),s;switch(e.finishedWork=u,e.finishedLanes=l,n){case 0:case 1:throw Error(te(345));case 2:Wr(e,Yt,Hn);break;case 3:if(xr(e,l),(l&130023424)===l&&(n=xu+500-lt(),10<n)){if(Go(e,0)!==0)break;if(u=e.suspendedLanes,(u&l)!==l){Ft(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=tc(Wr.bind(null,e,Yt,Hn),n);break}Wr(e,Yt,Hn);break;case 4:if(xr(e,l),(l&4194240)===l)break;for(n=e.eventTimes,u=-1;0<l;){var x=31-Nn(l);d=1<<x,x=n[x],x>u&&(u=x),l&=~d}if(l=u,l=lt()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*tx(l/1960))-l,10<l){e.timeoutHandle=tc(Wr.bind(null,e,Yt,Hn),l);break}Wr(e,Yt,Hn);break;case 5:Wr(e,Yt,Hn);break;default:throw Error(te(329))}}}return $t(e,lt()),e.callbackNode===s?Dd.bind(null,e):null}function Cc(e,n){var s=As;return e.current.memoizedState.isDehydrated&&(Xr(e,n).flags|=256),e=ca(e,n),e!==2&&(n=Yt,Yt=s,n!==null&&vc(n)),e}function vc(e){Yt===null?Yt=e:Yt.push.apply(Yt,e)}function nx(e){for(var n=e;;){if(n.flags&16384){var s=n.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var l=0;l<s.length;l++){var u=s[l],d=u.getSnapshot;u=u.value;try{if(!_n(d(),u))return!1}catch{return!1}}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function xr(e,n){for(n&=~gu,n&=~Na,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var s=31-Nn(n),l=1<<s;e[s]=-1,n&=~l}}function K0(e){if(Re&6)throw Error(te(327));ki();var n=Go(e,0);if(!(n&1))return $t(e,lt()),null;var s=ca(e,n);if(e.tag!==0&&s===2){var l=Yl(e);l!==0&&(n=l,s=Cc(e,l))}if(s===1)throw s=Vs,Xr(e,0),xr(e,n),$t(e,lt()),s;if(s===6)throw Error(te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Wr(e,Yt,Hn),$t(e,lt()),null}function pu(e,n){var s=Re;Re|=1;try{return e(n)}finally{Re=s,Re===0&&(ji=lt()+500,va&&kr())}}function $r(e){mr!==null&&mr.tag===0&&!(Re&6)&&ki();var n=Re;Re|=1;var s=pn.transition,l=Be;try{if(pn.transition=null,Be=1,e)return e()}finally{Be=l,pn.transition=s,Re=n,!(Re&6)&&kr()}}function mu(){tn=Ii.current,Ye(Ii)}function Xr(e,n){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,kg(s)),ut!==null)for(s=ut.return;s!==null;){var l=s;switch(qc(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Qo();break;case 3:Li(),Ye(Qt),Ye(Dt),ou();break;case 5:su(l);break;case 4:Li();break;case 13:Ye($e);break;case 19:Ye($e);break;case 10:tu(l.type._context);break;case 22:case 23:mu()}s=s.return}if(Et=e,ut=e=Nr(e.current,null),Nt=tn=n,xt=0,Vs=null,gu=Na=qr=0,Yt=As=null,Hr!==null){for(n=0;n<Hr.length;n++)if(s=Hr[n],l=s.interleaved,l!==null){s.interleaved=null;var u=l.next,d=s.pending;if(d!==null){var x=d.next;d.next=u,l.next=x}s.pending=l}Hr=null}return e}function Md(e,n){do{var s=ut;try{if(eu(),Po.current=sa,ia){for(var l=Je.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}ia=!1}if(Qr=0,yt=gt=Je=null,Cs=!1,Fs=0,hu.current=null,s===null||s.return===null){xt=1,Vs=n,ut=null;break}e:{var d=e,x=s.return,w=s,y=n;if(n=Nt,w.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var p=y,N=w,S=N.tag;if(!(N.mode&1)&&(S===0||S===11||S===15)){var O=N.alternate;O?(N.updateQueue=O.updateQueue,N.memoizedState=O.memoizedState,N.lanes=O.lanes):(N.updateQueue=null,N.memoizedState=null)}var B=B0(x);if(B!==null){B.flags&=-257,L0(B,x,w,d,n),B.mode&1&&P0(d,p,n),n=B,y=p;var Y=n.updateQueue;if(Y===null){var j=new Set;j.add(y),n.updateQueue=j}else Y.add(y);break e}else{if(!(n&1)){P0(d,p,n),wu();break e}y=Error(te(426))}}else if(Ke&&w.mode&1){var q=B0(x);if(q!==null){!(q.flags&65536)&&(q.flags|=256),L0(q,x,w,d,n),$c(Fi(y,w));break e}}d=y=Fi(y,w),xt!==4&&(xt=2),As===null?As=[d]:As.push(d),d=x;do{switch(d.tag){case 3:d.flags|=65536,n&=-n,d.lanes|=n;var R=md(d,y,n);T0(d,R);break e;case 1:w=y;var b=d.type,T=d.stateNode;if(!(d.flags&128)&&(typeof b.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Sr===null||!Sr.has(T)))){d.flags|=65536,n&=-n,d.lanes|=n;var L=wd(d,w,n);T0(d,L);break e}}d=d.return}while(d!==null)}Ld(s)}catch(Z){n=Z,ut===s&&s!==null&&(ut=s=s.return);continue}break}while(!0)}function Pd(){var e=oa.current;return oa.current=sa,e===null?sa:e}function wu(){(xt===0||xt===3||xt===2)&&(xt=4),Et===null||!(qr&268435455)&&!(Na&268435455)||xr(Et,Nt)}function ca(e,n){var s=Re;Re|=2;var l=Pd();(Et!==e||Nt!==n)&&(Hn=null,Xr(e,n));do try{rx();break}catch(u){Md(e,u)}while(!0);if(eu(),Re=s,oa.current=l,ut!==null)throw Error(te(261));return Et=null,Nt=0,xt}function rx(){for(;ut!==null;)Bd(ut)}function ix(){for(;ut!==null&&!T2();)Bd(ut)}function Bd(e){var n=jd(e.alternate,e,tn);e.memoizedProps=e.pendingProps,n===null?Ld(e):ut=n,hu.current=null}function Ld(e){var n=e;do{var s=n.alternate;if(e=n.return,n.flags&32768){if(s=qg(s,n),s!==null){s.flags&=32767,ut=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xt=6,ut=null;return}}else if(s=Qg(s,n,tn),s!==null){ut=s;return}if(n=n.sibling,n!==null){ut=n;return}ut=n=e}while(n!==null);xt===0&&(xt=5)}function Wr(e,n,s){var l=Be,u=pn.transition;try{pn.transition=null,Be=1,sx(e,n,s,l)}finally{pn.transition=u,Be=l}return null}function sx(e,n,s,l){do ki();while(mr!==null);if(Re&6)throw Error(te(327));s=e.finishedWork;var u=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0;var d=s.lanes|s.childLanes;if(j2(e,d),e===Et&&(ut=Et=null,Nt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||No||(No=!0,Ud(Ho,function(){return ki(),null})),d=(s.flags&15990)!==0,s.subtreeFlags&15990||d){d=pn.transition,pn.transition=null;var x=Be;Be=1;var w=Re;Re|=4,hu.current=null,Jg(e,s),Od(s,e),Ig(Jl),Xo=!!$l,Jl=$l=null,e.current=s,ex(s),R2(),Re=w,Be=x,pn.transition=d}else e.current=s;if(No&&(No=!1,mr=e,la=u),d=e.pendingLanes,d===0&&(Sr=null),D2(s.stateNode),$t(e,lt()),n!==null)for(l=e.onRecoverableError,s=0;s<n.length;s++)u=n[s],l(u.value,{componentStack:u.stack,digest:u.digest});if(aa)throw aa=!1,e=yc,yc=null,e;return la&1&&e.tag!==0&&ki(),d=e.pendingLanes,d&1?e===Ec?Ss++:(Ss=0,Ec=e):Ss=0,kr(),null}function ki(){if(mr!==null){var e=mf(la),n=pn.transition,s=Be;try{if(pn.transition=null,Be=16>e?16:e,mr===null)var l=!1;else{if(e=mr,mr=null,la=0,Re&6)throw Error(te(331));var u=Re;for(Re|=4,ue=e.current;ue!==null;){var d=ue,x=d.child;if(ue.flags&16){var w=d.deletions;if(w!==null){for(var y=0;y<w.length;y++){var p=w[y];for(ue=p;ue!==null;){var N=ue;switch(N.tag){case 0:case 11:case 15:vs(8,N,d)}var S=N.child;if(S!==null)S.return=N,ue=S;else for(;ue!==null;){N=ue;var O=N.sibling,B=N.return;if(_d(N),N===p){ue=null;break}if(O!==null){O.return=B,ue=O;break}ue=B}}}var Y=d.alternate;if(Y!==null){var j=Y.child;if(j!==null){Y.child=null;do{var q=j.sibling;j.sibling=null,j=q}while(j!==null)}}ue=d}}if(d.subtreeFlags&2064&&x!==null)x.return=d,ue=x;else e:for(;ue!==null;){if(d=ue,d.flags&2048)switch(d.tag){case 0:case 11:case 15:vs(9,d,d.return)}var R=d.sibling;if(R!==null){R.return=d.return,ue=R;break e}ue=d.return}}var b=e.current;for(ue=b;ue!==null;){x=ue;var T=x.child;if(x.subtreeFlags&2064&&T!==null)T.return=x,ue=T;else e:for(x=b;ue!==null;){if(w=ue,w.flags&2048)try{switch(w.tag){case 0:case 11:case 15:Ia(9,w)}}catch(Z){st(w,w.return,Z)}if(w===x){ue=null;break e}var L=w.sibling;if(L!==null){L.return=w.return,ue=L;break e}ue=w.return}}if(Re=u,kr(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(ma,e)}catch{}l=!0}return l}finally{Be=s,pn.transition=n}}return!1}function Q0(e,n,s){n=Fi(s,n),n=md(e,n,1),e=Ar(e,n,1),n=Ft(),e!==null&&(Gs(e,1,n),$t(e,n))}function st(e,n,s){if(e.tag===3)Q0(e,e,s);else for(;n!==null;){if(n.tag===3){Q0(n,e,s);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Sr===null||!Sr.has(l))){e=Fi(s,e),e=wd(n,e,1),n=Ar(n,e,1),e=Ft(),n!==null&&(Gs(n,1,e),$t(n,e));break}}n=n.return}}function ox(e,n,s){var l=e.pingCache;l!==null&&l.delete(n),n=Ft(),e.pingedLanes|=e.suspendedLanes&s,Et===e&&(Nt&s)===s&&(xt===4||xt===3&&(Nt&130023424)===Nt&&500>lt()-xu?Xr(e,0):gu|=s),$t(e,n)}function Fd(e,n){n===0&&(e.mode&1?(n=po,po<<=1,!(po&130023424)&&(po=4194304)):n=1);var s=Ft();e=qn(e,n),e!==null&&(Gs(e,n,s),$t(e,s))}function ax(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Fd(e,s)}function lx(e,n){var s=0;switch(e.tag){case 13:var l=e.stateNode,u=e.memoizedState;u!==null&&(s=u.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(te(314))}l!==null&&l.delete(n),Fd(e,s)}var jd;jd=function(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps||Qt.current)Kt=!0;else{if(!(e.lanes&s)&&!(n.flags&128))return Kt=!1,Kg(e,n,s);Kt=!!(e.flags&131072)}else Kt=!1,Ke&&n.flags&1048576&&zf(n,Jo,n.index);switch(n.lanes=0,n.tag){case 2:var l=n.type;Lo(e,n),e=n.pendingProps;var u=Mi(n,Dt.current);Oi(n,s),u=lu(null,n,l,e,u,s);var d=cu();return n.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,qt(l)?(d=!0,qo(n)):d=!1,n.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,ru(n),u.updater=Sa,n.stateNode=u,u._reactInternals=n,lc(n,l,e,s),n=fc(null,n,l,!0,d,s)):(n.tag=0,Ke&&d&&Qc(n),Lt(null,n,u,s),n=n.child),n;case 16:l=n.elementType;e:{switch(Lo(e,n),e=n.pendingProps,u=l._init,l=u(l._payload),n.type=l,u=n.tag=ux(l),e=An(l,e),u){case 0:n=uc(null,n,l,e,s);break e;case 1:n=U0(null,n,l,e,s);break e;case 11:n=F0(null,n,l,e,s);break e;case 14:n=j0(null,n,l,An(l.type,e),s);break e}throw Error(te(306,l,""))}return n;case 0:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:An(l,u),uc(e,n,l,u,s);case 1:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:An(l,u),U0(e,n,l,u,s);case 3:e:{if(vd(n),e===null)throw Error(te(387));l=n.pendingProps,d=n.memoizedState,u=d.element,Kf(e,n),na(n,l,null,s);var x=n.memoizedState;if(l=x.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},n.updateQueue.baseState=d,n.memoizedState=d,n.flags&256){u=Fi(Error(te(423)),n),n=V0(e,n,l,s,u);break e}else if(l!==u){u=Fi(Error(te(424)),n),n=V0(e,n,l,s,u);break e}else for(nn=vr(n.stateNode.containerInfo.firstChild),rn=n,Ke=!0,In=null,s=Yf(n,null,l,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Pi(),l===u){n=$n(e,n,s);break e}Lt(e,n,l,s)}n=n.child}return n;case 5:return Qf(n),e===null&&sc(n),l=n.type,u=n.pendingProps,d=e!==null?e.memoizedProps:null,x=u.children,ec(l,u)?x=null:d!==null&&ec(l,d)&&(n.flags|=32),Cd(e,n),Lt(e,n,x,s),n.child;case 6:return e===null&&sc(n),null;case 13:return Ad(e,n,s);case 4:return iu(n,n.stateNode.containerInfo),l=n.pendingProps,e===null?n.child=Bi(n,null,l,s):Lt(e,n,l,s),n.child;case 11:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:An(l,u),F0(e,n,l,u,s);case 7:return Lt(e,n,n.pendingProps,s),n.child;case 8:return Lt(e,n,n.pendingProps.children,s),n.child;case 12:return Lt(e,n,n.pendingProps.children,s),n.child;case 10:e:{if(l=n.type._context,u=n.pendingProps,d=n.memoizedProps,x=u.value,ze(ea,l._currentValue),l._currentValue=x,d!==null)if(_n(d.value,x)){if(d.children===u.children&&!Qt.current){n=$n(e,n,s);break e}}else for(d=n.child,d!==null&&(d.return=n);d!==null;){var w=d.dependencies;if(w!==null){x=d.child;for(var y=w.firstContext;y!==null;){if(y.context===l){if(d.tag===1){y=Zn(-1,s&-s),y.tag=2;var p=d.updateQueue;if(p!==null){p=p.shared;var N=p.pending;N===null?y.next=y:(y.next=N.next,N.next=y),p.pending=y}}d.lanes|=s,y=d.alternate,y!==null&&(y.lanes|=s),oc(d.return,s,n),w.lanes|=s;break}y=y.next}}else if(d.tag===10)x=d.type===n.type?null:d.child;else if(d.tag===18){if(x=d.return,x===null)throw Error(te(341));x.lanes|=s,w=x.alternate,w!==null&&(w.lanes|=s),oc(x,s,n),x=d.sibling}else x=d.child;if(x!==null)x.return=d;else for(x=d;x!==null;){if(x===n){x=null;break}if(d=x.sibling,d!==null){d.return=x.return,x=d;break}x=x.return}d=x}Lt(e,n,u.children,s),n=n.child}return n;case 9:return u=n.type,l=n.pendingProps.children,Oi(n,s),u=mn(u),l=l(u),n.flags|=1,Lt(e,n,l,s),n.child;case 14:return l=n.type,u=An(l,n.pendingProps),u=An(l.type,u),j0(e,n,l,u,s);case 15:return yd(e,n,n.type,n.pendingProps,s);case 17:return l=n.type,u=n.pendingProps,u=n.elementType===l?u:An(l,u),Lo(e,n),n.tag=1,qt(l)?(e=!0,qo(n)):e=!1,Oi(n,s),pd(n,l,u),lc(n,l,u,s),fc(null,n,l,!0,e,s);case 19:return Sd(e,n,s);case 22:return Ed(e,n,s)}throw Error(te(156,n.tag))};function Ud(e,n){return hf(e,n)}function cx(e,n,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(e,n,s,l){return new cx(e,n,s,l)}function yu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ux(e){if(typeof e=="function")return yu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Fc)return 11;if(e===jc)return 14}return 2}function Nr(e,n){var s=e.alternate;return s===null?(s=xn(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Uo(e,n,s,l,u,d){var x=2;if(l=e,typeof e=="function")yu(e)&&(x=1);else if(typeof e=="string")x=5;else e:switch(e){case xi:return Yr(s.children,u,d,n);case Lc:x=8,u|=8;break;case kl:return e=xn(12,s,n,u|2),e.elementType=kl,e.lanes=d,e;case Dl:return e=xn(13,s,n,u),e.elementType=Dl,e.lanes=d,e;case Ml:return e=xn(19,s,n,u),e.elementType=Ml,e.lanes=d,e;case K1:return ba(s,u,d,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Y1:x=10;break e;case Z1:x=9;break e;case Fc:x=11;break e;case jc:x=14;break e;case dr:x=16,l=null;break e}throw Error(te(130,e==null?e:typeof e,""))}return n=xn(x,s,n,u),n.elementType=e,n.type=l,n.lanes=d,n}function Yr(e,n,s,l){return e=xn(7,e,l,n),e.lanes=s,e}function ba(e,n,s,l){return e=xn(22,e,l,n),e.elementType=K1,e.lanes=s,e.stateNode={isHidden:!1},e}function Il(e,n,s){return e=xn(6,e,null,n),e.lanes=s,e}function Nl(e,n,s){return n=xn(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function fx(e,n,s,l,u){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ol(0),this.expirationTimes=ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ol(0),this.identifierPrefix=l,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function Eu(e,n,s,l,u,d,x,w,y){return e=new fx(e,n,s,w,y),n===1?(n=1,d===!0&&(n|=8)):n=0,d=xn(3,null,null,n),e.current=d,d.stateNode=e,d.memoizedState={element:l,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ru(d),e}function dx(e,n,s){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gi,key:l==null?null:""+l,children:e,containerInfo:n,implementation:s}}function Vd(e){if(!e)return Tr;e=e._reactInternals;e:{if(ei(e)!==e||e.tag!==1)throw Error(te(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(qt(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(te(171))}if(e.tag===1){var s=e.type;if(qt(s))return Vf(e,s,n)}return n}function Wd(e,n,s,l,u,d,x,w,y){return e=Eu(s,l,!0,e,u,d,x,w,y),e.context=Vd(null),s=e.current,l=Ft(),u=Ir(s),d=Zn(l,u),d.callback=n??null,Ar(s,d,u),e.current.lanes=u,Gs(e,u,l),$t(e,l),e}function _a(e,n,s,l){var u=n.current,d=Ft(),x=Ir(u);return s=Vd(s),n.context===null?n.context=s:n.pendingContext=s,n=Zn(d,x),n.payload={element:e},l=l===void 0?null:l,l!==null&&(n.callback=l),e=Ar(u,n,x),e!==null&&(bn(e,u,x,d),Mo(e,u,x)),x}function ua(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function q0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Cu(e,n){q0(e,n),(e=e.alternate)&&q0(e,n)}function hx(){return null}var zd=typeof reportError=="function"?reportError:function(e){console.error(e)};function vu(e){this._internalRoot=e}Ta.prototype.render=vu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(te(409));_a(e,n,null,null)};Ta.prototype.unmount=vu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;$r(function(){_a(null,e,null,null)}),n[Qn]=null}};function Ta(e){this._internalRoot=e}Ta.prototype.unstable_scheduleHydration=function(e){if(e){var n=Ef();e={blockedOn:null,target:e,priority:n};for(var s=0;s<gr.length&&n!==0&&n<gr[s].priority;s++);gr.splice(s,0,e),s===0&&vf(e)}};function Au(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ra(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $0(){}function gx(e,n,s,l,u){if(u){if(typeof l=="function"){var d=l;l=function(){var p=ua(x);d.call(p)}}var x=Wd(n,l,e,0,null,!1,!1,"",$0);return e._reactRootContainer=x,e[Qn]=x.current,Ds(e.nodeType===8?e.parentNode:e),$r(),x}for(;u=e.lastChild;)e.removeChild(u);if(typeof l=="function"){var w=l;l=function(){var p=ua(y);w.call(p)}}var y=Eu(e,0,!1,null,null,!1,!1,"",$0);return e._reactRootContainer=y,e[Qn]=y.current,Ds(e.nodeType===8?e.parentNode:e),$r(function(){_a(n,y,s,l)}),y}function Oa(e,n,s,l,u){var d=s._reactRootContainer;if(d){var x=d;if(typeof u=="function"){var w=u;u=function(){var y=ua(x);w.call(y)}}_a(n,x,e,u)}else x=gx(s,n,e,u,l);return ua(x)}wf=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var s=gs(n.pendingLanes);s!==0&&(Wc(n,s|1),$t(n,lt()),!(Re&6)&&(ji=lt()+500,kr()))}break;case 13:$r(function(){var l=qn(e,1);if(l!==null){var u=Ft();bn(l,e,1,u)}}),Cu(e,1)}};zc=function(e){if(e.tag===13){var n=qn(e,134217728);if(n!==null){var s=Ft();bn(n,e,134217728,s)}Cu(e,134217728)}};yf=function(e){if(e.tag===13){var n=Ir(e),s=qn(e,n);if(s!==null){var l=Ft();bn(s,e,n,l)}Cu(e,n)}};Ef=function(){return Be};Cf=function(e,n){var s=Be;try{return Be=e,n()}finally{Be=s}};Hl=function(e,n,s){switch(n){case"input":if(Ll(e,s),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<s.length;n++){var l=s[n];if(l!==e&&l.form===e.form){var u=Ca(l);if(!u)throw Error(te(90));q1(l),Ll(l,u)}}}break;case"textarea":J1(e,s);break;case"select":n=s.value,n!=null&&bi(e,!!s.multiple,n,!1)}};af=pu;lf=$r;var xx={usingClientEntryPoint:!1,Events:[Ys,yi,Ca,sf,of,pu]},fs={findFiberByHostInstance:zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},px={bundleType:fs.bundleType,version:fs.version,rendererPackageName:fs.rendererPackageName,rendererConfig:fs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ff(e),e===null?null:e.stateNode},findFiberByHostInstance:fs.findFiberByHostInstance||hx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bo.isDisabled&&bo.supportsFiber)try{ma=bo.inject(px),jn=bo}catch{}}on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xx;on.createPortal=function(e,n){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Au(n))throw Error(te(200));return dx(e,n,null,s)};on.createRoot=function(e,n){if(!Au(e))throw Error(te(299));var s=!1,l="",u=zd;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),n=Eu(e,1,!1,null,null,s,!1,l,u),e[Qn]=n.current,Ds(e.nodeType===8?e.parentNode:e),new vu(n)};on.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=ff(n),e=e===null?null:e.stateNode,e};on.flushSync=function(e){return $r(e)};on.hydrate=function(e,n,s){if(!Ra(n))throw Error(te(200));return Oa(null,e,n,!0,s)};on.hydrateRoot=function(e,n,s){if(!Au(e))throw Error(te(405));var l=s!=null&&s.hydratedSources||null,u=!1,d="",x=zd;if(s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(x=s.onRecoverableError)),n=Wd(n,null,e,1,s??null,u,!1,d,x),e[Qn]=n.current,Ds(e),l)for(e=0;e<l.length;e++)s=l[e],u=s._getVersion,u=u(s._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[s,u]:n.mutableSourceEagerHydrationData.push(s,u);return new Ta(n)};on.render=function(e,n,s){if(!Ra(n))throw Error(te(200));return Oa(null,e,n,!1,s)};on.unmountComponentAtNode=function(e){if(!Ra(e))throw Error(te(40));return e._reactRootContainer?($r(function(){Oa(null,null,e,!1,function(){e._reactRootContainer=null,e[Qn]=null})}),!0):!1};on.unstable_batchedUpdates=pu;on.unstable_renderSubtreeIntoContainer=function(e,n,s,l){if(!Ra(s))throw Error(te(200));if(e==null||e._reactInternals===void 0)throw Error(te(38));return Oa(e,n,s,!1,l)};on.version="18.3.1-next-f1338f8080-20240426";function Hd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hd)}catch(e){console.error(e)}}Hd(),z1.exports=on;var mx=z1.exports,J0=mx;Rl.createRoot=J0.createRoot,Rl.hydrateRoot=J0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ws(){return Ws=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},Ws.apply(this,arguments)}var wr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(wr||(wr={}));const e1="popstate";function wx(e){e===void 0&&(e={});function n(l,u){let{pathname:d,search:x,hash:w}=l.location;return Ac("",{pathname:d,search:x,hash:w},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function s(l,u){return typeof u=="string"?u:fa(u)}return Ex(n,s,null,e)}function ot(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function Gd(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function yx(){return Math.random().toString(36).substr(2,8)}function t1(e,n){return{usr:e.state,key:e.key,idx:n}}function Ac(e,n,s,l){return s===void 0&&(s=null),Ws({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?Hi(n):n,{state:s,key:n&&n.key||l||yx()})}function fa(e){let{pathname:n="/",search:s="",hash:l=""}=e;return s&&s!=="?"&&(n+=s.charAt(0)==="?"?s:"?"+s),l&&l!=="#"&&(n+=l.charAt(0)==="#"?l:"#"+l),n}function Hi(e){let n={};if(e){let s=e.indexOf("#");s>=0&&(n.hash=e.substr(s),e=e.substr(0,s));let l=e.indexOf("?");l>=0&&(n.search=e.substr(l),e=e.substr(0,l)),e&&(n.pathname=e)}return n}function Ex(e,n,s,l){l===void 0&&(l={});let{window:u=document.defaultView,v5Compat:d=!1}=l,x=u.history,w=wr.Pop,y=null,p=N();p==null&&(p=0,x.replaceState(Ws({},x.state,{idx:p}),""));function N(){return(x.state||{idx:null}).idx}function S(){w=wr.Pop;let q=N(),R=q==null?null:q-p;p=q,y&&y({action:w,location:j.location,delta:R})}function O(q,R){w=wr.Push;let b=Ac(j.location,q,R);p=N()+1;let T=t1(b,p),L=j.createHref(b);try{x.pushState(T,"",L)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;u.location.assign(L)}d&&y&&y({action:w,location:j.location,delta:1})}function B(q,R){w=wr.Replace;let b=Ac(j.location,q,R);p=N();let T=t1(b,p),L=j.createHref(b);x.replaceState(T,"",L),d&&y&&y({action:w,location:j.location,delta:0})}function Y(q){let R=u.location.origin!=="null"?u.location.origin:u.location.href,b=typeof q=="string"?q:fa(q);return b=b.replace(/ $/,"%20"),ot(R,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,R)}let j={get action(){return w},get location(){return e(u,x)},listen(q){if(y)throw new Error("A history only accepts one active listener");return u.addEventListener(e1,S),y=q,()=>{u.removeEventListener(e1,S),y=null}},createHref(q){return n(u,q)},createURL:Y,encodeLocation(q){let R=Y(q);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:O,replace:B,go(q){return x.go(q)}};return j}var n1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(n1||(n1={}));function Cx(e,n,s){return s===void 0&&(s="/"),vx(e,n,s)}function vx(e,n,s,l){let u=typeof n=="string"?Hi(n):n,d=Ui(u.pathname||"/",s);if(d==null)return null;let x=Xd(e);Ax(x);let w=null;for(let y=0;w==null&&y<x.length;++y){let p=Mx(d);w=kx(x[y],p)}return w}function Xd(e,n,s,l){n===void 0&&(n=[]),s===void 0&&(s=[]),l===void 0&&(l="");let u=(d,x,w)=>{let y={relativePath:w===void 0?d.path||"":w,caseSensitive:d.caseSensitive===!0,childrenIndex:x,route:d};y.relativePath.startsWith("/")&&(ot(y.relativePath.startsWith(l),'Absolute route path "'+y.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),y.relativePath=y.relativePath.slice(l.length));let p=br([l,y.relativePath]),N=s.concat(y);d.children&&d.children.length>0&&(ot(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),Xd(d.children,n,N,p)),!(d.path==null&&!d.index)&&n.push({path:p,score:Rx(p,d.index),routesMeta:N})};return e.forEach((d,x)=>{var w;if(d.path===""||!((w=d.path)!=null&&w.includes("?")))u(d,x);else for(let y of Yd(d.path))u(d,x,y)}),n}function Yd(e){let n=e.split("/");if(n.length===0)return[];let[s,...l]=n,u=s.endsWith("?"),d=s.replace(/\?$/,"");if(l.length===0)return u?[d,""]:[d];let x=Yd(l.join("/")),w=[];return w.push(...x.map(y=>y===""?d:[d,y].join("/"))),u&&w.push(...x),w.map(y=>e.startsWith("/")&&y===""?"/":y)}function Ax(e){e.sort((n,s)=>n.score!==s.score?s.score-n.score:Ox(n.routesMeta.map(l=>l.childrenIndex),s.routesMeta.map(l=>l.childrenIndex)))}const Sx=/^:[\w-]+$/,Ix=3,Nx=2,bx=1,_x=10,Tx=-2,r1=e=>e==="*";function Rx(e,n){let s=e.split("/"),l=s.length;return s.some(r1)&&(l+=Tx),n&&(l+=Nx),s.filter(u=>!r1(u)).reduce((u,d)=>u+(Sx.test(d)?Ix:d===""?bx:_x),l)}function Ox(e,n){return e.length===n.length&&e.slice(0,-1).every((l,u)=>l===n[u])?e[e.length-1]-n[n.length-1]:0}function kx(e,n,s){let{routesMeta:l}=e,u={},d="/",x=[];for(let w=0;w<l.length;++w){let y=l[w],p=w===l.length-1,N=d==="/"?n:n.slice(d.length)||"/",S=Sc({path:y.relativePath,caseSensitive:y.caseSensitive,end:p},N),O=y.route;if(!S)return null;Object.assign(u,S.params),x.push({params:u,pathname:br([d,S.pathname]),pathnameBase:Fx(br([d,S.pathnameBase])),route:O}),S.pathnameBase!=="/"&&(d=br([d,S.pathnameBase]))}return x}function Sc(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,l]=Dx(e.path,e.caseSensitive,e.end),u=n.match(s);if(!u)return null;let d=u[0],x=d.replace(/(.)\/+$/,"$1"),w=u.slice(1);return{params:l.reduce((p,N,S)=>{let{paramName:O,isOptional:B}=N;if(O==="*"){let j=w[S]||"";x=d.slice(0,d.length-j.length).replace(/(.)\/+$/,"$1")}const Y=w[S];return B&&!Y?p[O]=void 0:p[O]=(Y||"").replace(/%2F/g,"/"),p},{}),pathname:d,pathnameBase:x,pattern:e}}function Dx(e,n,s){n===void 0&&(n=!1),s===void 0&&(s=!0),Gd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let l=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,w,y)=>(l.push({paramName:w,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(l.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,n?void 0:"i"),l]}function Mx(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Gd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),e}}function Ui(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let s=n.endsWith("/")?n.length-1:n.length,l=e.charAt(s);return l&&l!=="/"?null:e.slice(s)||"/"}function Px(e,n){n===void 0&&(n="/");let{pathname:s,search:l="",hash:u=""}=typeof e=="string"?Hi(e):e;return{pathname:s?s.startsWith("/")?s:Bx(s,n):n,search:jx(l),hash:Ux(u)}}function Bx(e,n){let s=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?s.length>1&&s.pop():u!=="."&&s.push(u)}),s.length>1?s.join("/"):"/"}function bl(e,n,s,l){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(l)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Lx(e){return e.filter((n,s)=>s===0||n.route.path&&n.route.path.length>0)}function Zd(e,n){let s=Lx(e);return n?s.map((l,u)=>u===s.length-1?l.pathname:l.pathnameBase):s.map(l=>l.pathnameBase)}function Kd(e,n,s,l){l===void 0&&(l=!1);let u;typeof e=="string"?u=Hi(e):(u=Ws({},e),ot(!u.pathname||!u.pathname.includes("?"),bl("?","pathname","search",u)),ot(!u.pathname||!u.pathname.includes("#"),bl("#","pathname","hash",u)),ot(!u.search||!u.search.includes("#"),bl("#","search","hash",u)));let d=e===""||u.pathname==="",x=d?"/":u.pathname,w;if(x==null)w=s;else{let S=n.length-1;if(!l&&x.startsWith("..")){let O=x.split("/");for(;O[0]==="..";)O.shift(),S-=1;u.pathname=O.join("/")}w=S>=0?n[S]:"/"}let y=Px(u,w),p=x&&x!=="/"&&x.endsWith("/"),N=(d||x===".")&&s.endsWith("/");return!y.pathname.endsWith("/")&&(p||N)&&(y.pathname+="/"),y}const br=e=>e.join("/").replace(/\/\/+/g,"/"),Fx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),jx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Ux=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Vx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Qd=["post","put","patch","delete"];new Set(Qd);const Wx=["get",...Qd];new Set(Wx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zs(){return zs=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},zs.apply(this,arguments)}const ka=P.createContext(null),qd=P.createContext(null),Dr=P.createContext(null),Da=P.createContext(null),ti=P.createContext({outlet:null,matches:[],isDataRoute:!1}),$d=P.createContext(null);function zx(e,n){let{relative:s}=n===void 0?{}:n;Ks()||ot(!1);let{basename:l,navigator:u}=P.useContext(Dr),{hash:d,pathname:x,search:w}=Ma(e,{relative:s}),y=x;return l!=="/"&&(y=x==="/"?l:br([l,x])),u.createHref({pathname:y,search:w,hash:d})}function Ks(){return P.useContext(Da)!=null}function Qs(){return Ks()||ot(!1),P.useContext(Da).location}function Jd(e){P.useContext(Dr).static||P.useLayoutEffect(e)}function Hx(){let{isDataRoute:e}=P.useContext(ti);return e?rp():Gx()}function Gx(){Ks()||ot(!1);let e=P.useContext(ka),{basename:n,future:s,navigator:l}=P.useContext(Dr),{matches:u}=P.useContext(ti),{pathname:d}=Qs(),x=JSON.stringify(Zd(u,s.v7_relativeSplatPath)),w=P.useRef(!1);return Jd(()=>{w.current=!0}),P.useCallback(function(p,N){if(N===void 0&&(N={}),!w.current)return;if(typeof p=="number"){l.go(p);return}let S=Kd(p,JSON.parse(x),d,N.relative==="path");e==null&&n!=="/"&&(S.pathname=S.pathname==="/"?n:br([n,S.pathname])),(N.replace?l.replace:l.push)(S,N.state,N)},[n,l,x,d,e])}function Ma(e,n){let{relative:s}=n===void 0?{}:n,{future:l}=P.useContext(Dr),{matches:u}=P.useContext(ti),{pathname:d}=Qs(),x=JSON.stringify(Zd(u,l.v7_relativeSplatPath));return P.useMemo(()=>Kd(e,JSON.parse(x),d,s==="path"),[e,x,d,s])}function Xx(e,n){return Yx(e,n)}function Yx(e,n,s,l){Ks()||ot(!1);let{navigator:u}=P.useContext(Dr),{matches:d}=P.useContext(ti),x=d[d.length-1],w=x?x.params:{};x&&x.pathname;let y=x?x.pathnameBase:"/";x&&x.route;let p=Qs(),N;if(n){var S;let q=typeof n=="string"?Hi(n):n;y==="/"||(S=q.pathname)!=null&&S.startsWith(y)||ot(!1),N=q}else N=p;let O=N.pathname||"/",B=O;if(y!=="/"){let q=y.replace(/^\//,"").split("/");B="/"+O.replace(/^\//,"").split("/").slice(q.length).join("/")}let Y=Cx(e,{pathname:B}),j=$x(Y&&Y.map(q=>Object.assign({},q,{params:Object.assign({},w,q.params),pathname:br([y,u.encodeLocation?u.encodeLocation(q.pathname).pathname:q.pathname]),pathnameBase:q.pathnameBase==="/"?y:br([y,u.encodeLocation?u.encodeLocation(q.pathnameBase).pathname:q.pathnameBase])})),d,s,l);return n&&j?P.createElement(Da.Provider,{value:{location:zs({pathname:"/",search:"",hash:"",state:null,key:"default"},N),navigationType:wr.Pop}},j):j}function Zx(){let e=np(),n=Vx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},n),s?P.createElement("pre",{style:u},s):null,null)}const Kx=P.createElement(Zx,null);class Qx extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,s){return s.location!==n.location||s.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:s.error,location:s.location,revalidation:n.revalidation||s.revalidation}}componentDidCatch(n,s){console.error("React Router caught the following error during render",n,s)}render(){return this.state.error!==void 0?P.createElement(ti.Provider,{value:this.props.routeContext},P.createElement($d.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qx(e){let{routeContext:n,match:s,children:l}=e,u=P.useContext(ka);return u&&u.static&&u.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=s.route.id),P.createElement(ti.Provider,{value:n},l)}function $x(e,n,s,l){var u;if(n===void 0&&(n=[]),s===void 0&&(s=null),l===void 0&&(l=null),e==null){var d;if(!s)return null;if(s.errors)e=s.matches;else if((d=l)!=null&&d.v7_partialHydration&&n.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let x=e,w=(u=s)==null?void 0:u.errors;if(w!=null){let N=x.findIndex(S=>S.route.id&&(w==null?void 0:w[S.route.id])!==void 0);N>=0||ot(!1),x=x.slice(0,Math.min(x.length,N+1))}let y=!1,p=-1;if(s&&l&&l.v7_partialHydration)for(let N=0;N<x.length;N++){let S=x[N];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(p=N),S.route.id){let{loaderData:O,errors:B}=s,Y=S.route.loader&&O[S.route.id]===void 0&&(!B||B[S.route.id]===void 0);if(S.route.lazy||Y){y=!0,p>=0?x=x.slice(0,p+1):x=[x[0]];break}}}return x.reduceRight((N,S,O)=>{let B,Y=!1,j=null,q=null;s&&(B=w&&S.route.id?w[S.route.id]:void 0,j=S.route.errorElement||Kx,y&&(p<0&&O===0?(ip("route-fallback"),Y=!0,q=null):p===O&&(Y=!0,q=S.route.hydrateFallbackElement||null)));let R=n.concat(x.slice(0,O+1)),b=()=>{let T;return B?T=j:Y?T=q:S.route.Component?T=P.createElement(S.route.Component,null):S.route.element?T=S.route.element:T=N,P.createElement(qx,{match:S,routeContext:{outlet:N,matches:R,isDataRoute:s!=null},children:T})};return s&&(S.route.ErrorBoundary||S.route.errorElement||O===0)?P.createElement(Qx,{location:s.location,revalidation:s.revalidation,component:j,error:B,children:b(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):b()},null)}var eh=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(eh||{}),th=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(th||{});function Jx(e){let n=P.useContext(ka);return n||ot(!1),n}function ep(e){let n=P.useContext(qd);return n||ot(!1),n}function tp(e){let n=P.useContext(ti);return n||ot(!1),n}function nh(e){let n=tp(),s=n.matches[n.matches.length-1];return s.route.id||ot(!1),s.route.id}function np(){var e;let n=P.useContext($d),s=ep(),l=nh();return n!==void 0?n:(e=s.errors)==null?void 0:e[l]}function rp(){let{router:e}=Jx(eh.UseNavigateStable),n=nh(th.UseNavigateStable),s=P.useRef(!1);return Jd(()=>{s.current=!0}),P.useCallback(function(u,d){d===void 0&&(d={}),s.current&&(typeof u=="number"?e.navigate(u):e.navigate(u,zs({fromRouteId:n},d)))},[e,n])}const i1={};function ip(e,n,s){i1[e]||(i1[e]=!0)}function sp(e,n){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function hi(e){ot(!1)}function op(e){let{basename:n="/",children:s=null,location:l,navigationType:u=wr.Pop,navigator:d,static:x=!1,future:w}=e;Ks()&&ot(!1);let y=n.replace(/^\/*/,"/"),p=P.useMemo(()=>({basename:y,navigator:d,static:x,future:zs({v7_relativeSplatPath:!1},w)}),[y,w,d,x]);typeof l=="string"&&(l=Hi(l));let{pathname:N="/",search:S="",hash:O="",state:B=null,key:Y="default"}=l,j=P.useMemo(()=>{let q=Ui(N,y);return q==null?null:{location:{pathname:q,search:S,hash:O,state:B,key:Y},navigationType:u}},[y,N,S,O,B,Y,u]);return j==null?null:P.createElement(Dr.Provider,{value:p},P.createElement(Da.Provider,{children:s,value:j}))}function ap(e){let{children:n,location:s}=e;return Xx(Ic(n),s)}new Promise(()=>{});function Ic(e,n){n===void 0&&(n=[]);let s=[];return P.Children.forEach(e,(l,u)=>{if(!P.isValidElement(l))return;let d=[...n,u];if(l.type===P.Fragment){s.push.apply(s,Ic(l.props.children,d));return}l.type!==hi&&ot(!1),!l.props.index||!l.props.children||ot(!1);let x={id:l.props.id||d.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(x.children=Ic(l.props.children,d)),s.push(x)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function da(){return da=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},da.apply(this,arguments)}function rh(e,n){if(e==null)return{};var s={},l=Object.keys(e),u,d;for(d=0;d<l.length;d++)u=l[d],!(n.indexOf(u)>=0)&&(s[u]=e[u]);return s}function lp(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function cp(e,n){return e.button===0&&(!n||n==="_self")&&!lp(e)}const up=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fp=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],dp="6";try{window.__reactRouterVersion=dp}catch{}const hp=P.createContext({isTransitioning:!1}),gp="startTransition",s1=o2[gp];function xp(e){let{basename:n,children:s,future:l,window:u}=e,d=P.useRef();d.current==null&&(d.current=wx({window:u,v5Compat:!0}));let x=d.current,[w,y]=P.useState({action:x.action,location:x.location}),{v7_startTransition:p}=l||{},N=P.useCallback(S=>{p&&s1?s1(()=>y(S)):y(S)},[y,p]);return P.useLayoutEffect(()=>x.listen(N),[x,N]),P.useEffect(()=>sp(l),[l]),P.createElement(op,{basename:n,children:s,location:w.location,navigationType:w.action,navigator:x,future:l})}const pp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wp=P.forwardRef(function(n,s){let{onClick:l,relative:u,reloadDocument:d,replace:x,state:w,target:y,to:p,preventScrollReset:N,viewTransition:S}=n,O=rh(n,up),{basename:B}=P.useContext(Dr),Y,j=!1;if(typeof p=="string"&&mp.test(p)&&(Y=p,pp))try{let T=new URL(window.location.href),L=p.startsWith("//")?new URL(T.protocol+p):new URL(p),Z=Ui(L.pathname,B);L.origin===T.origin&&Z!=null?p=Z+L.search+L.hash:j=!0}catch{}let q=zx(p,{relative:u}),R=Cp(p,{replace:x,state:w,target:y,preventScrollReset:N,relative:u,viewTransition:S});function b(T){l&&l(T),T.defaultPrevented||R(T)}return P.createElement("a",da({},O,{href:Y||q,onClick:j||d?l:b,ref:s,target:y}))}),yp=P.forwardRef(function(n,s){let{"aria-current":l="page",caseSensitive:u=!1,className:d="",end:x=!1,style:w,to:y,viewTransition:p,children:N}=n,S=rh(n,fp),O=Ma(y,{relative:S.relative}),B=Qs(),Y=P.useContext(qd),{navigator:j,basename:q}=P.useContext(Dr),R=Y!=null&&vp(O)&&p===!0,b=j.encodeLocation?j.encodeLocation(O).pathname:O.pathname,T=B.pathname,L=Y&&Y.navigation&&Y.navigation.location?Y.navigation.location.pathname:null;u||(T=T.toLowerCase(),L=L?L.toLowerCase():null,b=b.toLowerCase()),L&&q&&(L=Ui(L,q)||L);const Z=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let K=T===b||!x&&T.startsWith(b)&&T.charAt(Z)==="/",z=L!=null&&(L===b||!x&&L.startsWith(b)&&L.charAt(b.length)==="/"),F={isActive:K,isPending:z,isTransitioning:R},U=K?l:void 0,M;typeof d=="function"?M=d(F):M=[d,K?"active":null,z?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let $=typeof w=="function"?w(F):w;return P.createElement(wp,da({},S,{"aria-current":U,className:M,ref:s,style:$,to:y,viewTransition:p}),typeof N=="function"?N(F):N)});var Nc;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Nc||(Nc={}));var o1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(o1||(o1={}));function Ep(e){let n=P.useContext(ka);return n||ot(!1),n}function Cp(e,n){let{target:s,replace:l,state:u,preventScrollReset:d,relative:x,viewTransition:w}=n===void 0?{}:n,y=Hx(),p=Qs(),N=Ma(e,{relative:x});return P.useCallback(S=>{if(cp(S,s)){S.preventDefault();let O=l!==void 0?l:fa(p)===fa(N);y(e,{replace:O,state:u,preventScrollReset:d,relative:x,viewTransition:w})}},[p,y,N,l,u,s,e,d,x,w])}function vp(e,n){n===void 0&&(n={});let s=P.useContext(hp);s==null&&ot(!1);let{basename:l}=Ep(Nc.useViewTransitionState),u=Ma(e,{relative:n.relative});if(!s.isTransitioning)return!1;let d=Ui(s.currentLocation.pathname,l)||s.currentLocation.pathname,x=Ui(s.nextLocation.pathname,l)||s.nextLocation.pathname;return Sc(u.pathname,x)!=null||Sc(u.pathname,d)!=null}function Ap({title:e,titleId:n,...s},l){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},s),e?P.createElement("title",{id:n},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Sp=P.forwardRef(Ap);function Ip({title:e,titleId:n,...s},l){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},s),e?P.createElement("title",{id:n},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Np=P.forwardRef(Ip);function bp({title:e,titleId:n,...s},l){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},s),e?P.createElement("title",{id:n},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const _p=P.forwardRef(bp);function Tp({title:e,titleId:n,...s},l){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},s),e?P.createElement("title",{id:n},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5m-9-6h.008v.008H12v-.008ZM12 15h.008v.008H12V15Zm0 2.25h.008v.008H12v-.008ZM9.75 15h.008v.008H9.75V15Zm0 2.25h.008v.008H9.75v-.008ZM7.5 15h.008v.008H7.5V15Zm0 2.25h.008v.008H7.5v-.008Zm6.75-4.5h.008v.008h-.008v-.008Zm0 2.25h.008v.008h-.008V15Zm0 2.25h.008v.008h-.008v-.008Zm2.25-4.5h.008v.008H16.5v-.008Zm0 2.25h.008v.008H16.5V15Z"}))}const Rp=P.forwardRef(Tp);function Op({title:e,titleId:n,...s},l){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},s),e?P.createElement("title",{id:n},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const kp=P.forwardRef(Op);function Dp({title:e,titleId:n,...s},l){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},s),e?P.createElement("title",{id:n},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))}const ih=P.forwardRef(Dp);function Mp({title:e,titleId:n,...s},l){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},s),e?P.createElement("title",{id:n},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Pp=P.forwardRef(Mp);function Bp({title:e,titleId:n,...s},l){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},s),e?P.createElement("title",{id:n},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Lp=P.forwardRef(Bp);function Fp({title:e,titleId:n,...s},l){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},s),e?P.createElement("title",{id:n},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"}))}const jp=P.forwardRef(Fp);function Up({title:e,titleId:n,...s},l){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":n},s),e?P.createElement("title",{id:n},e):null,P.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"}))}const Vp=P.forwardRef(Up),sh="http://localhost:4000";function Wp(e={}){const n={...e},{body:s}=n;s&&!(s instanceof FormData)&&typeof s!="string"&&(n.body=JSON.stringify(s));const l=new Headers(e.headers||{});return!(n.body instanceof FormData)&&!l.has("Content-Type")&&l.set("Content-Type","application/json"),n.headers=l,n}async function Jn(e,n={}){const s=await fetch(`${sh}${e}`,Wp(n));if(!s.ok){let u=null;try{u=await s.json()}catch{}const d=new Error((u==null?void 0:u.error)||"Request failed");throw d.status=s.status,u&&typeof u=="object"&&(d.payload=u),d}if(s.status===204)return null;const l=await s.text();if(!l)return null;try{return JSON.parse(l)}catch(u){throw console.error("Failed to parse JSON response",u),new Error("Failed to parse server response")}}const zp=[{key:"available",label:"Available"},{key:"reserved",label:"Reserved"},{key:"sold",label:"Sold"},{key:"blocked",label:"Blocked"}],a1={available:"shadow-[0_0_0_1px_rgba(255,255,255,0.35)]",reserved:"shadow-[0_0_0_1px_rgba(255,255,255,0.28)] ring-2 ring-amber-300/80 ring-offset-[1px] ring-offset-slate-950/80",sold:"bg-slate-900/90 text-slate-200 shadow-[0_0_0_1px_rgba(15,23,42,0.65)]",blocked:"bg-slate-700/85 text-slate-400 shadow-inner shadow-black/40"},Hp={available:"bg-slate-200/80 shadow-[0_0_0_1px_rgba(255,255,255,0.4)]",reserved:"bg-slate-200/80 ring-2 ring-amber-300/70 shadow-[0_0_0_1px_rgba(255,255,255,0.3)]",sold:"bg-slate-800/80 shadow-[0_0_0_1px_rgba(15,23,42,0.6)]",blocked:"bg-slate-600/80 shadow-inner shadow-black/40"},Gp={lowerBalcony:"Lower Balcony",orchestra:"Orchestra",lodges:"Lodges",upperBalcony:"Upper Balcony"},l1={lowerBalcony:{labels:["Lower Balcony (Left)","Lower Balcony (Right)"]},orchestra:{labels:["Orchestra (Left)","Orchestra (Left Center)","Orchestra (Right Center)","Orchestra (Right)"]},lodges:{labels:["Lodge (Left)","Lodge (Right)"]},upperBalcony:{labels:["Upper Balcony (Left)","Upper Balcony (Right)"]}},Xp={lowerBalcony:[{panel:"border border-rose-400/35 bg-gradient-to-br from-pink-500/20 via-rose-500/15 to-orange-400/20",badge:"bg-amber-200/80 text-slate-900",seatBase:"bg-gradient-to-br from-pink-500 to-orange-400",seatText:"text-slate-900",seatBorder:"shadow-[0_0_0_1px_rgba(255,255,255,0.4)]"},{panel:"border border-fuchsia-400/35 bg-gradient-to-br from-fuchsia-500/20 via-rose-500/15 to-pink-400/20",badge:"bg-rose-200/80 text-white",seatBase:"bg-gradient-to-br from-rose-500 to-fuchsia-500",seatText:"text-white",seatBorder:"shadow-[0_0_0_1px_rgba(255,255,255,0.35)]"}],orchestra:[{panel:"border border-violet-400/35 bg-gradient-to-br from-violet-600/20 via-purple-600/15 to-indigo-500/20",badge:"bg-violet-200/80 text-slate-900",seatBase:"bg-gradient-to-br from-violet-500 to-indigo-500",seatText:"text-white",seatBorder:"shadow-[0_0_0_1px_rgba(200,200,255,0.35)]"},{panel:"border border-indigo-400/35 bg-gradient-to-br from-indigo-500/20 via-sky-500/12 to-blue-500/20",badge:"bg-sky-200/80 text-slate-900",seatBase:"bg-gradient-to-br from-indigo-500 to-sky-500",seatText:"text-white",seatBorder:"shadow-[0_0_0_1px_rgba(190,210,255,0.32)]"},{panel:"border border-sky-400/35 bg-gradient-to-br from-sky-500/20 via-blue-500/15 to-violet-500/20",badge:"bg-sky-200/75 text-slate-900",seatBase:"bg-gradient-to-br from-sky-500 to-violet-500",seatText:"text-white",seatBorder:"shadow-[0_0_0_1px_rgba(180,220,255,0.3)]"},{panel:"border border-blue-400/35 bg-gradient-to-br from-blue-500/20 via-indigo-500/15 to-slate-500/25",badge:"bg-blue-200/80 text-slate-900",seatBase:"bg-gradient-to-br from-blue-500 to-indigo-600",seatText:"text-white",seatBorder:"shadow-[0_0_0_1px_rgba(170,200,255,0.32)]"}],lodges:[{panel:"border border-cyan-400/35 bg-gradient-to-br from-cyan-500/22 via-blue-500/15 to-sky-500/20",badge:"bg-cyan-200/80 text-slate-900",seatBase:"bg-gradient-to-br from-cyan-500 to-blue-500",seatText:"text-white",seatBorder:"shadow-[0_0_0_1px_rgba(180,230,245,0.32)]"},{panel:"border border-teal-400/35 bg-gradient-to-br from-teal-500/22 via-emerald-500/15 to-cyan-500/18",badge:"bg-teal-200/80 text-slate-900",seatBase:"bg-gradient-to-br from-teal-500 to-cyan-500",seatText:"text-white",seatBorder:"shadow-[0_0_0_1px_rgba(170,235,225,0.3)]"}],upperBalcony:[{panel:"border border-amber-400/35 bg-gradient-to-br from-amber-500/22 via-orange-500/15 to-rose-400/20",badge:"bg-amber-200/85 text-slate-900",seatBase:"bg-gradient-to-br from-amber-500 to-rose-500",seatText:"text-slate-900",seatBorder:"shadow-[0_0_0_1px_rgba(255,240,200,0.4)]"},{panel:"border border-orange-400/35 bg-gradient-to-br from-orange-500/22 via-rose-500/15 to-pink-500/20",badge:"bg-orange-200/85 text-slate-900",seatBase:"bg-gradient-to-br from-orange-500 to-pink-500",seatText:"text-slate-900",seatBorder:"shadow-[0_0_0_1px_rgba(255,225,190,0.38)]"}]};function oh({seats:e,isLoading:n}){const s=P.useMemo(()=>Kp(e),[e]);return n?E.jsx("div",{className:"glass-card flex h-64 items-center justify-center border border-dashed border-white/15 text-sm text-slate-200/85",children:"Loading seat map…"}):s.totalSeats?E.jsxs("div",{className:"glass-panel relative overflow-hidden p-6 text-slate-100",children:[E.jsxs("header",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-lg font-semibold tracking-wide text-white",children:"Seat Map Overview"}),E.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400",children:"Venue layout"})]}),E.jsx("div",{className:"flex flex-wrap items-center gap-3 text-xs text-slate-200/85",children:zp.map(({key:l,label:u})=>E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:`inline-flex h-4 w-6 items-center justify-center rounded-sm ${Hp[l]}`}),E.jsx("span",{className:"capitalize text-slate-200/85",children:u})]},l))})]}),E.jsx("div",{className:"mt-6 flex justify-center",children:E.jsx("div",{className:"rounded-full border border-white/15 bg-white/10 px-8 py-2 text-xs font-semibold uppercase tracking-[0.4em] text-slate-200 shadow-inner shadow-black/40",children:"Stage"})}),E.jsx("div",{className:"mt-8 max-h-[70vh] overflow-auto pr-2",children:["lowerBalcony","orchestra","lodges","upperBalcony"].map(l=>{const u=s.groups[l];return!u||u.length===0?null:E.jsxs("section",{className:"mb-10 last:mb-0",children:[E.jsx("h4",{className:"mb-4 text-xs font-semibold uppercase tracking-[0.45em] text-slate-500",children:Gp[l]}),E.jsx("div",{className:"grid gap-4",style:{gridTemplateColumns:`repeat(${u.length}, minmax(0, 1fr))`},children:u.map(d=>E.jsx(Yp,{slice:d},d.key))})]},l)})})]}):E.jsx("div",{className:"glass-card flex h-64 items-center justify-center border border-dashed border-white/15 text-sm text-slate-200/85",children:"No seats found for this event."})}function Yp({slice:e}){return E.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-4 shadow-[0_25px_55px_-35px_rgba(15,23,42,0.95)] transition-shadow duration-300 hover:shadow-[0_35px_65px_-30px_rgba(59,130,246,0.35)] ${e.theme.panel}`,children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("h5",{className:"text-sm font-semibold text-white drop-shadow-[0_1px_3px_rgba(15,23,42,0.6)]",children:e.displayName}),E.jsxs("p",{className:"text-[0.65rem] uppercase tracking-[0.4em] text-slate-200/60",children:[e.seatCount," seats"]})]}),E.jsxs("div",{className:`rounded-full px-3 py-1 text-[0.55rem] uppercase tracking-[0.35em] ${e.theme.badge}`,children:[e.rows.length," rows"]})]}),E.jsx("div",{className:"mt-3 space-y-2",children:e.rows.map(n=>E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("span",{className:"w-10 shrink-0 text-[0.6rem] uppercase tracking-[0.35em] text-slate-200/70",children:n.label}),E.jsx("div",{className:"flex flex-wrap gap-1",children:n.seats.map(s=>E.jsx(Zp,{seat:s,theme:e.theme},s.id))})]},n.label))})]})}function Zp({seat:e,theme:n}){const s=(e==null?void 0:e.status)||"available",u=s==="available"||s==="reserved"?`${n.seatBase} ${n.seatText}`:"bg-slate-600/70 text-slate-200",d=a1[s]||a1.available,x=Jp(e),w=`${(e==null?void 0:e.section)||"Section"} ${(e==null?void 0:e.row_label)||""} Seat ${e==null?void 0:e.seat_number} • ${s}`;return E.jsx("div",{title:w,className:`relative flex h-7 w-7 items-center justify-center rounded-md text-[0.55rem] font-semibold uppercase tracking-tight transition-transform duration-150 hover:scale-105 ${u} ${n.seatBorder} ${d}`,children:E.jsx("span",{className:"relative z-[1] drop-shadow-[0_1px_2px_rgba(15,23,42,0.45)]",children:x})})}function Kp(e){if(!Array.isArray(e)||e.length===0)return{totalSeats:0,groups:{lowerBalcony:[],orchestra:[],lodges:[],upperBalcony:[]}};const n=new Map;e.forEach(x=>{const w=Number.isFinite(x.row_idx)?x.row_idx:0;n.has(w)||n.set(w,{idx:w,label:$p(x),seats:[]}),n.get(w).seats.push(x)});const s=Array.from(n.values()).sort((x,w)=>x.idx-w.idx),l=s.length,u=Qp();s.forEach((x,w)=>{const y=l>1?w/(l-1):0,p=x.seats.slice().sort((S,O)=>ur(S.col_idx)-ur(O.col_idx)||ur(S.seat_number)-ur(O.seat_number)),N=p.length;p.forEach((S,O)=>{const B=N>1?O/(N-1):.5,Y=qp(y,B),j=u[Y.groupKey];if(!j)return;const q=bc(Y.sliceIndex,0,j.length-1),R=j[q];R.seatCount+=1,R.rows.has(x.label)||R.rows.set(x.label,{label:x.label,rowIdx:x.idx,seats:[]}),R.rows.get(x.label).seats.push(S)})});const d=Object.fromEntries(Object.entries(u).map(([x,w])=>{const y=w.map((p,N)=>({...p,key:`${x}-${N}`,displayName:p.displayName,rows:Array.from(p.rows.values()).map(S=>({...S,seats:S.seats.slice().sort((O,B)=>ur(O.col_idx)-ur(B.col_idx)||ur(O.seat_number)-ur(B.seat_number))})).sort((S,O)=>S.rowIdx-O.rowIdx)})).filter(p=>p.seatCount>0);return[x,y]}));return{totalSeats:e.length,groups:d}}function Qp(){return Object.fromEntries(Object.keys(l1).map(e=>{const n=l1[e].labels,s=Xp[e],l=n.map((u,d)=>({displayName:u,theme:s[d%s.length],seatCount:0,rows:new Map}));return[e,l]}))}function qp(e,n){const s=bc(isFinite(e)?e:0,0,1),l=bc(isFinite(n)?n:.5,0,1);return s<=.22?{groupKey:"lowerBalcony",sliceIndex:l<.5?0:1}:s<=.6?l<.22?{groupKey:"orchestra",sliceIndex:0}:l<.5?{groupKey:"orchestra",sliceIndex:1}:l<.78?{groupKey:"orchestra",sliceIndex:2}:{groupKey:"orchestra",sliceIndex:3}:s<=.78?{groupKey:"lodges",sliceIndex:l<.5?0:1}:{groupKey:"upperBalcony",sliceIndex:l<.5?0:1}}function bc(e,n,s){return Math.min(Math.max(e,n),s)}function ur(e){const n=Number(e);return Number.isFinite(n)?n:0}function $p(e){if(e&&typeof e.row_label=="string"&&e.row_label.trim())return e.row_label.trim();const n=Number.isFinite(e==null?void 0:e.row_idx)?e.row_idx+1:0;return n?`Row ${n}`:"Row"}function Jp(e){if(!e)return"";const n=e.row_label?e.row_label.trim():"",s=e.seat_number!=null?String(e.seat_number):"";return n&&s?`${n}${s}`:s||n||""}function Zt({label:e,value:n,accent:s="bg-gradient-to-r from-sky-400 via-indigo-400 to-blue-500"}){return E.jsxs("div",{className:"glass-card p-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-300/70",children:e}),E.jsx("span",{className:`h-2 w-10 rounded-full ${s}`})]}),E.jsx("p",{className:"mt-4 text-4xl font-semibold tracking-tight text-white drop-shadow-[0_10px_25px_rgba(56,189,248,0.3)]",children:n})]})}function em({data:e=[],height:n=80,stroke:s="#38bdf8",fill:l="rgba(56,189,248,0.18)"}){var j,q;if(!e||e.length===0)return E.jsx("div",{className:"flex h-20 items-center justify-center text-xs text-slate-300/70",children:"Waiting for live activity…"});const u=e.map(R=>Number(R.count)||0),d=Math.max(...u,1),x=0,w=d-x||1,y=u.map(R=>(R-x)/w),p=y.length,N=y.map((R,b)=>{const T=p>1?b/(p-1)*100:100,L=100-R*100;return`${T},${L}`}),S=`M0,100 ${N.map(R=>`L${R}`).join(" ")} L100,100 Z`,O=`M${N[0]} ${N.slice(1).map(R=>`L${R}`).join(" ")}`,B=(j=e[0])!=null&&j.bucket?new Date(e[0].bucket).toLocaleTimeString():"",Y=(q=e[e.length-1])!=null&&q.bucket?new Date(e[e.length-1].bucket).toLocaleTimeString():"";return E.jsxs("div",{className:"flex flex-col gap-3",children:[E.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"h-32 w-full",style:{maxHeight:n},children:[E.jsx("defs",{children:E.jsxs("linearGradient",{id:"spark-fill",x1:"0",x2:"0",y1:"0",y2:"1",children:[E.jsx("stop",{offset:"0%",stopColor:l}),E.jsx("stop",{offset:"100%",stopColor:"transparent"})]})}),E.jsx("path",{d:S,fill:"url(#spark-fill)",stroke:"none",vectorEffect:"non-scaling-stroke"}),E.jsx("path",{d:O,fill:"none",stroke:s,strokeWidth:"2",vectorEffect:"non-scaling-stroke"})]}),E.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.3em] text-slate-400",children:[E.jsx("span",{children:B}),E.jsx("span",{children:Y})]})]})}const ah=P.createContext(null),tm=`${sh}/api/admin/analytics/stream`,nm="/api/admin/analytics/overview",rm=5e3;function im({children:e}){const[n,s]=P.useState(null),[l,u]=P.useState(!0),[d,x]=P.useState(!1),[w,y]=P.useState(null),p=P.useRef(null),N=P.useRef(null);P.useEffect(()=>{let O=!1;async function B(){u(!0);try{const R=await Jn(nm);O||(s(R),y(null))}catch(R){O||y(R)}finally{O||u(!1)}}function Y(){N.current&&(clearTimeout(N.current),N.current=null),p.current&&(p.current.close(),p.current=null)}function j(){N.current||(N.current=setTimeout(()=>{N.current=null,O||q()},rm))}function q(){Y();try{const R=new EventSource(tm,{withCredentials:!0});R.onmessage=b=>{try{const T=JSON.parse(b.data);s(T),x(!0),y(null)}catch(T){console.error("Failed to parse analytics stream payload",T)}},R.onerror=b=>{console.warn("Analytics stream error",b),x(!1),y(T=>T||new Error("Disconnected from analytics stream")),R.close(),j()},p.current=R}catch(R){console.error("Failed to establish analytics stream",R),y(R),j()}}return B(),q(),()=>{O=!0,Y()}},[]);const S=P.useMemo(()=>({snapshot:n,isLoading:l,isConnected:d,error:w,lastUpdated:(n==null?void 0:n.generatedAt)??null}),[n,l,d,w]);return E.jsx(ah.Provider,{value:S,children:e})}function lh(){const e=P.useContext(ah);if(!e)throw new Error("useAnalytics must be used within an AnalyticsProvider");return e}const c1=1,_l={available:"bg-gradient-to-r from-emerald-400 via-teal-400 to-cyan-400",reserved:"bg-gradient-to-r from-amber-400 via-orange-400 to-rose-400",sold:"bg-gradient-to-r from-slate-500 via-slate-600 to-slate-800"};function u1(){var Z,K,z,F,U,M,$,ee,fe,Ee,H;const{snapshot:e,isConnected:n,lastUpdated:s,isLoading:l}=lh(),u=(e==null?void 0:e.events)??[],[d,x]=P.useState(c1||((Z=u[0])==null?void 0:Z.id)||1),[w,y]=P.useState(()=>{var ae;return String(c1||((ae=u[0])==null?void 0:ae.id)||1)}),[p,N]=P.useState([]),[S,O]=P.useState(!1),B=P.useCallback(async ae=>{if(ae){O(!0);try{const se=await Jn(`/api/admin/events/${ae}/seats`);N(Array.isArray(se)?se:[])}catch(se){console.error(se),alert(se.message||"Failed to load seats"),N([])}finally{O(!1)}}},[]);P.useEffect(()=>{var se;if(!u.length||u.some(ie=>ie.id===d))return;const ae=(se=u[0])==null?void 0:se.id;ae&&(x(ae),y(String(ae)))},[u,d]),P.useEffect(()=>{d&&B(d)},[d,B]);const Y=P.useMemo(()=>p.reduce((se,ie)=>(se[ie.status]=(se[ie.status]||0)+1,se.total+=1,se),{total:0}),[p]),j=P.useMemo(()=>u.find(ae=>ae.id===d)??null,[u,d]),q=(j==null?void 0:j.seats)??Y,R=(j==null?void 0:j.occupancy)!=null?Math.round(j.occupancy*100):null,b=(j==null?void 0:j.checkIns)??{lastFiveMinutes:0,lastHour:0,history:[]},T=ae=>{y(ae.target.value)},L=ae=>{ae.preventDefault();const se=Number(w);if(!Number.isInteger(se)||se<=0){alert("Event ID must be a positive number");return}x(se)};return E.jsxs("div",{className:"mx-auto flex w-full max-w-7xl flex-col gap-8",children:[E.jsxs("section",{className:"glass-panel flex flex-col gap-6 px-6 py-6",children:[E.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("p",{className:"glass-section-label",children:"Live command center"}),E.jsx("h2",{className:"page-heading",children:"Event administration"}),E.jsxs("p",{className:"page-subheading",children:["Track seat inventory, check-ins, and engagement in real time for event #",d,"."]})]}),E.jsxs("div",{className:"flex flex-col gap-4 md:w-auto md:flex-row md:items-end",children:[u.length>0&&E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("label",{className:"input-label",htmlFor:"eventSelect",children:"Select event"}),E.jsx("select",{id:"eventSelect",value:d,onChange:ae=>{const se=Number(ae.target.value);Number.isNaN(se)||(x(se),y(String(se)))},className:"input-field min-w-[16rem] appearance-none",children:u.map(ae=>E.jsxs("option",{value:ae.id,children:[ae.name,ae.startsAt?` • ${new Date(ae.startsAt).toLocaleString()}`:""]},ae.id))})]}),E.jsxs("form",{onSubmit:L,className:"flex items-end gap-3",children:[E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("label",{className:"input-label",htmlFor:"eventId",children:"Event ID"}),E.jsx("input",{id:"eventId",type:"number",min:"1",value:w,onChange:T,className:"input-field w-24"})]}),E.jsx("button",{type:"submit",className:"primary-button whitespace-nowrap",children:"Load"})]})]})]}),E.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-slate-200/70",children:[E.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full border border-white/10 px-3 py-1 font-semibold uppercase tracking-[0.3em] ${n?"bg-emerald-500/20 text-emerald-200":"bg-white/5 text-slate-300"}`,children:[E.jsx("span",{className:`h-2 w-2 rounded-full ${n?"bg-emerald-300 animate-pulse":"bg-slate-400"}`}),n?"stream live":"stream paused"]}),E.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1 tracking-[0.3em]",children:["updated ",s?new Date(s).toLocaleTimeString():"—"]}),l&&E.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1",children:"Syncing analytics…"})]})]}),E.jsxs("section",{className:"grid gap-5 md:grid-cols-5",children:[E.jsx(Zt,{label:"Capacity",value:(j==null?void 0:j.capacity)??"—",accent:"bg-gradient-to-r from-sky-500 via-indigo-500 to-purple-500"}),E.jsx(Zt,{label:"Available",value:q.available??0,accent:_l.available}),E.jsx(Zt,{label:"Reserved",value:q.reserved??0,accent:_l.reserved}),E.jsx(Zt,{label:"Sold",value:q.sold??0,accent:_l.sold}),E.jsx(Zt,{label:"Occupancy",value:R!=null?`${R}%`:"—",accent:"bg-gradient-to-r from-emerald-400 via-green-500 to-lime-500"})]}),E.jsx("section",{className:"grid gap-6 xl:grid-cols-[10fr]",children:E.jsx("div",{className:"glass-panel px-4 py-6",children:E.jsx(oh,{seats:p,isLoading:S})})}),E.jsxs("section",{className:"grid gap-6 lg:grid-cols-3",children:[E.jsxs("div",{className:"glass-card p-6",children:[E.jsx("p",{className:"glass-section-label",children:"System load"}),E.jsx("h3",{className:"text-lg font-semibold text-white",children:"Email queue overview"}),E.jsxs("ul",{className:"mt-4 space-y-2 text-sm text-slate-200/85",children:[E.jsxs("li",{className:"flex items-center justify-between",children:[E.jsx("span",{children:"Pending"}),E.jsx("span",{children:((K=e==null?void 0:e.queue)==null?void 0:K.pending)??0})]}),E.jsxs("li",{className:"flex items-center justify-between",children:[E.jsx("span",{children:"Sending"}),E.jsx("span",{children:((z=e==null?void 0:e.queue)==null?void 0:z.sending)??0})]}),E.jsxs("li",{className:"flex items-center justify-between",children:[E.jsx("span",{children:"Sent (today)"}),E.jsx("span",{children:((F=e==null?void 0:e.queue)==null?void 0:F.sent)??0})]}),E.jsxs("li",{className:"flex items-center justify-between",children:[E.jsx("span",{children:"Failed"}),E.jsx("span",{children:((U=e==null?void 0:e.queue)==null?void 0:U.failed)??0})]})]})]}),E.jsxs("div",{className:"glass-card p-6",children:[E.jsx("p",{className:"glass-section-label",children:"Global metrics"}),E.jsx("h3",{className:"text-lg font-semibold text-white",children:"Portfolio overview"}),E.jsxs("div",{className:"mt-4 space-y-3 text-sm text-slate-200/85",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{children:"Events live"}),E.jsx("span",{children:((M=e==null?void 0:e.totals)==null?void 0:M.events)??0})]}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{children:"Tickets checked-in (hour)"}),E.jsx("span",{children:((ee=($=e==null?void 0:e.totals)==null?void 0:$.checkIns)==null?void 0:ee.lastHour)??0})]}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{children:"Tickets active"}),E.jsx("span",{children:((Ee=(fe=e==null?void 0:e.totals)==null?void 0:fe.tickets)==null?void 0:Ee.active)??0})]}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("span",{children:"Total revenue"}),E.jsxs("span",{children:["₱",(((H=e==null?void 0:e.totals)==null?void 0:H.revenue)??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]}),E.jsxs("div",{className:"glass-card p-6",children:[E.jsx("p",{className:"glass-section-label",children:"High-occupancy alerts"}),E.jsx("h3",{className:"text-lg font-semibold text-white",children:"Events nearing capacity"}),E.jsxs("div",{className:"mt-4 space-y-4",children:[u.slice().sort((ae,se)=>(se.occupancy??0)-(ae.occupancy??0)).slice(0,3).map(ae=>{var se,ie,ge;return E.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[E.jsxs("div",{className:"flex items-center justify-between text-sm text-slate-200/90",children:[E.jsx("span",{className:"font-semibold text-white",children:ae.name}),E.jsx("span",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:ae.occupancy!=null?`${Math.round(ae.occupancy*100)}%`:"—"})]}),E.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-slate-400",children:[E.jsxs("span",{children:["Available: ",((se=ae.seats)==null?void 0:se.available)??0]}),E.jsxs("span",{children:["Sold: ",((ie=ae.seats)==null?void 0:ie.sold)??0]}),E.jsxs("span",{children:["Reserved: ",((ge=ae.seats)==null?void 0:ge.reserved)??0]})]})]},ae.id)}),u.length===0&&E.jsx("p",{className:"text-sm text-slate-300/80",children:"No events found."})]})]}),E.jsxs("div",{className:"glass-card flex h-full flex-col justify-between gap-6 p-6",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("p",{className:"glass-section-label",children:"Realtime insights"}),E.jsx("h3",{className:"text-lg font-semibold text-white",children:"Check-in velocity"}),E.jsx("p",{className:"text-sm text-slate-200/80",children:"Live check-ins for the last hour (5-minute cadence). Use this to anticipate entrance staffing."})]}),E.jsxs("div",{className:"flex flex-col gap-4",children:[E.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:E.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm text-slate-200/80",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Last 5 minutes"}),E.jsx("p",{className:"mt-1 text-2xl font-semibold text-white",children:b.lastFiveMinutes??0})]}),E.jsxs("div",{children:[E.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Last hour"}),E.jsx("p",{className:"mt-1 text-2xl font-semibold text-white",children:b.lastHour??0})]})]})}),E.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:E.jsx(em,{data:b.history??[]})})]})]})]})]})}const ch="http://localhost:4000",f1={id:null,name:"",description:"",starts_at:"",ends_at:"",capacity:"",posterFile:null,posterPreview:null,posterUrl:null,removePoster:!1};function sm(){var z,F,U;const[e,n]=P.useState([]),[s,l]=P.useState(!1),[u,d]=P.useState(!1),[x,w]=P.useState(f1),y=P.useRef(null),p=P.useRef(null),{snapshot:N}=lh(),S=(N==null?void 0:N.events)??[],O=P.useMemo(()=>{const M={};return S.forEach($=>{M[$.id]=$}),M},[S]),B=(N==null?void 0:N.totals)??null,Y=P.useCallback(async()=>{l(!0);try{const M=await Jn("/api/admin/events");n(Array.isArray(M)?M:[])}catch(M){console.error(M),alert(M.message||"Failed to load events"),n([])}finally{l(!1)}},[]);P.useEffect(()=>{Y()},[Y]),P.useEffect(()=>()=>{p.current&&URL.revokeObjectURL(p.current)},[]);const j=M=>{var fe;const $=(fe=M.target.files)==null?void 0:fe[0];if(!$)return;p.current&&URL.revokeObjectURL(p.current);const ee=URL.createObjectURL($);p.current=ee,w(Ee=>({...Ee,posterFile:$,posterPreview:ee,posterUrl:null,removePoster:!1}))},q=()=>{p.current&&(URL.revokeObjectURL(p.current),p.current=null),w(f1),y.current&&(y.current.value="")},R=M=>{p.current&&(URL.revokeObjectURL(p.current),p.current=null);const $=M.starts_at||M.performance_at,ee=M.ends_at;w({id:M.id,name:M.name??"",description:M.description??"",starts_at:h1($),ends_at:h1(ee),capacity:M.capacity??"",posterFile:null,posterPreview:uh(M.poster_url),posterUrl:M.poster_url??null,removePoster:!1}),y.current&&(y.current.value="")},b=()=>{p.current&&(URL.revokeObjectURL(p.current),p.current=null),w(M=>({...M,posterFile:null,posterPreview:null,posterUrl:null,removePoster:!0})),y.current&&(y.current.value="")},T=async M=>{if(M.preventDefault(),!x.name.trim()){alert("Event name is required");return}d(!0);try{const $=new FormData;$.append("name",x.name.trim()),$.append("description",x.description),x.starts_at&&$.append("starts_at",x.starts_at),x.ends_at&&$.append("ends_at",x.ends_at),x.capacity!==""&&$.append("capacity",Number(x.capacity)),x.posterFile&&$.append("poster",x.posterFile),x.removePoster&&!x.posterFile&&$.append("poster_url","");const ee=x.id?"PUT":"POST",fe=x.id?`/api/admin/events/${x.id}`:"/api/admin/events";await Jn(fe,{method:ee,body:$}),await Y(),q(),alert(`Event ${x.id?"updated":"created"} successfully`)}catch($){console.error($),alert($.message||"Failed to save event")}finally{d(!1)}},L=P.useMemo(()=>[...e].sort((M,$)=>{const ee=new Date(M.starts_at||M.performance_at||M.created_at||0).getTime();return new Date($.starts_at||$.performance_at||$.created_at||0).getTime()-ee}),[e]),Z=!!x.id,K=P.useCallback((M,$)=>{if(!M||!["csv","xlsx","pdf"].includes($))return;const fe=`${ch}/api/admin/events/${M}/attendees/export.${$}`,Ee=document.createElement("a");Ee.href=fe,Ee.target="_blank",Ee.rel="noopener",document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee)},[]);return E.jsxs("div",{className:"mx-auto flex max-w-7xl flex-col gap-8",children:[E.jsx("section",{className:"glass-panel px-6 py-6",children:E.jsxs("div",{className:"flex flex-col justify-between gap-6 md:flex-row md:items-center",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("p",{className:"glass-section-label",children:"Event portfolio"}),E.jsx("h2",{className:"page-heading",children:"Manage events"}),E.jsx("p",{className:"page-subheading max-w-2xl",children:"Publish new events, update schedules, and oversee collateral with live occupancy and attendance data to guide your campaigns."})]}),E.jsxs("div",{className:"flex flex-col items-start gap-3 md:flex-row md:items-center",children:[E.jsxs("span",{className:"rounded-full border border-white/10 bg-white/5 px-4 py-2 text-xs font-semibold uppercase tracking-[0.35em] text-slate-200/80",children:["Live events · ",S.length]}),E.jsxs("button",{type:"button",onClick:q,className:"primary-button",children:[E.jsx(Lp,{className:"h-4 w-4"}),"New event"]})]})]})}),E.jsxs("section",{className:"grid gap-5 md:grid-cols-4",children:[E.jsx(Zt,{label:"Events online",value:S.length,accent:"bg-gradient-to-r from-sky-500 via-indigo-500 to-purple-500"}),E.jsx(Zt,{label:"Tickets sold",value:(((z=B==null?void 0:B.tickets)==null?void 0:z.total)??0)-(((F=B==null?void 0:B.tickets)==null?void 0:F.cancelled)??0),accent:"bg-gradient-to-r from-purple-500 via-violet-500 to-fuchsia-500"}),E.jsx(Zt,{label:"Check-ins (hour)",value:((U=B==null?void 0:B.checkIns)==null?void 0:U.lastHour)??0,accent:"bg-gradient-to-r from-emerald-400 via-teal-400 to-cyan-400"}),E.jsx(Zt,{label:"Revenue",value:`₱${((B==null?void 0:B.revenue)??0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,accent:"bg-gradient-to-r from-amber-400 via-orange-500 to-rose-500"})]}),E.jsxs("section",{className:"grid gap-6 lg:grid-cols-[1.7fr_1.1fr]",children:[E.jsx("div",{className:"space-y-4",children:s?E.jsx("div",{className:"glass-card flex h-40 items-center justify-center text-sm text-slate-200/80",children:"Loading events…"}):L.length===0?E.jsx("div",{className:"glass-card flex h-40 items-center justify-center text-sm text-slate-200/80",children:"No events yet. Create your first event using the form."}):E.jsx("div",{className:"grid gap-4 md:grid-cols-1",children:L.map(M=>E.jsx(om,{event:M,analytics:O[M.id],onEdit:R,onExport:K,isActive:x.id===M.id},M.id))})}),E.jsxs("div",{className:"glass-panel space-y-5 px-6 py-6",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("h3",{className:"text-lg font-semibold tracking-tight text-white",children:Z?"Update event":"Create new event"}),Z&&E.jsx("button",{type:"button",onClick:q,className:"text-xs font-semibold text-sky-300 hover:underline",children:"Cancel edit"})]}),E.jsxs("form",{onSubmit:T,className:"space-y-5",children:[E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"input-label",htmlFor:"event-name",children:"Event name"}),E.jsx("input",{id:"event-name",type:"text",value:x.name,onChange:M=>w($=>({...$,name:M.target.value})),className:"input-field",placeholder:"e.g. CCIS Recognition Night",required:!0})]}),E.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"input-label",htmlFor:"event-start",children:"Starts"}),E.jsx("input",{id:"event-start",type:"datetime-local",value:x.starts_at,onChange:M=>w($=>({...$,starts_at:M.target.value})),className:"input-field"})]}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"input-label",htmlFor:"event-end",children:"Ends"}),E.jsx("input",{id:"event-end",type:"datetime-local",value:x.ends_at,onChange:M=>w($=>({...$,ends_at:M.target.value})),className:"input-field"})]})]}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"input-label",htmlFor:"event-capacity",children:"Capacity"}),E.jsx("input",{id:"event-capacity",type:"number",min:"0",value:x.capacity,onChange:M=>w($=>({...$,capacity:M.target.value})),className:"input-field",placeholder:"1196"})]}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("label",{className:"input-label",htmlFor:"event-description",children:"Description"}),E.jsx("textarea",{id:"event-description",rows:"3",value:x.description,onChange:M=>w($=>({...$,description:M.target.value})),className:"input-field",placeholder:"Highlight key details attendees should know."})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("span",{className:"input-label",children:"Poster"}),E.jsxs("div",{className:"flex items-start gap-4",children:[E.jsx("div",{className:"flex h-32 w-24 items-center justify-center overflow-hidden rounded-xl border border-dashed border-white/30 bg-white/5",children:x.posterPreview?E.jsx("img",{src:x.posterPreview,alt:"Event poster",className:"h-full w-full object-cover"}):E.jsx(Pp,{className:"h-10 w-10 text-slate-400"})}),E.jsxs("div",{className:"flex-1 space-y-3 text-sm text-slate-200/90",children:[E.jsx("input",{ref:y,type:"file",accept:"image/*",onChange:j,className:"block w-full text-sm text-slate-200 file:mr-4 file:rounded-xl file:border-0 file:bg-gradient-to-r file:from-sky-500 file:via-indigo-500 file:to-purple-500 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-white hover:file:brightness-110"}),E.jsx("p",{className:"text-xs text-slate-400",children:"Maximum size 5MB. JPG or PNG recommended."}),(x.posterPreview||x.posterUrl)&&E.jsx("button",{type:"button",onClick:b,className:"text-xs font-semibold text-rose-300 hover:underline",children:"Remove poster"})]})]})]}),E.jsx("button",{type:"submit",disabled:u,className:"primary-button w-full disabled:opacity-60",children:u?E.jsxs(E.Fragment,{children:[E.jsx(Np,{className:"h-4 w-4 animate-spin"}),"Saving…"]}):E.jsxs(E.Fragment,{children:[E.jsx(ih,{className:"h-4 w-4"}),Z?"Update event":"Create event"]})})]})]})]})]})}function om({event:e,onEdit:n,onExport:s,isActive:l,analytics:u}){const d=g1(e.starts_at||e.performance_at),x=g1(e.ends_at),w=uh(e.poster_url),y=(u==null?void 0:u.seats)??{available:null,reserved:null,sold:null},p=(u==null?void 0:u.tickets)??{active:null,used:null,cancelled:null,revenue:null},N=(u==null?void 0:u.checkIns)??{lastFiveMinutes:null,lastHour:null},S=(u==null?void 0:u.occupancy)!=null?Math.round(u.occupancy*100):null,O=S!=null?`${Math.max(0,Math.min(S,100))}%`:"0%",B=S!=null?`${S}% full`:"No live occupancy data";return E.jsxs("div",{className:`glass-card relative flex h-full flex-col gap-6 p-6 transition duration-200 hover:border-white/20 hover:shadow-xl ${l?"ring-2 ring-sky-400/40":""}`,children:[E.jsxs("div",{className:"flex flex-col gap-5 sm:flex-row sm:items-start",children:[E.jsx("div",{className:"w-full shrink-0 overflow-hidden rounded-2xl border border-white/10 bg-white/5 sm:w-36",children:w?E.jsx("img",{src:w,alt:`${e.name} poster`,className:"h-full w-full object-cover"}):E.jsx("div",{className:"flex h-full w-full items-center justify-center bg-gradient-to-br from-slate-500/40 to-slate-900/20 text-[0.65rem] uppercase tracking-[0.4em] text-slate-200/80",children:"Poster"})}),E.jsxs("div",{className:"flex-1 space-y-3",children:[E.jsxs("div",{className:"space-y-1",children:[E.jsx("h4",{className:"text-xl font-semibold tracking-tight text-white",children:e.name}),E.jsxs("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-300/80",children:["Capacity · ",e.capacity??"—"]})]}),E.jsxs("div",{className:"grid gap-2 text-sm text-slate-200/85 sm:grid-cols-2",children:[d&&E.jsx(d1,{indicator:"bg-sky-400",label:"Starts",value:d}),x&&E.jsx(d1,{indicator:"bg-purple-400",label:"Ends",value:x})]}),e.description&&E.jsx("p",{className:"text-sm leading-relaxed text-slate-200/90",children:e.description.length>180?`${e.description.slice(0,177)}…`:e.description})]})]}),E.jsxs("div",{className:"space-y-4 rounded-3xl border border-white/10 bg-gradient-to-br from-white/8 via-white/5 to-white/0 p-5 backdrop-blur-sm",children:[E.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-[0.65rem] uppercase tracking-[0.3em] text-slate-200/70",children:"Live metrics"}),E.jsx("h5",{className:"text-lg font-semibold text-white",children:B})]}),E.jsx("div",{className:"w-full max-w-xs self-start sm:self-auto",children:E.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-slate-600/40",children:E.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-emerald-400 via-sky-400 to-indigo-400 transition-all duration-500",style:{width:O}})})})]}),E.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 xl:grid-cols-3",children:[E.jsx(Wn,{label:"Seats sold",value:fr(y.sold),tone:"from-emerald-400/20 to-emerald-500/10"}),E.jsx(Wn,{label:"Seats reserved",value:fr(y.reserved),tone:"from-sky-400/20 to-sky-500/10"}),E.jsx(Wn,{label:"Seats open",value:fr(y.available),tone:"from-slate-400/20 to-slate-500/10"}),E.jsx(Wn,{label:"Tickets used",value:fr(p.used),tone:"from-indigo-400/20 to-indigo-500/10"}),E.jsx(Wn,{label:"Tickets active",value:fr(p.active),tone:"from-fuchsia-400/20 to-fuchsia-500/10"}),E.jsx(Wn,{label:"Cancelled",value:fr(p.cancelled),tone:"from-rose-400/20 to-rose-500/10"}),E.jsx(Wn,{label:"Check-ins (5m)",value:fr(N.lastFiveMinutes),tone:"from-teal-400/20 to-teal-500/10"}),E.jsx(Wn,{label:"Check-ins (1h)",value:fr(N.lastHour),tone:"from-cyan-400/20 to-cyan-500/10"}),E.jsx(Wn,{label:"Revenue",value:lm(p.revenue),tone:"from-amber-400/20 to-amber-500/10"})]})]}),E.jsxs("div",{className:"mt-auto flex flex-col gap-3 border-t border-white/10 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[E.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[E.jsx(Tl,{label:"CSV",onClick:()=>s(e.id,"csv")}),E.jsx(Tl,{label:"Excel",onClick:()=>s(e.id,"xlsx")}),E.jsx(Tl,{label:"PDF",onClick:()=>s(e.id,"pdf")})]}),E.jsxs("button",{type:"button",onClick:()=>n(e),className:"secondary-button h-10 px-4 py-2 text-xs uppercase tracking-[0.2em]",children:[E.jsx(ih,{className:"h-4 w-4"}),"Edit"]})]})]})}function Wn({label:e,value:n,tone:s}){return E.jsxs("div",{className:`group rounded-2xl border border-white/10 bg-white/5 p-4 shadow-sm backdrop-blur-sm transition hover:-translate-y-[1px] hover:border-white/20 hover:shadow-lg ${s?`bg-gradient-to-br ${s}`:""}`,children:[E.jsx("p",{className:"text-[0.6rem] uppercase tracking-[0.28em] text-white/70",children:e}),E.jsx("p",{className:"mt-2 text-2xl font-semibold tracking-tight text-white group-hover:text-white",children:n})]})}function d1({indicator:e,label:n,value:s}){return E.jsxs("div",{className:"flex items-start gap-3 rounded-2xl border border-white/5 bg-white/5 p-3 text-xs text-slate-200/90",children:[E.jsx("span",{className:`mt-1 inline-flex h-2 w-2 rounded-full ${e}`}),E.jsxs("div",{className:"space-y-1",children:[E.jsx("p",{className:"uppercase tracking-[0.35em] text-[0.58rem] text-white/60",children:n}),E.jsx("p",{className:"text-sm font-medium text-white/90",children:s})]})]})}function Tl({label:e,onClick:n}){return E.jsxs("button",{type:"button",onClick:n,className:"muted-button h-10 px-4 py-2 text-xs uppercase tracking-[0.2em]",children:[E.jsx(Sp,{className:"h-4 w-4"}),e]})}function h1(e){if(!e)return"";const n=new Date(e);if(Number.isNaN(n.getTime()))return"";const s=y=>`${y}`.padStart(2,"0"),l=n.getFullYear(),u=s(n.getMonth()+1),d=s(n.getDate()),x=s(n.getHours()),w=s(n.getMinutes());return`${l}-${u}-${d}T${x}:${w}`}function g1(e){if(!e)return"";const n=new Date(e);return Number.isNaN(n.getTime())?"":n.toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}const am=new Intl.NumberFormat(void 0,{notation:"compact",maximumFractionDigits:1});function fr(e){if(e==null)return"—";const n=Number(e);return Number.isFinite(n)?n===0?"0":am.format(n):"—"}function lm(e){if(e==null)return"—";const n=Number(e);return Number.isFinite(n)?`₱${n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`:"—"}function uh(e){return e?/^https?:\/\//i.test(e)?e:`${ch}${e}`:null}var ce;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ce||(ce={}));var x1=new Map([[ce.QR_CODE,"QR_CODE"],[ce.AZTEC,"AZTEC"],[ce.CODABAR,"CODABAR"],[ce.CODE_39,"CODE_39"],[ce.CODE_93,"CODE_93"],[ce.CODE_128,"CODE_128"],[ce.DATA_MATRIX,"DATA_MATRIX"],[ce.MAXICODE,"MAXICODE"],[ce.ITF,"ITF"],[ce.EAN_13,"EAN_13"],[ce.EAN_8,"EAN_8"],[ce.PDF_417,"PDF_417"],[ce.RSS_14,"RSS_14"],[ce.RSS_EXPANDED,"RSS_EXPANDED"],[ce.UPC_A,"UPC_A"],[ce.UPC_E,"UPC_E"],[ce.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),p1;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(p1||(p1={}));function cm(e){return Object.values(ce).includes(e)}var ha;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(ha||(ha={}));var um=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[ha.SCAN_TYPE_CAMERA,ha.SCAN_TYPE_FILE],e}(),fh=function(){function e(n,s){this.format=n,this.formatName=s}return e.prototype.toString=function(){return this.formatName},e.create=function(n){if(!x1.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new e(n,x1.get(n))},e}(),m1=function(){function e(){}return e.createFromText=function(n){var s={text:n};return{decodedText:n,result:s}},e.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},e}(),_c;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(_c||(_c={}));var fm=function(){function e(){}return e.createFrom=function(n){return{errorMessage:n,type:_c.UNKWOWN_ERROR}},e}(),dm=function(){function e(n){this.verbose=n}return e.prototype.log=function(n){this.verbose&&console.log(n)},e.prototype.warn=function(n){this.verbose&&console.warn(n)},e.prototype.logError=function(n,s){(this.verbose||s===!0)&&console.error(n)},e.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},e}();function zn(e){return typeof e>"u"||e===null}var Ni=function(){function e(){}return e.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},e.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),dh=function(){function e(){}return e.isMediaStreamConstraintsValid=function(n,s){if(typeof n!="object"){var l=typeof n;return s.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(l,"."),!0),!1}for(var u=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(u),x=Object.keys(n),w=0,y=x;w<y.length;w++){var p=y[w];if(d.has(p))return s.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},e}(),Tc={exports:{}};(function(e,n){(function(s,l){l(n)})(rs,function(s){function l(C){return C==null}var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,t){C.__proto__=t}||function(C,t){for(var r in t)t.hasOwnProperty(r)&&(C[r]=t[r])};function d(C,t){u(C,t);function r(){this.constructor=C}C.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function x(C,t){var r=Object.setPrototypeOf;r?r(C,t):C.__proto__=t}function w(C,t){t===void 0&&(t=C.constructor);var r=Error.captureStackTrace;r&&r(C,t)}var y=function(C){d(t,C);function t(r){var i=this.constructor,o=C.call(this,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1}),x(o,i.prototype),w(o),o}return t}(Error);class p extends y{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}p.kind="Exception";class N extends p{}N.kind="ArgumentException";class S extends p{}S.kind="IllegalArgumentException";class O{constructor(t){if(this.binarizer=t,t===null)throw new S("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,r){return this.binarizer.getBlackRow(t,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,r,i,o){const a=this.binarizer.getLuminanceSource().crop(t,r,i,o);return new O(this.binarizer.createBinarizer(a))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new O(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new O(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class B extends p{static getChecksumInstance(){return new B}}B.kind="ChecksumException";class Y{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(t,r,i,o,a){for(;a--;)i[o++]=t[r++]}static currentTimeMillis(){return Date.now()}}class q extends p{}q.kind="IndexOutOfBoundsException";class R extends q{constructor(t=void 0,r=void 0){super(r),this.index=t,this.message=r}}R.kind="ArrayIndexOutOfBoundsException";class b{static fill(t,r){for(let i=0,o=t.length;i<o;i++)t[i]=r}static fillWithin(t,r,i,o){b.rangeCheck(t.length,r,i);for(let a=r;a<i;a++)t[a]=o}static rangeCheck(t,r,i){if(r>i)throw new S("fromIndex("+r+") > toIndex("+i+")");if(r<0)throw new R(r);if(i>t)throw new R(i)}static asList(...t){return t}static create(t,r,i){return Array.from({length:t}).map(a=>Array.from({length:r}).fill(i))}static createInt32Array(t,r,i){return Array.from({length:t}).map(a=>Int32Array.from({length:r}).fill(i))}static equals(t,r){if(!t||!r||!t.length||!r.length||t.length!==r.length)return!1;for(let i=0,o=t.length;i<o;i++)if(t[i]!==r[i])return!1;return!0}static hashCode(t){if(t===null)return 0;let r=1;for(const i of t)r=31*r+i;return r}static fillUint8Array(t,r){for(let i=0;i!==t.length;i++)t[i]=r}static copyOf(t,r){return t.slice(0,r)}static copyOfUint8Array(t,r){if(t.length<=r){const i=new Uint8Array(r);return i.set(t),i}return t.slice(0,r)}static copyOfRange(t,r,i){const o=i-r,a=new Int32Array(o);return j.arraycopy(t,r,a,0,o),a}static binarySearch(t,r,i){i===void 0&&(i=b.numberComparator);let o=0,a=t.length-1;for(;o<=a;){const c=a+o>>1,f=i(r,t[c]);if(f>0)o=c+1;else if(f<0)a=c-1;else return c}return-o-1}static numberComparator(t,r){return t-r}}class T{static numberOfTrailingZeros(t){let r;if(t===0)return 32;let i=31;return r=t<<16,r!==0&&(i-=16,t=r),r=t<<8,r!==0&&(i-=8,t=r),r=t<<4,r!==0&&(i-=4,t=r),r=t<<2,r!==0&&(i-=2,t=r),i-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let r=1;return t>>>16||(r+=16,t<<=16),t>>>24||(r+=8,t<<=8),t>>>28||(r+=4,t<<=4),t>>>30||(r+=2,t<<=2),r-=t>>>31,r}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,r){return Math.trunc(t/r)}static parseInt(t,r=void 0){return parseInt(t,r)}}T.MIN_VALUE_32_BITS=-2147483648,T.MAX_VALUE=Number.MAX_SAFE_INTEGER;class L{constructor(t,r){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,r==null?this.bits=L.makeArray(t):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const r=L.makeArray(t);j.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const r=this.size;if(t>=r)return r;const i=this.bits;let o=Math.floor(t/32),a=i[o];a&=~((1<<(t&31))-1);const c=i.length;for(;a===0;){if(++o===c)return r;a=i[o]}const f=o*32+T.numberOfTrailingZeros(a);return f>r?r:f}getNextUnset(t){const r=this.size;if(t>=r)return r;const i=this.bits;let o=Math.floor(t/32),a=~i[o];a&=~((1<<(t&31))-1);const c=i.length;for(;a===0;){if(++o===c)return r;a=~i[o]}const f=o*32+T.numberOfTrailingZeros(a);return f>r?r:f}setBulk(t,r){this.bits[Math.floor(t/32)]=r}setRange(t,r){if(r<t||t<0||r>this.size)throw new S;if(r===t)return;r--;const i=Math.floor(t/32),o=Math.floor(r/32),a=this.bits;for(let c=i;c<=o;c++){const f=c>i?0:t&31,g=(2<<(c<o?31:r&31))-(1<<f);a[c]|=g}}clear(){const t=this.bits.length,r=this.bits;for(let i=0;i<t;i++)r[i]=0}isRange(t,r,i){if(r<t||t<0||r>this.size)throw new S;if(r===t)return!0;r--;const o=Math.floor(t/32),a=Math.floor(r/32),c=this.bits;for(let f=o;f<=a;f++){const h=f>o?0:t&31,m=(2<<(f<a?31:r&31))-(1<<h)&4294967295;if((c[f]&m)!==(i?m:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,r){if(r<0||r>32)throw new S("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let i=r;i>0;i--)this.appendBit((t>>i-1&1)===1)}appendBitArray(t){const r=t.size;this.ensureCapacity(this.size+r);for(let i=0;i<r;i++)this.appendBit(t.get(i))}xor(t){if(this.size!==t.size)throw new S("Sizes don't match");const r=this.bits;for(let i=0,o=r.length;i<o;i++)r[i]^=t.bits[i]}toBytes(t,r,i,o){for(let a=0;a<o;a++){let c=0;for(let f=0;f<8;f++)this.get(t)&&(c|=1<<7-f),t++;r[i+a]=c}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),i=r+1,o=this.bits;for(let a=0;a<i;a++){let c=o[a];c=c>>1&1431655765|(c&1431655765)<<1,c=c>>2&858993459|(c&858993459)<<2,c=c>>4&252645135|(c&252645135)<<4,c=c>>8&16711935|(c&16711935)<<8,c=c>>16&65535|(c&65535)<<16,t[r-a]=c}if(this.size!==i*32){const a=i*32-this.size;let c=t[0]>>>a;for(let f=1;f<i;f++){const h=t[f];c|=h<<32-a,t[f-1]=c,c=h>>>a}t[i-1]=c}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof L))return!1;const r=t;return this.size===r.size&&b.equals(this.bits,r.bits)}hashCode(){return 31*this.size+b.hashCode(this.bits)}toString(){let t="";for(let r=0,i=this.size;r<i;r++)r&7||(t+=" "),t+=this.get(r)?"X":".";return t}clone(){return new L(this.size,this.bits.slice())}}var Z;(function(C){C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Z||(Z={}));var K=Z;class z extends p{static getFormatInstance(){return new z}}z.kind="FormatException";var F;(function(C){C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR"})(F||(F={}));class U{constructor(t,r,i,...o){this.valueIdentifier=t,this.name=i,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=o,U.VALUE_IDENTIFIER_TO_ECI.set(t,this),U.NAME_TO_ECI.set(i,this);const a=this.values;for(let c=0,f=a.length;c!==f;c++){const h=a[c];U.VALUES_TO_ECI.set(h,this)}for(const c of o)U.NAME_TO_ECI.set(c,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new z("incorect value");const r=U.VALUES_TO_ECI.get(t);if(r===void 0)throw new z("incorect value");return r}static getCharacterSetECIByName(t){const r=U.NAME_TO_ECI.get(t);if(r===void 0)throw new z("incorect value");return r}equals(t){if(!(t instanceof U))return!1;const r=t;return this.getName()===r.getName()}}U.VALUE_IDENTIFIER_TO_ECI=new Map,U.VALUES_TO_ECI=new Map,U.NAME_TO_ECI=new Map,U.Cp437=new U(F.Cp437,Int32Array.from([0,2]),"Cp437"),U.ISO8859_1=new U(F.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),U.ISO8859_2=new U(F.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),U.ISO8859_3=new U(F.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),U.ISO8859_4=new U(F.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),U.ISO8859_5=new U(F.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),U.ISO8859_6=new U(F.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),U.ISO8859_7=new U(F.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),U.ISO8859_8=new U(F.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),U.ISO8859_9=new U(F.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),U.ISO8859_10=new U(F.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),U.ISO8859_11=new U(F.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),U.ISO8859_13=new U(F.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),U.ISO8859_14=new U(F.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),U.ISO8859_15=new U(F.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),U.ISO8859_16=new U(F.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),U.SJIS=new U(F.SJIS,20,"SJIS","Shift_JIS"),U.Cp1250=new U(F.Cp1250,21,"Cp1250","windows-1250"),U.Cp1251=new U(F.Cp1251,22,"Cp1251","windows-1251"),U.Cp1252=new U(F.Cp1252,23,"Cp1252","windows-1252"),U.Cp1256=new U(F.Cp1256,24,"Cp1256","windows-1256"),U.UnicodeBigUnmarked=new U(F.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),U.UTF8=new U(F.UTF8,26,"UTF8","UTF-8"),U.ASCII=new U(F.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),U.Big5=new U(F.Big5,28,"Big5"),U.GB18030=new U(F.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),U.EUC_KR=new U(F.EUC_KR,30,"EUC_KR","EUC-KR");class M extends p{}M.kind="UnsupportedOperationException";class ${static decode(t,r){const i=this.encodingName(r);return this.customDecoder?this.customDecoder(t,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(t,i):new TextDecoder(i).decode(t)}static shouldDecodeOnFallback(t){return!$.isBrowser()&&t==="ISO-8859-1"}static encode(t,r){const i=this.encodingName(r);return this.customEncoder?this.customEncoder(t,i):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof U?t:U.getCharacterSetECIByName(t)}static decodeFallback(t,r){const i=this.encodingCharacterSet(r);if($.isDecodeFallbackSupported(i)){let o="";for(let a=0,c=t.length;a<c;a++){let f=t[a].toString(16);f.length<2&&(f="0"+f),o+="%"+f}return decodeURIComponent(o)}if(i.equals(U.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new M(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(U.UTF8)||t.equals(U.ISO8859_1)||t.equals(U.ASCII)}static encodeFallback(t){const i=btoa(unescape(encodeURIComponent(t))).split(""),o=[];for(let a=0;a<i.length;a++)o.push(i[a].charCodeAt(0));return new Uint8Array(o)}}class ee{static castAsNonUtf8Char(t,r=null){const i=r?r.getName():this.ISO88591;return $.decode(new Uint8Array([t]),i)}static guessEncoding(t,r){if(r!=null&&r.get(K.CHARACTER_SET)!==void 0)return r.get(K.CHARACTER_SET).toString();const i=t.length;let o=!0,a=!0,c=!0,f=0,h=0,g=0,m=0,v=0,A=0,_=0,k=0,D=0,V=0,X=0;const ne=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let re=0;re<i&&(o||a||c);re++){const J=t[re]&255;c&&(f>0?J&128?f--:c=!1:J&128&&(J&64?(f++,J&32?(f++,J&16?(f++,J&8?c=!1:m++):g++):h++):c=!1)),o&&(J>127&&J<160?o=!1:J>159&&(J<192||J===215||J===247)&&X++),a&&(v>0?J<64||J===127||J>252?a=!1:v--:J===128||J===160||J>239?a=!1:J>160&&J<224?(A++,k=0,_++,_>D&&(D=_)):J>127?(v++,_=0,k++,k>V&&(V=k)):(_=0,k=0))}return c&&f>0&&(c=!1),a&&v>0&&(a=!1),c&&(ne||h+g+m>0)?ee.UTF8:a&&(ee.ASSUME_SHIFT_JIS||D>=3||V>=3)?ee.SHIFT_JIS:o&&a?D===2&&A===2||X*10>=i?ee.SHIFT_JIS:ee.ISO88591:o?ee.ISO88591:a?ee.SHIFT_JIS:c?ee.UTF8:ee.PLATFORM_DEFAULT_ENCODING}static format(t,...r){let i=-1;function o(c,f,h,g,m,v){if(c==="%%")return"%";if(r[++i]===void 0)return;c=g?parseInt(g.substr(1)):void 0;let A=m?parseInt(m.substr(1)):void 0,_;switch(v){case"s":_=r[i];break;case"c":_=r[i][0];break;case"f":_=parseFloat(r[i]).toFixed(c);break;case"p":_=parseFloat(r[i]).toPrecision(c);break;case"e":_=parseFloat(r[i]).toExponential(c);break;case"x":_=parseInt(r[i]).toString(A||16);break;case"d":_=parseFloat(parseInt(r[i],A||10).toPrecision(c)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(A);let k=parseInt(h),D=h&&h[0]+""=="0"?"0":" ";for(;_.length<k;)_=f!==void 0?_+D:D+_;return _}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(a,o)}static getBytes(t,r){return $.encode(t,r)}static getCharCode(t,r=0){return t.charCodeAt(r)}static getCharAt(t){return String.fromCharCode(t)}}ee.SHIFT_JIS=U.SJIS.getName(),ee.GB2312="GB2312",ee.ISO88591=U.ISO8859_1.getName(),ee.EUC_JP="EUC_JP",ee.UTF8=U.UTF8.getName(),ee.PLATFORM_DEFAULT_ENCODING=ee.UTF8,ee.ASSUME_SHIFT_JIS=!1;class fe{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=ee.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,r,i){for(let o=r;r<r+i;o++)this.append(t[o]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+1)}substring(t,r){return this.value.substring(t,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,r){this.value=this.value.substr(0,t)+r+this.value.substr(t+r.length)}}class Ee{constructor(t,r,i,o){if(this.width=t,this.height=r,this.rowSize=i,this.bits=o,r==null&&(r=t),this.height=r,t<1||r<1)throw new S("Both dimensions must be greater than 0");i==null&&(i=Math.floor((t+31)/32)),this.rowSize=i,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const r=t.length,i=t[0].length,o=new Ee(i,r);for(let a=0;a<r;a++){const c=t[a];for(let f=0;f<i;f++)c[f]&&o.set(f,a)}return o}static parseFromString(t,r,i){if(t===null)throw new S("stringRepresentation cannot be null");const o=new Array(t.length);let a=0,c=0,f=-1,h=0,g=0;for(;g<t.length;)if(t.charAt(g)===`
`||t.charAt(g)==="\r"){if(a>c){if(f===-1)f=a-c;else if(a-c!==f)throw new S("row lengths do not match");c=a,h++}g++}else if(t.substring(g,g+r.length)===r)g+=r.length,o[a]=!0,a++;else if(t.substring(g,g+i.length)===i)g+=i.length,o[a]=!1,a++;else throw new S("illegal character encountered: "+t.substring(g));if(a>c){if(f===-1)f=a-c;else if(a-c!==f)throw new S("row lengths do not match");h++}const m=new Ee(f,h);for(let v=0;v<a;v++)o[v]&&m.set(Math.floor(v%f),Math.floor(v/f));return m}get(t,r){const i=r*this.rowSize+Math.floor(t/32);return(this.bits[i]>>>(t&31)&1)!==0}set(t,r){const i=r*this.rowSize+Math.floor(t/32);this.bits[i]|=1<<(t&31)&4294967295}unset(t,r){const i=r*this.rowSize+Math.floor(t/32);this.bits[i]&=~(1<<(t&31)&4294967295)}flip(t,r){const i=r*this.rowSize+Math.floor(t/32);this.bits[i]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new S("input matrix dimensions do not match");const r=new L(Math.floor(this.width/32)+1),i=this.rowSize,o=this.bits;for(let a=0,c=this.height;a<c;a++){const f=a*i,h=t.getRow(a,r).getBitArray();for(let g=0;g<i;g++)o[f+g]^=h[g]}}clear(){const t=this.bits,r=t.length;for(let i=0;i<r;i++)t[i]=0}setRegion(t,r,i,o){if(r<0||t<0)throw new S("Left and top must be nonnegative");if(o<1||i<1)throw new S("Height and width must be at least 1");const a=t+i,c=r+o;if(c>this.height||a>this.width)throw new S("The region must fit inside the matrix");const f=this.rowSize,h=this.bits;for(let g=r;g<c;g++){const m=g*f;for(let v=t;v<a;v++)h[m+Math.floor(v/32)]|=1<<(v&31)&4294967295}}getRow(t,r){r==null||r.getSize()<this.width?r=new L(this.width):r.clear();const i=this.rowSize,o=this.bits,a=t*i;for(let c=0;c<i;c++)r.setBulk(c*32,o[a+c]);return r}setRow(t,r){j.arraycopy(r.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),r=this.getHeight();let i=new L(t),o=new L(t);for(let a=0,c=Math.floor((r+1)/2);a<c;a++)i=this.getRow(a,i),o=this.getRow(r-1-a,o),i.reverse(),o.reverse(),this.setRow(a,o),this.setRow(r-1-a,i)}getEnclosingRectangle(){const t=this.width,r=this.height,i=this.rowSize,o=this.bits;let a=t,c=r,f=-1,h=-1;for(let g=0;g<r;g++)for(let m=0;m<i;m++){const v=o[g*i+m];if(v!==0){if(g<c&&(c=g),g>h&&(h=g),m*32<a){let A=0;for(;!(v<<31-A&4294967295);)A++;m*32+A<a&&(a=m*32+A)}if(m*32+31>f){let A=31;for(;!(v>>>A);)A--;m*32+A>f&&(f=m*32+A)}}}return f<a||h<c?null:Int32Array.from([a,c,f-a+1,h-c+1])}getTopLeftOnBit(){const t=this.rowSize,r=this.bits;let i=0;for(;i<r.length&&r[i]===0;)i++;if(i===r.length)return null;const o=i/t;let a=i%t*32;const c=r[i];let f=0;for(;!(c<<31-f&4294967295);)f++;return a+=f,Int32Array.from([a,o])}getBottomRightOnBit(){const t=this.rowSize,r=this.bits;let i=r.length-1;for(;i>=0&&r[i]===0;)i--;if(i<0)return null;const o=Math.floor(i/t);let a=Math.floor(i%t)*32;const c=r[i];let f=31;for(;!(c>>>f);)f--;return a+=f,Int32Array.from([a,o])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof Ee))return!1;const r=t;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&b.equals(this.bits,r.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+b.hashCode(this.bits),t}toString(t="X ",r="  ",i=`
`){return this.buildToString(t,r,i)}buildToString(t,r,i){let o=new fe;for(let a=0,c=this.height;a<c;a++){for(let f=0,h=this.width;f<h;f++)o.append(this.get(f,a)?t:r);o.append(i)}return o.toString()}clone(){return new Ee(this.width,this.height,this.rowSize,this.bits.slice())}}class H extends p{static getNotFoundInstance(){return new H}}H.kind="NotFoundException";class ae extends Y{constructor(t){super(t),this.luminances=ae.EMPTY,this.buckets=new Int32Array(ae.LUMINANCE_BUCKETS)}getBlackRow(t,r){const i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new L(o):r.clear(),this.initArrays(o);const a=i.getRow(t,this.luminances),c=this.buckets;for(let h=0;h<o;h++)c[(a[h]&255)>>ae.LUMINANCE_SHIFT]++;const f=ae.estimateBlackPoint(c);if(o<3)for(let h=0;h<o;h++)(a[h]&255)<f&&r.set(h);else{let h=a[0]&255,g=a[1]&255;for(let m=1;m<o-1;m++){const v=a[m+1]&255;(g*4-h-v)/2<f&&r.set(m),h=g,g=v}}return r}getBlackMatrix(){const t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),o=new Ee(r,i);this.initArrays(r);const a=this.buckets;for(let h=1;h<5;h++){const g=Math.floor(i*h/5),m=t.getRow(g,this.luminances),v=Math.floor(r*4/5);for(let A=Math.floor(r/5);A<v;A++){const _=m[A]&255;a[_>>ae.LUMINANCE_SHIFT]++}}const c=ae.estimateBlackPoint(a),f=t.getMatrix();for(let h=0;h<i;h++){const g=h*r;for(let m=0;m<r;m++)(f[g+m]&255)<c&&o.set(m,h)}return o}createBinarizer(t){return new ae(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const r=this.buckets;for(let i=0;i<ae.LUMINANCE_BUCKETS;i++)r[i]=0}static estimateBlackPoint(t){const r=t.length;let i=0,o=0,a=0;for(let m=0;m<r;m++)t[m]>a&&(o=m,a=t[m]),t[m]>i&&(i=t[m]);let c=0,f=0;for(let m=0;m<r;m++){const v=m-o,A=t[m]*v*v;A>f&&(c=m,f=A)}if(o>c){const m=o;o=c,c=m}if(c-o<=r/16)throw new H;let h=c-1,g=-1;for(let m=c-1;m>o;m--){const v=m-o,A=v*v*(c-m)*(i-t[m]);A>g&&(h=m,g=A)}return h<<ae.LUMINANCE_SHIFT}}ae.LUMINANCE_BITS=5,ae.LUMINANCE_SHIFT=8-ae.LUMINANCE_BITS,ae.LUMINANCE_BUCKETS=1<<ae.LUMINANCE_BITS,ae.EMPTY=Uint8ClampedArray.from([0]);class se extends ae{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=se.MINIMUM_DIMENSION&&i>=se.MINIMUM_DIMENSION){const o=t.getMatrix();let a=r>>se.BLOCK_SIZE_POWER;r&se.BLOCK_SIZE_MASK&&a++;let c=i>>se.BLOCK_SIZE_POWER;i&se.BLOCK_SIZE_MASK&&c++;const f=se.calculateBlackPoints(o,a,c,r,i),h=new Ee(r,i);se.calculateThresholdForBlock(o,a,c,r,i,f,h),this.matrix=h}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new se(t)}static calculateThresholdForBlock(t,r,i,o,a,c,f){const h=a-se.BLOCK_SIZE,g=o-se.BLOCK_SIZE;for(let m=0;m<i;m++){let v=m<<se.BLOCK_SIZE_POWER;v>h&&(v=h);const A=se.cap(m,2,i-3);for(let _=0;_<r;_++){let k=_<<se.BLOCK_SIZE_POWER;k>g&&(k=g);const D=se.cap(_,2,r-3);let V=0;for(let ne=-2;ne<=2;ne++){const re=c[A+ne];V+=re[D-2]+re[D-1]+re[D]+re[D+1]+re[D+2]}const X=V/25;se.thresholdBlock(t,k,v,X,o,f)}}}static cap(t,r,i){return t<r?r:t>i?i:t}static thresholdBlock(t,r,i,o,a,c){for(let f=0,h=i*a+r;f<se.BLOCK_SIZE;f++,h+=a)for(let g=0;g<se.BLOCK_SIZE;g++)(t[h+g]&255)<=o&&c.set(r+g,i+f)}static calculateBlackPoints(t,r,i,o,a){const c=a-se.BLOCK_SIZE,f=o-se.BLOCK_SIZE,h=new Array(i);for(let g=0;g<i;g++){h[g]=new Int32Array(r);let m=g<<se.BLOCK_SIZE_POWER;m>c&&(m=c);for(let v=0;v<r;v++){let A=v<<se.BLOCK_SIZE_POWER;A>f&&(A=f);let _=0,k=255,D=0;for(let X=0,ne=m*o+A;X<se.BLOCK_SIZE;X++,ne+=o){for(let re=0;re<se.BLOCK_SIZE;re++){const J=t[ne+re]&255;_+=J,J<k&&(k=J),J>D&&(D=J)}if(D-k>se.MIN_DYNAMIC_RANGE)for(X++,ne+=o;X<se.BLOCK_SIZE;X++,ne+=o)for(let re=0;re<se.BLOCK_SIZE;re++)_+=t[ne+re]&255}let V=_>>se.BLOCK_SIZE_POWER*2;if(D-k<=se.MIN_DYNAMIC_RANGE&&(V=k/2,g>0&&v>0)){const X=(h[g-1][v]+2*h[g][v-1]+h[g-1][v-1])/4;k<X&&(V=X)}h[g][v]=V}}return h}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class ie{constructor(t,r){this.width=t,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,r,i,o){throw new M("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new M("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new M("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let r=new fe;for(let i=0;i<this.height;i++){const o=this.getRow(i,t);for(let a=0;a<this.width;a++){const c=o[a]&255;let f;c<64?f="#":c<128?f="+":c<192?f=".":f=" ",r.append(f)}r.append(`
`)}return r.toString()}}class ge extends ie{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,r){const i=this.delegate.getRow(t,r),o=this.getWidth();for(let a=0;a<o;a++)i[a]=255-(i[a]&255);return i}getMatrix(){const t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r);for(let o=0;o<r;o++)i[o]=255-(t[o]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(t,r,i,o){return new ge(this.delegate.crop(t,r,i,o))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ge(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ge(this.delegate.rotateCounterClockwise45())}}class pe extends ie{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=pe.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const r=t.getContext("2d").getImageData(0,0,t.width,t.height);return pe.toGrayscaleBuffer(r.data,t.width,t.height)}static toGrayscaleBuffer(t,r,i){const o=new Uint8ClampedArray(r*i);for(let a=0,c=0,f=t.length;a<f;a+=4,c++){let h;if(t[a+3]===0)h=255;else{const m=t[a],v=t[a+1],A=t[a+2];h=306*m+601*v+117*A+512>>10}o[c]=h}return o}getRow(t,r){if(t<0||t>=this.getHeight())throw new S("Requested row is outside the image: "+t);const i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,r,i,o){return super.crop(t,r,i,o),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const r=this.getTempCanvasElement(),i=r.getContext("2d"),o=t*pe.DEGREE_TO_RADIANS,a=this.canvas.width,c=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(o))*a+Math.abs(Math.sin(o))*c),h=Math.ceil(Math.abs(Math.sin(o))*a+Math.abs(Math.cos(o))*c);return r.width=f,r.height=h,i.translate(f/2,h/2),i.rotate(o),i.drawImage(this.canvas,a/-2,c/-2),this.buffer=pe.makeBufferFromCanvasImageData(r),this}invert(){return new ge(this)}}pe.DEGREE_TO_RADIANS=Math.PI/180;class Oe{constructor(t,r,i){this.deviceId=t,this.label=r,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ae=(globalThis||rs||self||window||void 0)&&(globalThis||rs||self||window||void 0).__awaiter||function(C,t,r,i){function o(a){return a instanceof r?a:new r(function(c){c(a)})}return new(r||(r=Promise))(function(a,c){function f(m){try{g(i.next(m))}catch(v){c(v)}}function h(m){try{g(i.throw(m))}catch(v){c(v)}}function g(m){m.done?a(m.value):o(m.value).then(f,h)}g((i=i.apply(C,t||[])).next())})};class ln{constructor(t,r=500,i){this.reader=t,this.timeBetweenScansMillis=r,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return Ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const i of t){const o=i.kind==="video"?"videoinput":i.kind;if(o!=="videoinput")continue;const a=i.deviceId||i.id,c=i.label||`Video device ${r.length+1}`,f=i.groupId,h={deviceId:a,label:c,kind:o,groupId:f};r.push(h)}return r})}getVideoInputDevices(){return Ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new Oe(r.deviceId,r.label))})}findDeviceById(t){return Ae(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(i=>i.deviceId===t):null})}decodeFromInputVideoDevice(t,r){return Ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,r)})}decodeOnceFromVideoDevice(t,r){return Ae(this,void 0,void 0,function*(){this.reset();let i;t?i={deviceId:{exact:t}}:i={facingMode:"environment"};const o={video:i};return yield this.decodeOnceFromConstraints(o,r)})}decodeOnceFromConstraints(t,r){return Ae(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(i,r)})}decodeOnceFromStream(t,r){return Ae(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(t,r);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(t,r,i){return Ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,r,i)})}decodeFromVideoDevice(t,r,i){return Ae(this,void 0,void 0,function*(){let o;t?o={deviceId:{exact:t}}:o={facingMode:"environment"};const a={video:o};return yield this.decodeFromConstraints(a,r,i)})}decodeFromConstraints(t,r,i){return Ae(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(o,r,i)})}decodeFromStream(t,r,i){return Ae(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(t,r);return yield this.decodeContinuously(o,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,r){return Ae(this,void 0,void 0,function*(){const i=this.prepareVideoElement(r);return this.addVideoSource(i,t),this.videoElement=i,this.stream=t,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(t){return new Promise((r,i)=>this.playVideoOnLoad(t,()=>r()))}playVideoOnLoad(t,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",r),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return Ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,r){const i=document.getElementById(t);if(!i)throw new N(`element with id '${t}' not found`);if(i.nodeName.toLowerCase()!==r.toLowerCase())throw new N(`element with id '${t}' must be an ${r} element`);return i}decodeFromImage(t,r){if(!t&&!r)throw new N("either imageElement with a src set or an url must be provided");return r&&!t?this.decodeFromImageUrl(r):this.decodeFromImageElement(t)}decodeFromVideo(t,r){if(!t&&!r)throw new N("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,r,i){if(t===void 0&&r===void 0)throw new N("Either an element with a src set or an URL must be provided");return r&&!t?this.decodeFromVideoUrlContinuously(r,i):this.decodeFromVideoElementContinuously(t,i)}decodeFromImageElement(t){if(!t)throw new N("An image element must be provided.");this.reset();const r=this.prepareImageElement(t);this.imageElement=r;let i;return this.isImageLoaded(r)?i=this.decodeOnce(r,!1,!0):i=this._decodeOnLoadImage(r),i}decodeFromVideoElement(t){const r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(t,r){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(i,r)}_decodeFromVideoElementSetup(t){if(!t)throw new N("A video element must be provided.");this.reset();const r=this.prepareVideoElement(t);return this.videoElement=r,r}decodeFromImageUrl(t){if(!t)throw new N("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const i=this._decodeOnLoadImage(r);return r.src=t,i}decodeFromVideoUrl(t){if(!t)throw new N("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),i=this.decodeFromVideoElement(r);return r.src=t,i}decodeFromVideoUrlContinuously(t,r){if(!t)throw new N("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElementContinuously(i,r);return i.src=t,o}_decodeOnLoadImage(t){return new Promise((r,i)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(r,i),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return Ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,r){return Ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,r)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let r;return typeof t>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(r=t),r}prepareVideoElement(t){let r;return!t&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof t=="string"&&(r=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(r=t),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(t,r=!0,i=!0){this._stopAsyncDecode=!1;const o=(a,c)=>{if(this._stopAsyncDecode){c(new H("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(t);a(f)}catch(f){const h=r&&f instanceof H,m=(f instanceof B||f instanceof z)&&i;if(h||m)return setTimeout(o,this._timeBetweenDecodingAttempts,a,c);c(f)}};return new Promise((a,c)=>o(a,c))}decodeContinuously(t,r){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const o=this.decode(t);r(o,null),setTimeout(i,this.timeBetweenScansMillis)}catch(o){r(null,o);const a=o instanceof B||o instanceof z,c=o instanceof H;(a||c)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(t){const r=this.createBinaryBitmap(t);return this.decodeBitmap(r)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,r,i){r||(r={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(t,r,i=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(t,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const r=this.getCaptureCanvas(t),i=new pe(r),o=new se(i);return new O(o)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const r=this.createCaptureCanvas(t);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let i,o;return typeof t<"u"&&(t instanceof HTMLVideoElement?(i=t.videoWidth,o=t.videoHeight):t instanceof HTMLImageElement&&(i=t.naturalWidth||t.width,o=t.naturalHeight||t.height)),r.style.width=i+"px",r.style.height=o+"px",r.width=i,r.height=o,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,r){try{t.srcObject=r}catch{t.src=URL.createObjectURL(r)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Qe{constructor(t,r,i=r==null?0:8*r.length,o,a,c=j.currentTimeMillis()){this.text=t,this.rawBytes=r,this.numBits=i,this.resultPoints=o,this.format=a,this.timestamp=c,this.text=t,this.rawBytes=r,i==null?this.numBits=r==null?0:8*r.length:this.numBits=i,this.resultPoints=o,this.format=a,this.resultMetadata=null,c==null?this.timestamp=j.currentTimeMillis():this.timestamp=c}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,r)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const r=this.resultPoints;if(r===null)this.resultPoints=t;else if(t!==null&&t.length>0){const i=new Array(r.length+t.length);j.arraycopy(r,0,i,0,r.length),j.arraycopy(t,0,i,r.length,t.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Mr;(function(C){C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Mr||(Mr={}));var he=Mr,tr;(function(C){C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(tr||(tr={}));var pt=tr;class Gi{constructor(t,r,i,o,a=-1,c=-1){this.rawBytes=t,this.text=r,this.byteSegments=i,this.ecLevel=o,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=c,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Xi{exp(t){return this.expTable[t]}log(t){if(t===0)throw new S;return this.logTable[t]}static addOrSubtract(t,r){return t^r}}class Vt{constructor(t,r){if(r.length===0)throw new S;this.field=t;const i=r.length;if(i>1&&r[0]===0){let o=1;for(;o<i&&r[o]===0;)o++;o===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-o),j.arraycopy(r,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const r=this.coefficients;let i;if(t===1){i=0;for(let c=0,f=r.length;c!==f;c++){const h=r[c];i=Xi.addOrSubtract(i,h)}return i}i=r[0];const o=r.length,a=this.field;for(let c=1;c<o;c++)i=Xi.addOrSubtract(a.multiply(t,i),r[c]);return i}addOrSubtract(t){if(!this.field.equals(t.field))throw new S("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,i=t.coefficients;if(r.length>i.length){const c=r;r=i,i=c}let o=new Int32Array(i.length);const a=i.length-r.length;j.arraycopy(i,0,o,0,a);for(let c=a;c<i.length;c++)o[c]=Xi.addOrSubtract(r[c-a],i[c]);return new Vt(this.field,o)}multiply(t){if(!this.field.equals(t.field))throw new S("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const r=this.coefficients,i=r.length,o=t.coefficients,a=o.length,c=new Int32Array(i+a-1),f=this.field;for(let h=0;h<i;h++){const g=r[h];for(let m=0;m<a;m++)c[h+m]=Xi.addOrSubtract(c[h+m],f.multiply(g,o[m]))}return new Vt(f,c)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const r=this.coefficients.length,i=this.field,o=new Int32Array(r),a=this.coefficients;for(let c=0;c<r;c++)o[c]=i.multiply(a[c],t);return new Vt(i,o)}multiplyByMonomial(t,r){if(t<0)throw new S;if(r===0)return this.field.getZero();const i=this.coefficients,o=i.length,a=new Int32Array(o+t),c=this.field;for(let f=0;f<o;f++)a[f]=c.multiply(i[f],r);return new Vt(c,a)}divide(t){if(!this.field.equals(t.field))throw new S("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new S("Divide by 0");const r=this.field;let i=r.getZero(),o=this;const a=t.getCoefficient(t.getDegree()),c=r.inverse(a);for(;o.getDegree()>=t.getDegree()&&!o.isZero();){const f=o.getDegree()-t.getDegree(),h=r.multiply(o.getCoefficient(o.getDegree()),c),g=t.multiplyByMonomial(f,h),m=r.buildMonomial(f,h);i=i.addOrSubtract(m),o=o.addOrSubtract(g)}return[i,o]}toString(){let t="";for(let r=this.getDegree();r>=0;r--){let i=this.getCoefficient(r);if(i!==0){if(i<0?(t+=" - ",i=-i):t.length>0&&(t+=" + "),r===0||i!==1){const o=this.field.log(i);o===0?t+="1":o===1?t+="a":(t+="a^",t+=o)}r!==0&&(r===1?t+="x":(t+="x^",t+=r))}}return t}}class qs extends p{}qs.kind="ArithmeticException";class ke extends Xi{constructor(t,r,i){super(),this.primitive=t,this.size=r,this.generatorBase=i;const o=new Int32Array(r);let a=1;for(let f=0;f<r;f++)o[f]=a,a*=2,a>=r&&(a^=t,a&=r-1);this.expTable=o;const c=new Int32Array(r);for(let f=0;f<r-1;f++)c[o[f]]=f;this.logTable=c,this.zero=new Vt(this,Int32Array.from([0])),this.one=new Vt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new S;if(r===0)return this.zero;const i=new Int32Array(t+1);return i[0]=r,new Vt(this,i)}inverse(t){if(t===0)throw new qs;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+T.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}ke.AZTEC_DATA_12=new ke(4201,4096,1),ke.AZTEC_DATA_10=new ke(1033,1024,1),ke.AZTEC_DATA_6=new ke(67,64,1),ke.AZTEC_PARAM=new ke(19,16,1),ke.QR_CODE_FIELD_256=new ke(285,256,0),ke.DATA_MATRIX_FIELD_256=new ke(301,256,1),ke.AZTEC_DATA_8=ke.DATA_MATRIX_FIELD_256,ke.MAXICODE_FIELD_64=ke.AZTEC_DATA_6;class ni extends p{}ni.kind="ReedSolomonException";class Tn extends p{}Tn.kind="IllegalStateException";class Yi{constructor(t){this.field=t}decode(t,r){const i=this.field,o=new Vt(i,t),a=new Int32Array(r);let c=!0;for(let _=0;_<r;_++){const k=o.evaluateAt(i.exp(_+i.getGeneratorBase()));a[a.length-1-_]=k,k!==0&&(c=!1)}if(c)return;const f=new Vt(i,a),h=this.runEuclideanAlgorithm(i.buildMonomial(r,1),f,r),g=h[0],m=h[1],v=this.findErrorLocations(g),A=this.findErrorMagnitudes(m,v);for(let _=0;_<v.length;_++){const k=t.length-1-i.log(v[_]);if(k<0)throw new ni("Bad error location");t[k]=ke.addOrSubtract(t[k],A[_])}}runEuclideanAlgorithm(t,r,i){if(t.getDegree()<r.getDegree()){const _=t;t=r,r=_}const o=this.field;let a=t,c=r,f=o.getZero(),h=o.getOne();for(;c.getDegree()>=(i/2|0);){let _=a,k=f;if(a=c,f=h,a.isZero())throw new ni("r_{i-1} was zero");c=_;let D=o.getZero();const V=a.getCoefficient(a.getDegree()),X=o.inverse(V);for(;c.getDegree()>=a.getDegree()&&!c.isZero();){const ne=c.getDegree()-a.getDegree(),re=o.multiply(c.getCoefficient(c.getDegree()),X);D=D.addOrSubtract(o.buildMonomial(ne,re)),c=c.addOrSubtract(a.multiplyByMonomial(ne,re))}if(h=D.multiply(f).addOrSubtract(k),c.getDegree()>=a.getDegree())throw new Tn("Division algorithm failed to reduce polynomial?")}const g=h.getCoefficient(0);if(g===0)throw new ni("sigmaTilde(0) was zero");const m=o.inverse(g),v=h.multiplyScalar(m),A=c.multiplyScalar(m);return[v,A]}findErrorLocations(t){const r=t.getDegree();if(r===1)return Int32Array.from([t.getCoefficient(1)]);const i=new Int32Array(r);let o=0;const a=this.field;for(let c=1;c<a.getSize()&&o<r;c++)t.evaluateAt(c)===0&&(i[o]=a.inverse(c),o++);if(o!==r)throw new ni("Error locator degree does not match number of roots");return i}findErrorMagnitudes(t,r){const i=r.length,o=new Int32Array(i),a=this.field;for(let c=0;c<i;c++){const f=a.inverse(r[c]);let h=1;for(let g=0;g<i;g++)if(c!==g){const m=a.multiply(r[g],f),v=m&1?m&-2:m|1;h=a.multiply(h,v)}o[c]=a.multiply(t.evaluateAt(f),a.inverse(h)),a.getGeneratorBase()!==0&&(o[c]=a.multiply(o[c],f))}return o}}var Ct;(function(C){C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY"})(Ct||(Ct={}));class Ve{decode(t){this.ddata=t;let r=t.getBits(),i=this.extractBits(r),o=this.correctBits(i),a=Ve.convertBoolArrayToByteArray(o),c=Ve.getEncodedData(o),f=new Gi(a,c,null,null);return f.setNumBits(o.length),f}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let r=t.length,i=Ct.UPPER,o=Ct.UPPER,a="",c=0;for(;c<r;)if(o===Ct.BINARY){if(r-c<5)break;let f=Ve.readCode(t,c,5);if(c+=5,f===0){if(r-c<11)break;f=Ve.readCode(t,c,11)+31,c+=11}for(let h=0;h<f;h++){if(r-c<8){c=r;break}const g=Ve.readCode(t,c,8);a+=ee.castAsNonUtf8Char(g),c+=8}o=i}else{let f=o===Ct.DIGIT?4:5;if(r-c<f)break;let h=Ve.readCode(t,c,f);c+=f;let g=Ve.getCharacter(o,h);g.startsWith("CTRL_")?(i=o,o=Ve.getTable(g.charAt(5)),g.charAt(6)==="L"&&(i=o)):(a+=g,o=i)}return a}static getTable(t){switch(t){case"L":return Ct.LOWER;case"P":return Ct.PUNCT;case"M":return Ct.MIXED;case"D":return Ct.DIGIT;case"B":return Ct.BINARY;case"U":default:return Ct.UPPER}}static getCharacter(t,r){switch(t){case Ct.UPPER:return Ve.UPPER_TABLE[r];case Ct.LOWER:return Ve.LOWER_TABLE[r];case Ct.MIXED:return Ve.MIXED_TABLE[r];case Ct.PUNCT:return Ve.PUNCT_TABLE[r];case Ct.DIGIT:return Ve.DIGIT_TABLE[r];default:throw new Tn("Bad table")}}correctBits(t){let r,i;this.ddata.getNbLayers()<=2?(i=6,r=ke.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,r=ke.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,r=ke.AZTEC_DATA_10):(i=12,r=ke.AZTEC_DATA_12);let o=this.ddata.getNbDatablocks(),a=t.length/i;if(a<o)throw new z;let c=t.length%i,f=new Int32Array(a);for(let A=0;A<a;A++,c+=i)f[A]=Ve.readCode(t,c,i);try{new Yi(r).decode(f,a-o)}catch(A){throw new z(A)}let h=(1<<i)-1,g=0;for(let A=0;A<o;A++){let _=f[A];if(_===0||_===h)throw new z;(_===1||_===h-1)&&g++}let m=new Array(o*i-g),v=0;for(let A=0;A<o;A++){let _=f[A];if(_===1||_===h-1)m.fill(_>1,v,v+i-1),v+=i-1;else for(let k=i-1;k>=0;--k)m[v++]=(_&1<<k)!==0}return m}extractBits(t){let r=this.ddata.isCompact(),i=this.ddata.getNbLayers(),o=(r?11:14)+i*4,a=new Int32Array(o),c=new Array(this.totalBitsInLayer(i,r));if(r)for(let f=0;f<a.length;f++)a[f]=f;else{let f=o+1+2*T.truncDivision(T.truncDivision(o,2)-1,15),h=o/2,g=T.truncDivision(f,2);for(let m=0;m<h;m++){let v=m+T.truncDivision(m,15);a[h-m-1]=g-v-1,a[h+m]=g+v+1}}for(let f=0,h=0;f<i;f++){let g=(i-f)*4+(r?9:12),m=f*2,v=o-1-m;for(let A=0;A<g;A++){let _=A*2;for(let k=0;k<2;k++)c[h+_+k]=t.get(a[m+k],a[m+A]),c[h+2*g+_+k]=t.get(a[m+A],a[v-k]),c[h+4*g+_+k]=t.get(a[v-k],a[v-A]),c[h+6*g+_+k]=t.get(a[v-A],a[m+k])}h+=g*8}return c}static readCode(t,r,i){let o=0;for(let a=r;a<r+i;a++)o<<=1,t[a]&&(o|=1);return o}static readByte(t,r){let i=t.length-r;return i>=8?Ve.readCode(t,r,8):Ve.readCode(t,r,i)<<8-i}static convertBoolArrayToByteArray(t){let r=new Uint8Array((t.length+7)/8);for(let i=0;i<r.length;i++)r[i]=Ve.readByte(t,8*i);return r}totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}Ve.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ve.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ve.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ve.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ve.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class _e{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,r,i,o){const a=t-i,c=r-o;return Math.sqrt(a*a+c*c)}static sum(t){let r=0;for(let i=0,o=t.length;i!==o;i++){const a=t[i];r+=a}return r}}class $s{static floatToIntBits(t){return t}}$s.MAX_VALUE=Number.MAX_SAFE_INTEGER;class de{constructor(t,r){this.x=t,this.y=r}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof de){const r=t;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*$s.floatToIntBits(this.x)+$s.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const r=this.distance(t[0],t[1]),i=this.distance(t[1],t[2]),o=this.distance(t[0],t[2]);let a,c,f;if(i>=r&&i>=o?(c=t[0],a=t[1],f=t[2]):o>=i&&o>=r?(c=t[1],a=t[0],f=t[2]):(c=t[2],a=t[0],f=t[1]),this.crossProductZ(a,c,f)<0){const h=a;a=f,f=h}t[0]=a,t[1]=c,t[2]=f}static distance(t,r){return _e.distance(t.x,t.y,r.x,r.y)}static crossProductZ(t,r,i){const o=r.x,a=r.y;return(i.x-o)*(t.y-a)-(i.y-a)*(t.x-o)}}class Js{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Iu extends Js{constructor(t,r,i,o,a){super(t,r),this.compact=i,this.nbDatablocks=o,this.nbLayers=a}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Vn{constructor(t,r,i,o){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),r==null&&(r=Vn.INIT_SIZE),i==null&&(i=t.getWidth()/2|0),o==null&&(o=t.getHeight()/2|0);const a=r/2|0;if(this.leftInit=i-a,this.rightInit=i+a,this.upInit=o-a,this.downInit=o+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new H}detect(){let t=this.leftInit,r=this.rightInit,i=this.upInit,o=this.downInit,a=!1,c=!0,f=!1,h=!1,g=!1,m=!1,v=!1;const A=this.width,_=this.height;for(;c;){c=!1;let k=!0;for(;(k||!h)&&r<A;)k=this.containsBlackPoint(i,o,r,!1),k?(r++,c=!0,h=!0):h||r++;if(r>=A){a=!0;break}let D=!0;for(;(D||!g)&&o<_;)D=this.containsBlackPoint(t,r,o,!0),D?(o++,c=!0,g=!0):g||o++;if(o>=_){a=!0;break}let V=!0;for(;(V||!m)&&t>=0;)V=this.containsBlackPoint(i,o,t,!1),V?(t--,c=!0,m=!0):m||t--;if(t<0){a=!0;break}let X=!0;for(;(X||!v)&&i>=0;)X=this.containsBlackPoint(t,r,i,!0),X?(i--,c=!0,v=!0):v||i--;if(i<0){a=!0;break}c&&(f=!0)}if(!a&&f){const k=r-t;let D=null;for(let re=1;D===null&&re<k;re++)D=this.getBlackPointOnSegment(t,o-re,t+re,o);if(D==null)throw new H;let V=null;for(let re=1;V===null&&re<k;re++)V=this.getBlackPointOnSegment(t,i+re,t+re,i);if(V==null)throw new H;let X=null;for(let re=1;X===null&&re<k;re++)X=this.getBlackPointOnSegment(r,i+re,r-re,i);if(X==null)throw new H;let ne=null;for(let re=1;ne===null&&re<k;re++)ne=this.getBlackPointOnSegment(r,o-re,r-re,o);if(ne==null)throw new H;return this.centerEdges(ne,D,X,V)}else throw new H}getBlackPointOnSegment(t,r,i,o){const a=_e.round(_e.distance(t,r,i,o)),c=(i-t)/a,f=(o-r)/a,h=this.image;for(let g=0;g<a;g++){const m=_e.round(t+g*c),v=_e.round(r+g*f);if(h.get(m,v))return new de(m,v)}return null}centerEdges(t,r,i,o){const a=t.getX(),c=t.getY(),f=r.getX(),h=r.getY(),g=i.getX(),m=i.getY(),v=o.getX(),A=o.getY(),_=Vn.CORR;return a<this.width/2?[new de(v-_,A+_),new de(f+_,h+_),new de(g-_,m-_),new de(a+_,c-_)]:[new de(v+_,A+_),new de(f+_,h-_),new de(g-_,m+_),new de(a-_,c-_)]}containsBlackPoint(t,r,i,o){const a=this.image;if(o){for(let c=t;c<=r;c++)if(a.get(c,i))return!0}else for(let c=t;c<=r;c++)if(a.get(i,c))return!0;return!1}}Vn.INIT_SIZE=10,Vn.CORR=1;class Pa{static checkAndNudgePoints(t,r){const i=t.getWidth(),o=t.getHeight();let a=!0;for(let c=0;c<r.length&&a;c+=2){const f=Math.floor(r[c]),h=Math.floor(r[c+1]);if(f<-1||f>i||h<-1||h>o)throw new H;a=!1,f===-1?(r[c]=0,a=!0):f===i&&(r[c]=i-1,a=!0),h===-1?(r[c+1]=0,a=!0):h===o&&(r[c+1]=o-1,a=!0)}a=!0;for(let c=r.length-2;c>=0&&a;c-=2){const f=Math.floor(r[c]),h=Math.floor(r[c+1]);if(f<-1||f>i||h<-1||h>o)throw new H;a=!1,f===-1?(r[c]=0,a=!0):f===i&&(r[c]=i-1,a=!0),h===-1?(r[c+1]=0,a=!0):h===o&&(r[c+1]=o-1,a=!0)}}}class yn{constructor(t,r,i,o,a,c,f,h,g){this.a11=t,this.a21=r,this.a31=i,this.a12=o,this.a22=a,this.a32=c,this.a13=f,this.a23=h,this.a33=g}static quadrilateralToQuadrilateral(t,r,i,o,a,c,f,h,g,m,v,A,_,k,D,V){const X=yn.quadrilateralToSquare(t,r,i,o,a,c,f,h);return yn.squareToQuadrilateral(g,m,v,A,_,k,D,V).times(X)}transformPoints(t){const r=t.length,i=this.a11,o=this.a12,a=this.a13,c=this.a21,f=this.a22,h=this.a23,g=this.a31,m=this.a32,v=this.a33;for(let A=0;A<r;A+=2){const _=t[A],k=t[A+1],D=a*_+h*k+v;t[A]=(i*_+c*k+g)/D,t[A+1]=(o*_+f*k+m)/D}}transformPointsWithValues(t,r){const i=this.a11,o=this.a12,a=this.a13,c=this.a21,f=this.a22,h=this.a23,g=this.a31,m=this.a32,v=this.a33,A=t.length;for(let _=0;_<A;_++){const k=t[_],D=r[_],V=a*k+h*D+v;t[_]=(i*k+c*D+g)/V,r[_]=(o*k+f*D+m)/V}}static squareToQuadrilateral(t,r,i,o,a,c,f,h){const g=t-i+a-f,m=r-o+c-h;if(g===0&&m===0)return new yn(i-t,a-i,t,o-r,c-o,r,0,0,1);{const v=i-a,A=f-a,_=o-c,k=h-c,D=v*k-A*_,V=(g*k-A*m)/D,X=(v*m-g*_)/D;return new yn(i-t+V*i,f-t+X*f,t,o-r+V*o,h-r+X*h,r,V,X,1)}}static quadrilateralToSquare(t,r,i,o,a,c,f,h){return yn.squareToQuadrilateral(t,r,i,o,a,c,f,h).buildAdjoint()}buildAdjoint(){return new yn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new yn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class Nu extends Pa{sampleGrid(t,r,i,o,a,c,f,h,g,m,v,A,_,k,D,V,X,ne,re){const J=yn.quadrilateralToQuadrilateral(o,a,c,f,h,g,m,v,A,_,k,D,V,X,ne,re);return this.sampleGridWithTransform(t,r,i,J)}sampleGridWithTransform(t,r,i,o){if(r<=0||i<=0)throw new H;const a=new Ee(r,i),c=new Float32Array(2*r);for(let f=0;f<i;f++){const h=c.length,g=f+.5;for(let m=0;m<h;m+=2)c[m]=m/2+.5,c[m+1]=g;o.transformPoints(c),Pa.checkAndNudgePoints(t,c);try{for(let m=0;m<h;m+=2)t.get(Math.floor(c[m]),Math.floor(c[m+1]))&&a.set(m/2,f)}catch{throw new H}}return a}}class nr{static setGridSampler(t){nr.gridSampler=t}static getInstance(){return nr.gridSampler}}nr.gridSampler=new Nu;class Mt{constructor(t,r){this.x=t,this.y=r}toResultPoint(){return new de(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class bu{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let r=this.getMatrixCenter(),i=this.getBullsEyeCorners(r);if(t){let c=i[0];i[0]=i[2],i[2]=c}this.extractParameters(i);let o=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),a=this.getMatrixCornerPoints(i);return new Iu(o,a,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new H;let r=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(t[0],t[1],r),this.sampleLine(t[1],t[2],r),this.sampleLine(t[2],t[3],r),this.sampleLine(t[3],t[0],r)]);this.shift=this.getRotation(i,r);let o=0;for(let c=0;c<4;c++){let f=i[(this.shift+c)%4];this.compact?(o<<=7,o+=f>>1&127):(o<<=10,o+=(f>>2&992)+(f>>1&31))}let a=this.getCorrectedParameterData(o,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)}getRotation(t,r){let i=0;t.forEach((o,a,c)=>{let f=(o>>r-2<<1)+(o&1);i=(i<<3)+f}),i=((i&1)<<11)+(i>>1);for(let o=0;o<4;o++)if(T.bitCount(i^this.EXPECTED_CORNER_BITS[o])<=2)return o;throw new H}getCorrectedParameterData(t,r){let i,o;r?(i=7,o=2):(i=10,o=4);let a=i-o,c=new Int32Array(i);for(let h=i-1;h>=0;--h)c[h]=t&15,t>>=4;try{new Yi(ke.AZTEC_PARAM).decode(c,a)}catch{throw new H}let f=0;for(let h=0;h<o;h++)f=(f<<4)+c[h];return f}getBullsEyeCorners(t){let r=t,i=t,o=t,a=t,c=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let v=this.getFirstDifferent(r,c,1,-1),A=this.getFirstDifferent(i,c,1,1),_=this.getFirstDifferent(o,c,-1,1),k=this.getFirstDifferent(a,c,-1,-1);if(this.nbCenterLayers>2){let D=this.distancePoint(k,v)*this.nbCenterLayers/(this.distancePoint(a,r)*(this.nbCenterLayers+2));if(D<.75||D>1.25||!this.isWhiteOrBlackRectangle(v,A,_,k))break}r=v,i=A,o=_,a=k,c=!c}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new H;this.compact=this.nbCenterLayers===5;let f=new de(r.getX()+.5,r.getY()-.5),h=new de(i.getX()+.5,i.getY()+.5),g=new de(o.getX()-.5,o.getY()+.5),m=new de(a.getX()-.5,a.getY()-.5);return this.expandSquare([f,h,g,m],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,r,i,o;try{let f=new Vn(this.image).detect();t=f[0],r=f[1],i=f[2],o=f[3]}catch{let h=this.image.getWidth()/2,g=this.image.getHeight()/2;t=this.getFirstDifferent(new Mt(h+7,g-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Mt(h+7,g+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new Mt(h-7,g+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new Mt(h-7,g-7),!1,-1,-1).toResultPoint()}let a=_e.round((t.getX()+o.getX()+r.getX()+i.getX())/4),c=_e.round((t.getY()+o.getY()+r.getY()+i.getY())/4);try{let f=new Vn(this.image,15,a,c).detect();t=f[0],r=f[1],i=f[2],o=f[3]}catch{t=this.getFirstDifferent(new Mt(a+7,c-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new Mt(a+7,c+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new Mt(a-7,c+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new Mt(a-7,c-7),!1,-1,-1).toResultPoint()}return a=_e.round((t.getX()+o.getX()+r.getX()+i.getX())/4),c=_e.round((t.getY()+o.getY()+r.getY()+i.getY())/4),new Mt(a,c)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,r,i,o,a){let c=nr.getInstance(),f=this.getDimension(),h=f/2-this.nbCenterLayers,g=f/2+this.nbCenterLayers;return c.sampleGrid(t,f,f,h,h,g,h,g,g,h,g,r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY(),a.getX(),a.getY())}sampleLine(t,r,i){let o=0,a=this.distanceResultPoint(t,r),c=a/i,f=t.getX(),h=t.getY(),g=c*(r.getX()-t.getX())/a,m=c*(r.getY()-t.getY())/a;for(let v=0;v<i;v++)this.image.get(_e.round(f+v*g),_e.round(h+v*m))&&(o|=1<<i-v-1);return o}isWhiteOrBlackRectangle(t,r,i,o){let a=3;t=new Mt(t.getX()-a,t.getY()+a),r=new Mt(r.getX()-a,r.getY()-a),i=new Mt(i.getX()+a,i.getY()-a),o=new Mt(o.getX()+a,o.getY()+a);let c=this.getColor(o,t);if(c===0)return!1;let f=this.getColor(t,r);return f!==c||(f=this.getColor(r,i),f!==c)?!1:(f=this.getColor(i,o),f===c)}getColor(t,r){let i=this.distancePoint(t,r),o=(r.getX()-t.getX())/i,a=(r.getY()-t.getY())/i,c=0,f=t.getX(),h=t.getY(),g=this.image.get(t.getX(),t.getY()),m=Math.ceil(i);for(let A=0;A<m;A++)f+=o,h+=a,this.image.get(_e.round(f),_e.round(h))!==g&&c++;let v=c/i;return v>.1&&v<.9?0:v<=.1===g?1:-1}getFirstDifferent(t,r,i,o){let a=t.getX()+i,c=t.getY()+o;for(;this.isValid(a,c)&&this.image.get(a,c)===r;)a+=i,c+=o;for(a-=i,c-=o;this.isValid(a,c)&&this.image.get(a,c)===r;)a+=i;for(a-=i;this.isValid(a,c)&&this.image.get(a,c)===r;)c+=o;return c-=o,new Mt(a,c)}expandSquare(t,r,i){let o=i/(2*r),a=t[0].getX()-t[2].getX(),c=t[0].getY()-t[2].getY(),f=(t[0].getX()+t[2].getX())/2,h=(t[0].getY()+t[2].getY())/2,g=new de(f+o*a,h+o*c),m=new de(f-o*a,h-o*c);a=t[1].getX()-t[3].getX(),c=t[1].getY()-t[3].getY(),f=(t[1].getX()+t[3].getX())/2,h=(t[1].getY()+t[3].getY())/2;let v=new de(f+o*a,h+o*c),A=new de(f-o*a,h-o*c);return[g,v,m,A]}isValid(t,r){return t>=0&&t<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(t){let r=_e.round(t.getX()),i=_e.round(t.getY());return this.isValid(r,i)}distancePoint(t,r){return _e.distance(t.getX(),t.getY(),r.getX(),r.getY())}distanceResultPoint(t,r){return _e.distance(t.getX(),t.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(T.truncDivision(this.nbLayers-4,8)+1)+15}}class eo{decode(t,r=null){let i=null,o=new bu(t.getBlackMatrix()),a=null,c=null;try{let m=o.detectMirror(!1);a=m.getPoints(),this.reportFoundResultPoints(r,a),c=new Ve().decode(m)}catch(m){i=m}if(c==null)try{let m=o.detectMirror(!0);a=m.getPoints(),this.reportFoundResultPoints(r,a),c=new Ve().decode(m)}catch(m){throw i??m}let f=new Qe(c.getText(),c.getRawBytes(),c.getNumBits(),a,he.AZTEC,j.currentTimeMillis()),h=c.getByteSegments();h!=null&&f.putMetadata(pt.BYTE_SEGMENTS,h);let g=c.getECLevel();return g!=null&&f.putMetadata(pt.ERROR_CORRECTION_LEVEL,g),f}reportFoundResultPoints(t,r){if(t!=null){let i=t.get(K.NEED_RESULT_POINT_CALLBACK);i!=null&&r.forEach((o,a,c)=>{i.foundPossibleResultPoint(o)})}}reset(){}}class gh extends ln{constructor(t=500){super(new eo,t)}}class ct{decode(t,r){try{return this.doDecode(t,r)}catch{if(r&&r.get(K.TRY_HARDER)===!0&&t.isRotateSupported()){const a=t.rotateCounterClockwise(),c=this.doDecode(a,r),f=c.getResultMetadata();let h=270;f!==null&&f.get(pt.ORIENTATION)===!0&&(h=h+f.get(pt.ORIENTATION)%360),c.putMetadata(pt.ORIENTATION,h);const g=c.getResultPoints();if(g!==null){const m=a.getHeight();for(let v=0;v<g.length;v++)g[v]=new de(m-g[v].getY()-1,g[v].getX())}return c}else throw new H}}reset(){}doDecode(t,r){const i=t.getWidth(),o=t.getHeight();let a=new L(i);const c=r&&r.get(K.TRY_HARDER)===!0,f=Math.max(1,o>>(c?8:5));let h;c?h=o:h=15;const g=Math.trunc(o/2);for(let m=0;m<h;m++){const v=Math.trunc((m+1)/2),A=(m&1)===0,_=g+f*(A?v:-v);if(_<0||_>=o)break;try{a=t.getBlackRow(_,a)}catch{continue}for(let k=0;k<2;k++){if(k===1&&(a.reverse(),r&&r.get(K.NEED_RESULT_POINT_CALLBACK)===!0)){const D=new Map;r.forEach((V,X)=>D.set(X,V)),D.delete(K.NEED_RESULT_POINT_CALLBACK),r=D}try{const D=this.decodeRow(_,a,r);if(k===1){D.putMetadata(pt.ORIENTATION,180);const V=D.getResultPoints();V!==null&&(V[0]=new de(i-V[0].getX()-1,V[0].getY()),V[1]=new de(i-V[1].getX()-1,V[1].getY()))}return D}catch{}}}throw new H}static recordPattern(t,r,i){const o=i.length;for(let g=0;g<o;g++)i[g]=0;const a=t.getSize();if(r>=a)throw new H;let c=!t.get(r),f=0,h=r;for(;h<a;){if(t.get(h)!==c)i[f]++;else{if(++f===o)break;i[f]=1,c=!c}h++}if(!(f===o||f===o-1&&h===a))throw new H}static recordPatternInReverse(t,r,i){let o=i.length,a=t.get(r);for(;r>0&&o>=0;)t.get(--r)!==a&&(o--,a=!a);if(o>=0)throw new H;ct.recordPattern(t,r+1,i)}static patternMatchVariance(t,r,i){const o=t.length;let a=0,c=0;for(let g=0;g<o;g++)a+=t[g],c+=r[g];if(a<c)return Number.POSITIVE_INFINITY;const f=a/c;i*=f;let h=0;for(let g=0;g<o;g++){const m=t[g],v=r[g]*f,A=m>v?m-v:v-m;if(A>i)return Number.POSITIVE_INFINITY;h+=A}return h/a}}class oe extends ct{static findStartPattern(t){const r=t.getSize(),i=t.getNextSet(0);let o=0,a=Int32Array.from([0,0,0,0,0,0]),c=i,f=!1;const h=6;for(let g=i;g<r;g++)if(t.get(g)!==f)a[o]++;else{if(o===h-1){let m=oe.MAX_AVG_VARIANCE,v=-1;for(let A=oe.CODE_START_A;A<=oe.CODE_START_C;A++){const _=ct.patternMatchVariance(a,oe.CODE_PATTERNS[A],oe.MAX_INDIVIDUAL_VARIANCE);_<m&&(m=_,v=A)}if(v>=0&&t.isRange(Math.max(0,c-(g-c)/2),c,!1))return Int32Array.from([c,g,v]);c+=a[0]+a[1],a=a.slice(2,a.length-1),a[o-1]=0,a[o]=0,o--}else o++;a[o]=1,f=!f}throw new H}static decodeCode(t,r,i){ct.recordPattern(t,i,r);let o=oe.MAX_AVG_VARIANCE,a=-1;for(let c=0;c<oe.CODE_PATTERNS.length;c++){const f=oe.CODE_PATTERNS[c],h=this.patternMatchVariance(r,f,oe.MAX_INDIVIDUAL_VARIANCE);h<o&&(o=h,a=c)}if(a>=0)return a;throw new H}decodeRow(t,r,i){const o=i&&i.get(K.ASSUME_GS1)===!0,a=oe.findStartPattern(r),c=a[2];let f=0;const h=new Uint8Array(20);h[f++]=c;let g;switch(c){case oe.CODE_START_A:g=oe.CODE_CODE_A;break;case oe.CODE_START_B:g=oe.CODE_CODE_B;break;case oe.CODE_START_C:g=oe.CODE_CODE_C;break;default:throw new z}let m=!1,v=!1,A="",_=a[0],k=a[1];const D=Int32Array.from([0,0,0,0,0,0]);let V=0,X=0,ne=c,re=0,J=!0,Ne=!1,Ce=!1;for(;!m;){const fi=v;switch(v=!1,V=X,X=oe.decodeCode(r,D,k),h[f++]=X,X!==oe.CODE_STOP&&(J=!0),X!==oe.CODE_STOP&&(re++,ne+=re*X),_=k,k+=D.reduce((zh,Hh)=>zh+Hh,0),X){case oe.CODE_START_A:case oe.CODE_START_B:case oe.CODE_START_C:throw new z}switch(g){case oe.CODE_CODE_A:if(X<64)Ce===Ne?A+=String.fromCharCode(32+X):A+=String.fromCharCode(32+X+128),Ce=!1;else if(X<96)Ce===Ne?A+=String.fromCharCode(X-64):A+=String.fromCharCode(X+64),Ce=!1;else switch(X!==oe.CODE_STOP&&(J=!1),X){case oe.CODE_FNC_1:o&&(A.length===0?A+="]C1":A+="");break;case oe.CODE_FNC_2:case oe.CODE_FNC_3:break;case oe.CODE_FNC_4_A:!Ne&&Ce?(Ne=!0,Ce=!1):Ne&&Ce?(Ne=!1,Ce=!1):Ce=!0;break;case oe.CODE_SHIFT:v=!0,g=oe.CODE_CODE_B;break;case oe.CODE_CODE_B:g=oe.CODE_CODE_B;break;case oe.CODE_CODE_C:g=oe.CODE_CODE_C;break;case oe.CODE_STOP:m=!0;break}break;case oe.CODE_CODE_B:if(X<96)Ce===Ne?A+=String.fromCharCode(32+X):A+=String.fromCharCode(32+X+128),Ce=!1;else switch(X!==oe.CODE_STOP&&(J=!1),X){case oe.CODE_FNC_1:o&&(A.length===0?A+="]C1":A+="");break;case oe.CODE_FNC_2:case oe.CODE_FNC_3:break;case oe.CODE_FNC_4_B:!Ne&&Ce?(Ne=!0,Ce=!1):Ne&&Ce?(Ne=!1,Ce=!1):Ce=!0;break;case oe.CODE_SHIFT:v=!0,g=oe.CODE_CODE_A;break;case oe.CODE_CODE_A:g=oe.CODE_CODE_A;break;case oe.CODE_CODE_C:g=oe.CODE_CODE_C;break;case oe.CODE_STOP:m=!0;break}break;case oe.CODE_CODE_C:if(X<100)X<10&&(A+="0"),A+=X;else switch(X!==oe.CODE_STOP&&(J=!1),X){case oe.CODE_FNC_1:o&&(A.length===0?A+="]C1":A+="");break;case oe.CODE_CODE_A:g=oe.CODE_CODE_A;break;case oe.CODE_CODE_B:g=oe.CODE_CODE_B;break;case oe.CODE_STOP:m=!0;break}break}fi&&(g=g===oe.CODE_CODE_A?oe.CODE_CODE_B:oe.CODE_CODE_A)}const Gt=k-_;if(k=r.getNextUnset(k),!r.isRange(k,Math.min(r.getSize(),k+(k-_)/2),!1))throw new H;if(ne-=re*V,ne%103!==V)throw new B;const Cn=A.length;if(Cn===0)throw new H;Cn>0&&J&&(g===oe.CODE_CODE_C?A=A.substring(0,Cn-2):A=A.substring(0,Cn-1));const Xt=(a[1]+a[0])/2,Ue=_+Gt/2,St=h.length,Jt=new Uint8Array(St);for(let fi=0;fi<St;fi++)Jt[fi]=h[fi];const ui=[new de(Xt,t),new de(Ue,t)];return new Qe(A,Jt,0,ui,he.CODE_128,new Date().getTime())}}oe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],oe.MAX_AVG_VARIANCE=.25,oe.MAX_INDIVIDUAL_VARIANCE=.7,oe.CODE_SHIFT=98,oe.CODE_CODE_C=99,oe.CODE_CODE_B=100,oe.CODE_CODE_A=101,oe.CODE_FNC_1=102,oe.CODE_FNC_2=97,oe.CODE_FNC_3=96,oe.CODE_FNC_4_A=101,oe.CODE_FNC_4_B=100,oe.CODE_START_A=103,oe.CODE_START_B=104,oe.CODE_START_C=105,oe.CODE_STOP=106;class ft extends ct{constructor(t=!1,r=!1){super(),this.usingCheckDigit=t,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,r,i){let o=this.counters;o.fill(0),this.decodeRowResult="";let a=ft.findAsteriskPattern(r,o),c=r.getNextSet(a[1]),f=r.getSize(),h,g;do{ft.recordPattern(r,c,o);let D=ft.toNarrowWidePattern(o);if(D<0)throw new H;h=ft.patternToChar(D),this.decodeRowResult+=h,g=c;for(let V of o)c+=V;c=r.getNextSet(c)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let m=0;for(let D of o)m+=D;let v=c-g-m;if(c!==f&&v*2<m)throw new H;if(this.usingCheckDigit){let D=this.decodeRowResult.length-1,V=0;for(let X=0;X<D;X++)V+=ft.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(X));if(this.decodeRowResult.charAt(D)!==ft.ALPHABET_STRING.charAt(V%43))throw new B;this.decodeRowResult=this.decodeRowResult.substring(0,D)}if(this.decodeRowResult.length===0)throw new H;let A;this.extendedMode?A=ft.decodeExtended(this.decodeRowResult):A=this.decodeRowResult;let _=(a[1]+a[0])/2,k=g+m/2;return new Qe(A,null,0,[new de(_,t),new de(k,t)],he.CODE_39,new Date().getTime())}static findAsteriskPattern(t,r){let i=t.getSize(),o=t.getNextSet(0),a=0,c=o,f=!1,h=r.length;for(let g=o;g<i;g++)if(t.get(g)!==f)r[a]++;else{if(a===h-1){if(this.toNarrowWidePattern(r)===ft.ASTERISK_ENCODING&&t.isRange(Math.max(0,c-Math.floor((g-c)/2)),c,!1))return[c,g];c+=r[0]+r[1],r.copyWithin(0,2,2+a-1),r[a-1]=0,r[a]=0,a--}else a++;r[a]=1,f=!f}throw new H}static toNarrowWidePattern(t){let r=t.length,i=0,o;do{let a=2147483647;for(let h of t)h<a&&h>i&&(a=h);i=a,o=0;let c=0,f=0;for(let h=0;h<r;h++){let g=t[h];g>i&&(f|=1<<r-1-h,o++,c+=g)}if(o===3){for(let h=0;h<r&&o>0;h++){let g=t[h];if(g>i&&(o--,g*2>=c))return-1}return f}}while(o>3);return-1}static patternToChar(t){for(let r=0;r<ft.CHARACTER_ENCODINGS.length;r++)if(ft.CHARACTER_ENCODINGS[r]===t)return ft.ALPHABET_STRING.charAt(r);if(t===ft.ASTERISK_ENCODING)return"*";throw new H}static decodeExtended(t){let r=t.length,i="";for(let o=0;o<r;o++){let a=t.charAt(o);if(a==="+"||a==="$"||a==="%"||a==="/"){let c=t.charAt(o+1),f="\0";switch(a){case"+":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)+32);else throw new z;break;case"$":if(c>="A"&&c<="Z")f=String.fromCharCode(c.charCodeAt(0)-64);else throw new z;break;case"%":if(c>="A"&&c<="E")f=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")f=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")f=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")f="\0";else if(c==="V")f="@";else if(c==="W")f="`";else if(c==="X"||c==="Y"||c==="Z")f="";else throw new z;break;case"/":if(c>="A"&&c<="O")f=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")f=":";else throw new z;break}i+=f,o++}else i+=a}return i}}ft.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",ft.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],ft.ASTERISK_ENCODING=148;class Fe extends ct{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,r,i){let o=this.decodeStart(r),a=this.decodeEnd(r),c=new fe;Fe.decodeMiddle(r,o[1],a[0],c);let f=c.toString(),h=null;i!=null&&(h=i.get(K.ALLOWED_LENGTHS)),h==null&&(h=Fe.DEFAULT_ALLOWED_LENGTHS);let g=f.length,m=!1,v=0;for(let k of h){if(g===k){m=!0;break}k>v&&(v=k)}if(!m&&g>v&&(m=!0),!m)throw new z;const A=[new de(o[1],t),new de(a[0],t)];return new Qe(f,null,0,A,he.ITF,new Date().getTime())}static decodeMiddle(t,r,i,o){let a=new Int32Array(10),c=new Int32Array(5),f=new Int32Array(5);for(a.fill(0),c.fill(0),f.fill(0);r<i;){ct.recordPattern(t,r,a);for(let g=0;g<5;g++){let m=2*g;c[g]=a[m],f[g]=a[m+1]}let h=Fe.decodeDigit(c);o.append(h.toString()),h=this.decodeDigit(f),o.append(h.toString()),a.forEach(function(g){r+=g})}}decodeStart(t){let r=Fe.skipWhiteSpace(t),i=Fe.findGuardPattern(t,r,Fe.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i}validateQuietZone(t,r){let i=this.narrowLineWidth*10;i=i<r?i:r;for(let o=r-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new H}static skipWhiteSpace(t){const r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new H;return i}decodeEnd(t){t.reverse();try{let r=Fe.skipWhiteSpace(t),i;try{i=Fe.findGuardPattern(t,r,Fe.END_PATTERN_REVERSED[0])}catch(a){a instanceof H&&(i=Fe.findGuardPattern(t,r,Fe.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);let o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}}static findGuardPattern(t,r,i){let o=i.length,a=new Int32Array(o),c=t.getSize(),f=!1,h=0,g=r;a.fill(0);for(let m=r;m<c;m++)if(t.get(m)!==f)a[h]++;else{if(h===o-1){if(ct.patternMatchVariance(a,i,Fe.MAX_INDIVIDUAL_VARIANCE)<Fe.MAX_AVG_VARIANCE)return[g,m];g+=a[0]+a[1],j.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,f=!f}throw new H}static decodeDigit(t){let r=Fe.MAX_AVG_VARIANCE,i=-1,o=Fe.PATTERNS.length;for(let a=0;a<o;a++){let c=Fe.PATTERNS[a],f=ct.patternMatchVariance(t,c,Fe.MAX_INDIVIDUAL_VARIANCE);f<r?(r=f,i=a):f===r&&(i=-1)}if(i>=0)return i%10;throw new H}}Fe.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Fe.MAX_AVG_VARIANCE=.38,Fe.MAX_INDIVIDUAL_VARIANCE=.5,Fe.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Fe.START_PATTERN=Int32Array.from([1,1,1,1]),Fe.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class tt extends ct{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let r=!1,i,o=0,a=Int32Array.from([0,0,0]);for(;!r;){a=Int32Array.from([0,0,0]),i=tt.findGuardPattern(t,o,!1,this.START_END_PATTERN,a);let c=i[0];o=i[1];let f=c-(o-c);f>=0&&(r=t.isRange(f,c,!1))}return i}static checkChecksum(t){return tt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let i=parseInt(t.charAt(r-1),10);return tt.getStandardUPCEANChecksum(t.substring(0,r-1))===i}static getStandardUPCEANChecksum(t){let r=t.length,i=0;for(let o=r-1;o>=0;o-=2){let a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new z;i+=a}i*=3;for(let o=r-2;o>=0;o-=2){let a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new z;i+=a}return(1e3-i)%10}static decodeEnd(t,r){return tt.findGuardPattern(t,r,!1,tt.START_END_PATTERN,new Int32Array(tt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,r,i,o){return this.findGuardPattern(t,r,i,o,new Int32Array(o.length))}static findGuardPattern(t,r,i,o,a){let c=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);let f=0,h=r,g=o.length,m=i;for(let v=r;v<c;v++)if(t.get(v)!==m)a[f]++;else{if(f===g-1){if(ct.patternMatchVariance(a,o,tt.MAX_INDIVIDUAL_VARIANCE)<tt.MAX_AVG_VARIANCE)return Int32Array.from([h,v]);h+=a[0]+a[1];let A=a.slice(2,a.length-1);for(let _=0;_<f-1;_++)a[_]=A[_];a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,m=!m}throw new H}static decodeDigit(t,r,i,o){this.recordPattern(t,i,r);let a=this.MAX_AVG_VARIANCE,c=-1,f=o.length;for(let h=0;h<f;h++){let g=o[h],m=ct.patternMatchVariance(r,g,tt.MAX_INDIVIDUAL_VARIANCE);m<a&&(a=m,c=h)}if(c>=0)return c;throw new H}}tt.MAX_AVG_VARIANCE=.48,tt.MAX_INDIVIDUAL_VARIANCE=.7,tt.START_END_PATTERN=Int32Array.from([1,1,1]),tt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),tt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),tt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Zi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,i){let o=this.decodeRowStringBuffer,a=this.decodeMiddle(r,i,o),c=o.toString(),f=Zi.parseExtensionString(c),h=[new de((i[0]+i[1])/2,t),new de(a,t)],g=new Qe(c,null,0,h,he.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&g.putAllMetadata(f),g}decodeMiddle(t,r,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),c=r[1],f=0;for(let g=0;g<5&&c<a;g++){let m=tt.decodeDigit(t,o,c,tt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);for(let v of o)c+=v;m>=10&&(f|=1<<4-g),g!==4&&(c=t.getNextSet(c),c=t.getNextUnset(c))}if(i.length!==5)throw new H;let h=this.determineCheckDigit(f);if(Zi.extensionChecksum(i.toString())!==h)throw new H;return c}static extensionChecksum(t){let r=t.length,i=0;for(let o=r-2;o>=0;o-=2)i+=t.charAt(o).charCodeAt(0)-48;i*=3;for(let o=r-1;o>=0;o-=2)i+=t.charAt(o).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(t){for(let r=0;r<10;r++)if(t===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new H}static parseExtensionString(t){if(t.length!==5)return null;let r=Zi.parseExtension5String(t);return r==null?null:new Map([[pt.SUGGESTED_PRICE,r]])}static parseExtension5String(t){let r;switch(t.charAt(0)){case"0":r="£";break;case"5":r="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let i=parseInt(t.substring(1)),o=(i/100).toString(),a=i%100,c=a<10?"0"+a:a.toString();return r+o+"."+c}}class Ba{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,r,i){let o=this.decodeRowStringBuffer,a=this.decodeMiddle(r,i,o),c=o.toString(),f=Ba.parseExtensionString(c),h=[new de((i[0]+i[1])/2,t),new de(a,t)],g=new Qe(c,null,0,h,he.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&g.putAllMetadata(f),g}decodeMiddle(t,r,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),c=r[1],f=0;for(let h=0;h<2&&c<a;h++){let g=tt.decodeDigit(t,o,c,tt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);for(let m of o)c+=m;g>=10&&(f|=1<<1-h),h!==1&&(c=t.getNextSet(c),c=t.getNextUnset(c))}if(i.length!==2)throw new H;if(parseInt(i.toString())%4!==f)throw new H;return c}static parseExtensionString(t){return t.length!==2?null:new Map([[pt.ISSUE_NUMBER,parseInt(t)]])}}class _u{static decodeRow(t,r,i){let o=tt.findGuardPattern(r,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Zi().decodeRow(t,r,o)}catch{return new Ba().decodeRow(t,r,o)}}}_u.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class De extends tt{constructor(){super(),this.decodeRowStringBuffer="",De.L_AND_G_PATTERNS=De.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let r=De.L_PATTERNS[t-10],i=new Int32Array(r.length);for(let o=0;o<r.length;o++)i[o]=r[r.length-o-1];De.L_AND_G_PATTERNS[t]=i}}decodeRow(t,r,i){let o=De.findStartGuardPattern(r),a=i==null?null:i.get(K.NEED_RESULT_POINT_CALLBACK);if(a!=null){const J=new de((o[0]+o[1])/2,t);a.foundPossibleResultPoint(J)}let c=this.decodeMiddle(r,o,this.decodeRowStringBuffer),f=c.rowOffset,h=c.resultString;if(a!=null){const J=new de(f,t);a.foundPossibleResultPoint(J)}let g=this.decodeEnd(r,f);if(a!=null){const J=new de((g[0]+g[1])/2,t);a.foundPossibleResultPoint(J)}let m=g[1],v=m+(m-g[0]);if(v>=r.getSize()||!r.isRange(m,v,!1))throw new H;let A=h.toString();if(A.length<8)throw new z;if(!De.checkChecksum(A))throw new B;let _=(o[1]+o[0])/2,k=(g[1]+g[0])/2,D=this.getBarcodeFormat(),V=[new de(_,t),new de(k,t)],X=new Qe(A,null,0,V,D,new Date().getTime()),ne=0;try{let J=_u.decodeRow(t,r,g[1]);X.putMetadata(pt.UPC_EAN_EXTENSION,J.getText()),X.putAllMetadata(J.getResultMetadata()),X.addResultPoints(J.getResultPoints()),ne=J.getText().length}catch{}let re=i==null?null:i.get(K.ALLOWED_EAN_EXTENSIONS);if(re!=null){let J=!1;for(let Ne in re)if(ne.toString()===Ne){J=!0;break}if(!J)throw new H}return X}decodeEnd(t,r){return De.findGuardPattern(t,r,!1,De.START_END_PATTERN,new Int32Array(De.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return De.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let r=t.length;if(r===0)return!1;let i=parseInt(t.charAt(r-1),10);return De.getStandardUPCEANChecksum(t.substring(0,r-1))===i}static getStandardUPCEANChecksum(t){let r=t.length,i=0;for(let o=r-1;o>=0;o-=2){let a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new z;i+=a}i*=3;for(let o=r-2;o>=0;o-=2){let a=t.charAt(o).charCodeAt(0)-48;if(a<0||a>9)throw new z;i+=a}return(1e3-i)%10}}class Pr extends De{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,i){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),c=r[1],f=0;for(let g=0;g<6&&c<a;g++){let m=De.decodeDigit(t,o,c,De.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);for(let v of o)c+=v;m>=10&&(f|=1<<5-g)}i=Pr.determineFirstDigit(i,f),c=De.findGuardPattern(t,c,!0,De.MIDDLE_PATTERN,new Int32Array(De.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<6&&c<a;g++){let m=De.decodeDigit(t,o,c,De.L_PATTERNS);i+=String.fromCharCode(48+m);for(let v of o)c+=v}return{rowOffset:c,resultString:i}}getBarcodeFormat(){return he.EAN_13}static determineFirstDigit(t,r){for(let i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new H}}Pr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Tu extends De{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,r,i){const o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),c=r[1];for(let h=0;h<4&&c<a;h++){let g=De.decodeDigit(t,o,c,De.L_PATTERNS);i+=String.fromCharCode(48+g);for(let m of o)c+=m}c=De.findGuardPattern(t,c,!0,De.MIDDLE_PATTERN,new Int32Array(De.MIDDLE_PATTERN.length).fill(0))[1];for(let h=0;h<4&&c<a;h++){let g=De.decodeDigit(t,o,c,De.L_PATTERNS);i+=String.fromCharCode(48+g);for(let m of o)c+=m}return{rowOffset:c,resultString:i}}getBarcodeFormat(){return he.EAN_8}}class Ru extends De{constructor(){super(...arguments),this.ean13Reader=new Pr}getBarcodeFormat(){return he.UPC_A}decode(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))}decodeMiddle(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)}maybeReturnResult(t){let r=t.getText();if(r.charAt(0)==="0"){let i=new Qe(r.substring(1),null,null,t.getResultPoints(),he.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new H}reset(){this.ean13Reader.reset()}}class En extends De{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,r,i){const o=this.decodeMiddleCounters.map(g=>g);o[0]=0,o[1]=0,o[2]=0,o[3]=0;const a=t.getSize();let c=r[1],f=0;for(let g=0;g<6&&c<a;g++){const m=En.decodeDigit(t,o,c,En.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);for(let v of o)c+=v;m>=10&&(f|=1<<5-g)}let h=En.determineNumSysAndCheckDigit(i,f);return{rowOffset:c,resultString:h}}decodeEnd(t,r){return En.findGuardPatternWithoutCounters(t,r,!0,En.MIDDLE_END_PATTERN)}checkChecksum(t){return De.checkChecksum(En.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,r){for(let i=0;i<=1;i++)for(let o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){let a=String.fromCharCode(48+i),c=String.fromCharCode(48+o);return a+t+c}throw H.getNotFoundInstance()}getBarcodeFormat(){return he.UPC_E}static convertUPCEtoUPCA(t){const r=t.slice(1,7).split("").map(a=>a.charCodeAt(0)),i=new fe;i.append(t.charAt(0));let o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()}}En.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),En.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class La extends ct{constructor(t){super();let r=t==null?null:t.get(K.POSSIBLE_FORMATS),i=[];l(r)?(i.push(new Pr),i.push(new Ru),i.push(new Tu),i.push(new En)):(r.indexOf(he.EAN_13)>-1&&i.push(new Pr),r.indexOf(he.UPC_A)>-1&&i.push(new Ru),r.indexOf(he.EAN_8)>-1&&i.push(new Tu),r.indexOf(he.UPC_E)>-1&&i.push(new En)),this.readers=i}decodeRow(t,r,i){for(let o of this.readers)try{const a=o.decodeRow(t,r,i),c=a.getBarcodeFormat()===he.EAN_13&&a.getText().charAt(0)==="0",f=i==null?null:i.get(K.POSSIBLE_FORMATS),h=f==null||f.includes(he.UPC_A);if(c&&h){const g=a.getRawBytes(),m=new Qe(a.getText().substring(1),g,g?g.length:null,a.getResultPoints(),he.UPC_A);return m.putAllMetadata(a.getResultMetadata()),m}return a}catch{}throw new H}reset(){for(let t of this.readers)t.reset()}}class _t extends ct{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,r){for(let i=0;i<r.length;i++)if(ct.patternMatchVariance(t,r[i],_t.MAX_INDIVIDUAL_VARIANCE)<_t.MAX_AVG_VARIANCE)return i;throw new H}static count(t){return _e.sum(new Int32Array(t))}static increment(t,r){let i=0,o=r[0];for(let a=1;a<t.length;a++)r[a]>o&&(o=r[a],i=a);t[i]++}static decrement(t,r){let i=0,o=r[0];for(let a=1;a<t.length;a++)r[a]<o&&(o=r[a],i=a);t[i]--}static isFinderPattern(t){let r=t[0]+t[1],i=r+t[2]+t[3],o=r/i;if(o>=_t.MIN_FINDER_PATTERN_RATIO&&o<=_t.MAX_FINDER_PATTERN_RATIO){let a=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;for(let f of t)f>c&&(c=f),f<a&&(a=f);return c<10*a}return!1}}_t.MAX_AVG_VARIANCE=.2,_t.MAX_INDIVIDUAL_VARIANCE=.45,_t.MIN_FINDER_PATTERN_RATIO=9.5/12,_t.MAX_FINDER_PATTERN_RATIO=12.5/14;class ri{constructor(t,r){this.value=t,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof ri))return!1;const r=t;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class to{constructor(t,r,i,o,a){this.value=t,this.startEnd=r,this.value=t,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new de(i,a)),this.resultPoints.push(new de(o,a))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof to))return!1;const r=t;return this.value===r.value}hashCode(){return this.value}}class Rn{constructor(){}static getRSSvalue(t,r,i){let o=0;for(let h of t)o+=h;let a=0,c=0,f=t.length;for(let h=0;h<f-1;h++){let g;for(g=1,c|=1<<h;g<t[h];g++,c&=~(1<<h)){let m=Rn.combins(o-g-1,f-h-2);if(i&&c===0&&o-g-(f-h-1)>=f-h-1&&(m-=Rn.combins(o-g-(f-h),f-h-2)),f-h-1>1){let v=0;for(let A=o-g-(f-h-2);A>r;A--)v+=Rn.combins(o-g-A-1,f-h-3);m-=v*(f-1-h)}else o-g>r&&m--;a+=m}o-=g}return a}static combins(t,r){let i,o;t-r>r?(o=r,i=t-r):(o=t-r,i=r);let a=1,c=1;for(let f=t;f>i;f--)a*=f,c<=o&&(a/=c,c++);for(;c<=o;)a/=c,c++;return a}}class xh{static buildBitArray(t){let r=t.length*2-1;t[t.length-1].getRightChar()==null&&(r-=1);let i=12*r,o=new L(i),a=0,f=t[0].getRightChar().getValue();for(let h=11;h>=0;--h)f&1<<h&&o.set(a),a++;for(let h=1;h<t.length;++h){let g=t[h],m=g.getLeftChar().getValue();for(let v=11;v>=0;--v)m&1<<v&&o.set(a),a++;if(g.getRightChar()!=null){let v=g.getRightChar().getValue();for(let A=11;A>=0;--A)v&1<<A&&o.set(a),a++}}return o}}class Br{constructor(t,r){r?this.decodedInformation=null:(this.finished=t,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Fa{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Wt extends Fa{constructor(t,r){super(t),this.value=r}getValue(){return this.value}isFNC1(){return this.value===Wt.FNC1}}Wt.FNC1="$";class Lr extends Fa{constructor(t,r,i){super(t),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class cn extends Fa{constructor(t,r,i){if(super(t),r<0||r>10||i<0||i>10)throw new z;this.firstDigit=r,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===cn.FNC1}isSecondDigitFNC1(){return this.secondDigit===cn.FNC1}isAnyFNC1(){return this.firstDigit===cn.FNC1||this.secondDigit===cn.FNC1}}cn.FNC1=10;class le{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new H;let r=t.substring(0,2);for(let a of le.TWO_DIGIT_DATA_LENGTH)if(a[0]===r)return a[1]===le.VARIABLE_LENGTH?le.processVariableAI(2,a[2],t):le.processFixedAI(2,a[1],t);if(t.length<3)throw new H;let i=t.substring(0,3);for(let a of le.THREE_DIGIT_DATA_LENGTH)if(a[0]===i)return a[1]===le.VARIABLE_LENGTH?le.processVariableAI(3,a[2],t):le.processFixedAI(3,a[1],t);for(let a of le.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(a[0]===i)return a[1]===le.VARIABLE_LENGTH?le.processVariableAI(4,a[2],t):le.processFixedAI(4,a[1],t);if(t.length<4)throw new H;let o=t.substring(0,4);for(let a of le.FOUR_DIGIT_DATA_LENGTH)if(a[0]===o)return a[1]===le.VARIABLE_LENGTH?le.processVariableAI(4,a[2],t):le.processFixedAI(4,a[1],t);throw new H}static processFixedAI(t,r,i){if(i.length<t)throw new H;let o=i.substring(0,t);if(i.length<t+r)throw new H;let a=i.substring(t,t+r),c=i.substring(t+r),f="("+o+")"+a,h=le.parseFieldsInGeneralPurpose(c);return h==null?f:f+h}static processVariableAI(t,r,i){let o=i.substring(0,t),a;i.length<t+r?a=i.length:a=t+r;let c=i.substring(t,a),f=i.substring(a),h="("+o+")"+c,g=le.parseFieldsInGeneralPurpose(f);return g==null?h:h+g}}le.VARIABLE_LENGTH=[],le.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",le.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",le.VARIABLE_LENGTH,20],["22",le.VARIABLE_LENGTH,29],["30",le.VARIABLE_LENGTH,8],["37",le.VARIABLE_LENGTH,8],["90",le.VARIABLE_LENGTH,30],["91",le.VARIABLE_LENGTH,30],["92",le.VARIABLE_LENGTH,30],["93",le.VARIABLE_LENGTH,30],["94",le.VARIABLE_LENGTH,30],["95",le.VARIABLE_LENGTH,30],["96",le.VARIABLE_LENGTH,30],["97",le.VARIABLE_LENGTH,3],["98",le.VARIABLE_LENGTH,30],["99",le.VARIABLE_LENGTH,30]],le.THREE_DIGIT_DATA_LENGTH=[["240",le.VARIABLE_LENGTH,30],["241",le.VARIABLE_LENGTH,30],["242",le.VARIABLE_LENGTH,6],["250",le.VARIABLE_LENGTH,30],["251",le.VARIABLE_LENGTH,30],["253",le.VARIABLE_LENGTH,17],["254",le.VARIABLE_LENGTH,20],["400",le.VARIABLE_LENGTH,30],["401",le.VARIABLE_LENGTH,30],["402",17],["403",le.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",le.VARIABLE_LENGTH,20],["421",le.VARIABLE_LENGTH,15],["422",3],["423",le.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],le.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",le.VARIABLE_LENGTH,15],["391",le.VARIABLE_LENGTH,18],["392",le.VARIABLE_LENGTH,15],["393",le.VARIABLE_LENGTH,18],["703",le.VARIABLE_LENGTH,30]],le.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",le.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",le.VARIABLE_LENGTH,20],["8003",le.VARIABLE_LENGTH,30],["8004",le.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",le.VARIABLE_LENGTH,30],["8008",le.VARIABLE_LENGTH,12],["8018",18],["8020",le.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",le.VARIABLE_LENGTH,70],["8200",le.VARIABLE_LENGTH,70]];class ii{constructor(t){this.buffer=new fe,this.information=t}decodeAllCodes(t,r){let i=r,o=null;do{let a=this.decodeGeneralPurposeField(i,o),c=le.parseFieldsInGeneralPurpose(a.getNewString());if(c!=null&&t.append(c),a.isRemaining()?o=""+a.getRemainingValue():o=null,i===a.getNewPosition())break;i=a.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let r=t;r<t+3;++r)if(this.information.get(r))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let a=this.extractNumericValueFromBitArray(t,4);return a===0?new cn(this.information.getSize(),cn.FNC1,cn.FNC1):new cn(this.information.getSize(),a-1,cn.FNC1)}let r=this.extractNumericValueFromBitArray(t,7),i=(r-8)/11,o=(r-8)%11;return new cn(t+7,i,o)}extractNumericValueFromBitArray(t,r){return ii.extractNumericValueFromBitArray(this.information,t,r)}static extractNumericValueFromBitArray(t,r,i){let o=0;for(let a=0;a<i;++a)t.get(r+a)&&(o|=1<<i-a-1);return o}decodeGeneralPurposeField(t,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(t);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new Lr(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new Lr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,r;do{let i=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),t=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),t=r.isFinished()):(r=this.parseNumericBlock(),t=r.isFinished()),!(i!==this.current.getPosition())&&!t)break}while(!t);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let r;return t.isSecondDigitFNC1()?r=new Lr(this.current.getPosition(),this.buffer.toString()):r=new Lr(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Br(!0,r)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let r=new Lr(this.current.getPosition(),this.buffer.toString());return new Br(!0,r)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Br(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Lr(this.current.getPosition(),this.buffer.toString());return new Br(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Br(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let r=new Lr(this.current.getPosition(),this.buffer.toString());return new Br(!0,r)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Br(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,7);if(i>=64&&i<116)return!0;if(t+8>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,8);return o>=232&&o<253}decodeIsoIec646(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new Wt(t+5,Wt.FNC1);if(r>=5&&r<15)return new Wt(t+5,"0"+(r-5));let i=this.extractNumericValueFromBitArray(t,7);if(i>=64&&i<90)return new Wt(t+7,""+(i+1));if(i>=90&&i<116)return new Wt(t+7,""+(i+7));let o=this.extractNumericValueFromBitArray(t,8),a;switch(o){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new z}return new Wt(t+8,a)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,5);if(r>=5&&r<16)return!0;if(t+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,6);return i>=16&&i<63}decodeAlphanumeric(t){let r=this.extractNumericValueFromBitArray(t,5);if(r===15)return new Wt(t+5,Wt.FNC1);if(r>=5&&r<15)return new Wt(t+5,"0"+(r-5));let i=this.extractNumericValueFromBitArray(t,6);if(i>=32&&i<58)return new Wt(t+6,""+(i+33));let o;switch(i){case 58:o="*";break;case 59:o=",";break;case 60:o="-";break;case 61:o=".";break;case 62:o="/";break;default:throw new Tn("Decoding invalid alphanumeric value: "+i)}return new Wt(t+6,o)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<5&&r+t<this.information.getSize();++r)if(r===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+r))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let r=t;r<t+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let r=0;r<4&&r+t<this.information.getSize();++r)if(this.information.get(t+r))return!1;return!0}}class ja{constructor(t){this.information=t,this.generalDecoder=new ii(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class zt extends ja{constructor(t){super(t)}encodeCompressedGtin(t,r){t.append("(01)");let i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)}encodeCompressedGtinWithoutAI(t,r,i){for(let o=0;o<4;++o){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);a/100===0&&t.append("0"),a/10===0&&t.append("0"),t.append(a)}zt.appendCheckDigit(t,i)}static appendCheckDigit(t,r){let i=0;for(let o=0;o<13;o++){let a=t.charAt(o+r).charCodeAt(0)-48;i+=o&1?a:3*a}i=10-i%10,i===10&&(i=0),t.append(i)}}zt.GTIN_SIZE=40;class si extends zt{constructor(t){super(t)}parseInformation(){let t=new fe;t.append("(01)");let r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(si.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,si.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,si.HEADER_SIZE+44)}}si.HEADER_SIZE=4;class no extends ja{constructor(t){super(t)}parseInformation(){let t=new fe;return this.getGeneralDecoder().decodeAllCodes(t,no.HEADER_SIZE)}}no.HEADER_SIZE=5;class ro extends zt{constructor(t){super(t)}encodeCompressedWeight(t,r,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,o);let a=this.checkWeight(o),c=1e5;for(let f=0;f<5;++f)a/c===0&&t.append("0"),c/=10;t.append(a)}}class On extends ro{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=On.HEADER_SIZE+ro.GTIN_SIZE+On.WEIGHT_SIZE)throw new H;let t=new fe;return this.encodeCompressedGtin(t,On.HEADER_SIZE),this.encodeCompressedWeight(t,On.HEADER_SIZE+ro.GTIN_SIZE,On.WEIGHT_SIZE),t.toString()}}On.HEADER_SIZE=5,On.WEIGHT_SIZE=15;class ph extends On{constructor(t){super(t)}addWeightCode(t,r){t.append("(3103)")}checkWeight(t){return t}}class mh extends On{constructor(t){super(t)}addWeightCode(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class kn extends zt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<kn.HEADER_SIZE+zt.GTIN_SIZE)throw new H;let t=new fe;this.encodeCompressedGtin(t,kn.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(kn.HEADER_SIZE+zt.GTIN_SIZE,kn.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(kn.HEADER_SIZE+zt.GTIN_SIZE+kn.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()}}kn.HEADER_SIZE=8,kn.LAST_DIGIT_SIZE=2;class Pt extends zt{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Pt.HEADER_SIZE+zt.GTIN_SIZE)throw new H;let t=new fe;this.encodeCompressedGtin(t,Pt.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Pt.HEADER_SIZE+zt.GTIN_SIZE,Pt.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Pt.HEADER_SIZE+zt.GTIN_SIZE+Pt.LAST_DIGIT_SIZE,Pt.FIRST_THREE_DIGITS_SIZE);i/100==0&&t.append("0"),i/10==0&&t.append("0"),t.append(i);let o=this.getGeneralDecoder().decodeGeneralPurposeField(Pt.HEADER_SIZE+zt.GTIN_SIZE+Pt.LAST_DIGIT_SIZE+Pt.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()}}Pt.HEADER_SIZE=8,Pt.LAST_DIGIT_SIZE=2,Pt.FIRST_THREE_DIGITS_SIZE=10;class Ze extends ro{constructor(t,r,i){super(t),this.dateCode=i,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=Ze.HEADER_SIZE+Ze.GTIN_SIZE+Ze.WEIGHT_SIZE+Ze.DATE_SIZE)throw new H;let t=new fe;return this.encodeCompressedGtin(t,Ze.HEADER_SIZE),this.encodeCompressedWeight(t,Ze.HEADER_SIZE+Ze.GTIN_SIZE,Ze.WEIGHT_SIZE),this.encodeCompressedDate(t,Ze.HEADER_SIZE+Ze.GTIN_SIZE+Ze.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,Ze.DATE_SIZE);if(i==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let o=i%32;i/=32;let a=i%12+1;i/=12;let c=i;c/10==0&&t.append("0"),t.append(c),a/10==0&&t.append("0"),t.append(a),o/10==0&&t.append("0"),t.append(o)}addWeightCode(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")}checkWeight(t){return t%1e5}}Ze.HEADER_SIZE=8,Ze.WEIGHT_SIZE=20,Ze.DATE_SIZE=16;function Ou(C){try{if(C.get(1))return new si(C);if(!C.get(2))return new no(C);switch(ii.extractNumericValueFromBitArray(C,1,4)){case 4:return new ph(C);case 5:return new mh(C)}switch(ii.extractNumericValueFromBitArray(C,1,5)){case 12:return new kn(C);case 13:return new Pt(C)}switch(ii.extractNumericValueFromBitArray(C,1,7)){case 56:return new Ze(C,"310","11");case 57:return new Ze(C,"320","11");case 58:return new Ze(C,"310","13");case 59:return new Ze(C,"320","13");case 60:return new Ze(C,"310","15");case 61:return new Ze(C,"320","15");case 62:return new Ze(C,"310","17");case 63:return new Ze(C,"320","17")}}catch(t){throw console.log(t),new Tn("unknown decoder: "+C)}}class rr{constructor(t,r,i,o){this.leftchar=t,this.rightchar=r,this.finderpattern=i,this.maybeLast=o}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,r){return t instanceof rr?rr.equalsOrNull(t.leftchar,r.leftchar)&&rr.equalsOrNull(t.rightchar,r.rightchar)&&rr.equalsOrNull(t.finderpattern,r.finderpattern):!1}static equalsOrNull(t,r){return t===null?r===null:rr.equals(t,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ua{constructor(t,r,i){this.pairs=t,this.rowNumber=r,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,r){return t instanceof Ua?this.checkEqualitity(t,r)&&t.wasReversed===r.wasReversed:!1}checkEqualitity(t,r){if(!t||!r)return;let i;return t.forEach((o,a)=>{r.forEach(c=>{o.getLeftChar().getValue()===c.getLeftChar().getValue()&&o.getRightChar().getValue()===c.getRightChar().getValue()&&o.getFinderPatter().getValue()===c.getFinderPatter().getValue()&&(i=!0)})}),i}}class Q extends _t{constructor(t){super(...arguments),this.pairs=new Array(Q.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return Q.constructResult(this.decodeRow2pairs(t,r))}catch(o){this.verbose&&console.log(o)}return this.pairs.length=0,this.startFromEven=!0,Q.constructResult(this.decodeRow2pairs(t,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,r){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(a){if(a instanceof H){if(!this.pairs.length)throw new H;i=!0}}if(this.checkChecksum())return this.pairs;let o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){let a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new H}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return t&&(this.rows=this.rows.reverse()),r}checkRows(t,r){for(let i=r;i<this.rows.length;i++){let o=this.rows[i];this.pairs.length=0;for(let c of t)this.pairs.push(c.getPairs());if(this.pairs.push(o.getPairs()),!Q.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let a=new Array(t);a.push(o);try{return this.checkRows(a,i+1)}catch(c){this.verbose&&console.log(c)}}throw new H}static isValidSequence(t){for(let r of Q.FINDER_PATTERN_SEQUENCES){if(t.length>r.length)continue;let i=!0;for(let o=0;o<t.length;o++)if(t[o].getFinderPattern().getValue()!=r[o]){i=!1;break}if(i)return!0}return!1}storeRow(t,r){let i=0,o=!1,a=!1;for(;i<this.rows.length;){let c=this.rows[i];if(c.getRowNumber()>t){a=c.isEquivalent(this.pairs);break}o=c.isEquivalent(this.pairs),i++}a||o||Q.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new Ua(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,r){for(let i of r)if(i.getPairs().length!==t.length){for(let o of i.getPairs())for(let a of t)if(rr.equals(o,a))break}}static isPartialRow(t,r){for(let i of r){let o=!0;for(let a of t){let c=!1;for(let f of i.getPairs())if(a.equals(f)){c=!0;break}if(!c){o=!1;break}}if(o)return!0}return!1}getRows(){return this.rows}static constructResult(t){let r=xh.buildBitArray(t),o=Ou(r).parseInformation(),a=t[0].getFinderPattern().getResultPoints(),c=t[t.length-1].getFinderPattern().getResultPoints(),f=[a[0],a[1],c[0],c[1]];return new Qe(o,null,null,f,he.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i==null)return!1;let o=i.getChecksumPortion(),a=2;for(let f=1;f<this.pairs.size();++f){let h=this.pairs.get(f);o+=h.getLeftChar().getChecksumPortion(),a++;let g=h.getRightChar();g!=null&&(o+=g.getChecksumPortion(),a++)}return o%=211,211*(a-4)+o==r.getValue()}static getNextSecondBar(t,r){let i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i}retrieveNextPair(t,r,i){let o=r.length%2==0;this.startFromEven&&(o=!o);let a,c=!0,f=-1;do this.findNextPair(t,r,f),a=this.parseFoundFinderPattern(t,i,o),a==null?f=Q.getNextSecondBar(t,this.startEnd[0]):c=!1;while(c);let h=this.decodeDataCharacter(t,a,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new H;let g;try{g=this.decodeDataCharacter(t,a,o,!1)}catch(m){g=null,this.verbose&&console.log(m)}return new rr(h,g,a,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,r,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let a=t.getSize(),c;i>=0?c=i:this.isEmptyPair(r)?c=0:c=r[r.length-1].getFinderPattern().getStartEnd()[1];let f=r.length%2!=0;this.startFromEven&&(f=!f);let h=!1;for(;c<a&&(h=!t.get(c),!!h);)c++;let g=0,m=c;for(let v=c;v<a;v++)if(t.get(v)!=h)o[g]++;else{if(g==3){if(f&&Q.reverseCounters(o),Q.isFinderPattern(o)){this.startEnd[0]=m,this.startEnd[1]=v;return}f&&Q.reverseCounters(o),m+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,g--}else g++;o[g]=1,h=!h}throw new H}static reverseCounters(t){let r=t.length;for(let i=0;i<r/2;++i){let o=t[i];t[i]=t[r-i-1],t[r-i-1]=o}}parseFoundFinderPattern(t,r,i){let o,a,c;if(i){let g=this.startEnd[0]-1;for(;g>=0&&!t.get(g);)g--;g++,o=this.startEnd[0]-g,a=g,c=this.startEnd[1]}else a=this.startEnd[0],c=t.getNextUnset(this.startEnd[1]+1),o=c-this.startEnd[1];let f=this.getDecodeFinderCounters();j.arraycopy(f,0,f,1,f.length-1),f[0]=o;let h;try{h=this.parseFinderValue(f,Q.FINDER_PATTERNS)}catch{return null}return new to(h,[a,c],a,c,r)}decodeDataCharacter(t,r,i,o){let a=this.getDataCharacterCounters();for(let Ue=0;Ue<a.length;Ue++)a[Ue]=0;if(o)Q.recordPatternInReverse(t,r.getStartEnd()[0],a);else{Q.recordPattern(t,r.getStartEnd()[1],a);for(let Ue=0,St=a.length-1;Ue<St;Ue++,St--){let Jt=a[Ue];a[Ue]=a[St],a[St]=Jt}}let c=17,f=_e.sum(new Int32Array(a))/c,h=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(f-h)/h>.3)throw new H;let g=this.getOddCounts(),m=this.getEvenCounts(),v=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let Ue=0;Ue<a.length;Ue++){let St=1*a[Ue]/f,Jt=St+.5;if(Jt<1){if(St<.3)throw new H;Jt=1}else if(Jt>8){if(St>8.7)throw new H;Jt=8}let ui=Ue/2;Ue&1?(m[ui]=Jt,A[ui]=St-Jt):(g[ui]=Jt,v[ui]=St-Jt)}this.adjustOddEvenCounts(c);let _=4*r.getValue()+(i?0:2)+(o?0:1)-1,k=0,D=0;for(let Ue=g.length-1;Ue>=0;Ue--){if(Q.isNotA1left(r,i,o)){let St=Q.WEIGHTS[_][2*Ue];D+=g[Ue]*St}k+=g[Ue]}let V=0;for(let Ue=m.length-1;Ue>=0;Ue--)if(Q.isNotA1left(r,i,o)){let St=Q.WEIGHTS[_][2*Ue+1];V+=m[Ue]*St}let X=D+V;if(k&1||k>13||k<4)throw new H;let ne=(13-k)/2,re=Q.SYMBOL_WIDEST[ne],J=9-re,Ne=Rn.getRSSvalue(g,re,!0),Ce=Rn.getRSSvalue(m,J,!1),Gt=Q.EVEN_TOTAL_SUBSET[ne],Cn=Q.GSUM[ne],Xt=Ne*Gt+Ce+Cn;return new ri(Xt,X)}static isNotA1left(t,r,i){return!(t.getValue()==0&&r&&i)}adjustOddEvenCounts(t){let r=_e.sum(new Int32Array(this.getOddCounts())),i=_e.sum(new Int32Array(this.getEvenCounts())),o=!1,a=!1;r>13?a=!0:r<4&&(o=!0);let c=!1,f=!1;i>13?f=!0:i<4&&(c=!0);let h=r+i-t,g=(r&1)==1,m=(i&1)==0;if(h==1)if(g){if(m)throw new H;a=!0}else{if(!m)throw new H;f=!0}else if(h==-1)if(g){if(m)throw new H;o=!0}else{if(!m)throw new H;c=!0}else if(h==0){if(g){if(!m)throw new H;r<i?(o=!0,f=!0):(a=!0,c=!0)}else if(m)throw new H}else throw new H;if(o){if(a)throw new H;Q.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Q.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(f)throw new H;Q.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&Q.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Q.SYMBOL_WIDEST=[7,5,4,3,1],Q.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Q.GSUM=[0,348,1388,2948,3988],Q.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Q.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Q.FINDER_PAT_A=0,Q.FINDER_PAT_B=1,Q.FINDER_PAT_C=2,Q.FINDER_PAT_D=3,Q.FINDER_PAT_E=4,Q.FINDER_PAT_F=5,Q.FINDER_PATTERN_SEQUENCES=[[Q.FINDER_PAT_A,Q.FINDER_PAT_A],[Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B],[Q.FINDER_PAT_A,Q.FINDER_PAT_C,Q.FINDER_PAT_B,Q.FINDER_PAT_D],[Q.FINDER_PAT_A,Q.FINDER_PAT_E,Q.FINDER_PAT_B,Q.FINDER_PAT_D,Q.FINDER_PAT_C],[Q.FINDER_PAT_A,Q.FINDER_PAT_E,Q.FINDER_PAT_B,Q.FINDER_PAT_D,Q.FINDER_PAT_D,Q.FINDER_PAT_F],[Q.FINDER_PAT_A,Q.FINDER_PAT_E,Q.FINDER_PAT_B,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_F,Q.FINDER_PAT_F],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_D],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_E],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_F,Q.FINDER_PAT_F],[Q.FINDER_PAT_A,Q.FINDER_PAT_A,Q.FINDER_PAT_B,Q.FINDER_PAT_B,Q.FINDER_PAT_C,Q.FINDER_PAT_D,Q.FINDER_PAT_D,Q.FINDER_PAT_E,Q.FINDER_PAT_E,Q.FINDER_PAT_F,Q.FINDER_PAT_F]],Q.MAX_PAIRS=11;class wh extends ri{constructor(t,r,i){super(t,r),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class nt extends _t{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,r,i){const o=this.decodePair(r,!1,t,i);nt.addOrTally(this.possibleLeftPairs,o),r.reverse();let a=this.decodePair(r,!0,t,i);nt.addOrTally(this.possibleRightPairs,a),r.reverse();for(let c of this.possibleLeftPairs)if(c.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&nt.checkChecksum(c,f))return nt.constructResult(c,f)}throw new H}static addOrTally(t,r){if(r==null)return;let i=!1;for(let o of t)if(o.getValue()===r.getValue()){o.incrementCount(),i=!0;break}i||t.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,r){let i=4537077*t.getValue()+r.getValue(),o=new String(i).toString(),a=new fe;for(let g=13-o.length;g>0;g--)a.append("0");a.append(o);let c=0;for(let g=0;g<13;g++){let m=a.charAt(g).charCodeAt(0)-48;c+=g&1?m:3*m}c=10-c%10,c===10&&(c=0),a.append(c.toString());let f=t.getFinderPattern().getResultPoints(),h=r.getFinderPattern().getResultPoints();return new Qe(a.toString(),null,0,[f[0],f[1],h[0],h[1]],he.RSS_14,new Date().getTime())}static checkChecksum(t,r){let i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o}decodePair(t,r,i,o){try{let a=this.findFinderPattern(t,r),c=this.parseFoundFinderPattern(t,i,r,a),f=o==null?null:o.get(K.NEED_RESULT_POINT_CALLBACK);if(f!=null){let m=(a[0]+a[1])/2;r&&(m=t.getSize()-1-m),f.foundPossibleResultPoint(new de(m,i))}let h=this.decodeDataCharacter(t,c,!0),g=this.decodeDataCharacter(t,c,!1);return new wh(1597*h.getValue()+g.getValue(),h.getChecksumPortion()+4*g.getChecksumPortion(),c)}catch{return null}}decodeDataCharacter(t,r,i){let o=this.getDataCharacterCounters();for(let V=0;V<o.length;V++)o[V]=0;if(i)ct.recordPatternInReverse(t,r.getStartEnd()[0],o);else{ct.recordPattern(t,r.getStartEnd()[1]+1,o);for(let V=0,X=o.length-1;V<X;V++,X--){let ne=o[V];o[V]=o[X],o[X]=ne}}let a=i?16:15,c=_e.sum(new Int32Array(o))/a,f=this.getOddCounts(),h=this.getEvenCounts(),g=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors();for(let V=0;V<o.length;V++){let X=o[V]/c,ne=Math.floor(X+.5);ne<1?ne=1:ne>8&&(ne=8);let re=Math.floor(V/2);V&1?(h[re]=ne,m[re]=X-ne):(f[re]=ne,g[re]=X-ne)}this.adjustOddEvenCounts(i,a);let v=0,A=0;for(let V=f.length-1;V>=0;V--)A*=9,A+=f[V],v+=f[V];let _=0,k=0;for(let V=h.length-1;V>=0;V--)_*=9,_+=h[V],k+=h[V];let D=A+3*_;if(i){if(v&1||v>12||v<4)throw new H;let V=(12-v)/2,X=nt.OUTSIDE_ODD_WIDEST[V],ne=9-X,re=Rn.getRSSvalue(f,X,!1),J=Rn.getRSSvalue(h,ne,!0),Ne=nt.OUTSIDE_EVEN_TOTAL_SUBSET[V],Ce=nt.OUTSIDE_GSUM[V];return new ri(re*Ne+J+Ce,D)}else{if(k&1||k>10||k<4)throw new H;let V=(10-k)/2,X=nt.INSIDE_ODD_WIDEST[V],ne=9-X,re=Rn.getRSSvalue(f,X,!0),J=Rn.getRSSvalue(h,ne,!1),Ne=nt.INSIDE_ODD_TOTAL_SUBSET[V],Ce=nt.INSIDE_GSUM[V];return new ri(J*Ne+re+Ce,D)}}findFinderPattern(t,r){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let o=t.getSize(),a=!1,c=0;for(;c<o&&(a=!t.get(c),r!==a);)c++;let f=0,h=c;for(let g=c;g<o;g++)if(t.get(g)!==a)i[f]++;else{if(f===3){if(_t.isFinderPattern(i))return[h,g];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,f--}else f++;i[f]=1,a=!a}throw new H}parseFoundFinderPattern(t,r,i,o){let a=t.get(o[0]),c=o[0]-1;for(;c>=0&&a!==t.get(c);)c--;c++;const f=o[0]-c,h=this.getDecodeFinderCounters(),g=new Int32Array(h.length);j.arraycopy(h,0,g,1,h.length-1),g[0]=f;const m=this.parseFinderValue(g,nt.FINDER_PATTERNS);let v=c,A=o[1];return i&&(v=t.getSize()-1-v,A=t.getSize()-1-A),new to(m,[c,o[1]],v,A,r)}adjustOddEvenCounts(t,r){let i=_e.sum(new Int32Array(this.getOddCounts())),o=_e.sum(new Int32Array(this.getEvenCounts())),a=!1,c=!1,f=!1,h=!1;t?(i>12?c=!0:i<4&&(a=!0),o>12?h=!0:o<4&&(f=!0)):(i>11?c=!0:i<5&&(a=!0),o>10?h=!0:o<4&&(f=!0));let g=i+o-r,m=(i&1)===(t?1:0),v=(o&1)===1;if(g===1)if(m){if(v)throw new H;c=!0}else{if(!v)throw new H;h=!0}else if(g===-1)if(m){if(v)throw new H;a=!0}else{if(!v)throw new H;f=!0}else if(g===0){if(m){if(!v)throw new H;i<o?(a=!0,h=!0):(c=!0,f=!0)}else if(v)throw new H}else throw new H;if(a){if(c)throw new H;_t.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&_t.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(h)throw new H;_t.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&_t.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}nt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],nt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],nt.OUTSIDE_GSUM=[0,161,961,2015,2715],nt.INSIDE_GSUM=[0,336,1036,1516],nt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],nt.INSIDE_ODD_WIDEST=[2,4,6,8],nt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class oi extends ct{constructor(t,r){super(),this.readers=[],this.verbose=r===!0;const i=t?t.get(K.POSSIBLE_FORMATS):null,o=t&&t.get(K.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(he.EAN_13)||i.includes(he.UPC_A)||i.includes(he.EAN_8)||i.includes(he.UPC_E))&&this.readers.push(new La(t)),i.includes(he.CODE_39)&&this.readers.push(new ft(o)),i.includes(he.CODE_128)&&this.readers.push(new oe),i.includes(he.ITF)&&this.readers.push(new Fe),i.includes(he.RSS_14)&&this.readers.push(new nt),i.includes(he.RSS_EXPANDED)&&this.readers.push(new Q(this.verbose))):(this.readers.push(new La(t)),this.readers.push(new ft),this.readers.push(new La(t)),this.readers.push(new oe),this.readers.push(new Fe),this.readers.push(new nt),this.readers.push(new Q(this.verbose)))}decodeRow(t,r,i){for(let o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,r,i)}catch{}throw new H}reset(){this.readers.forEach(t=>t.reset())}}class yh extends ln{constructor(t=500,r){super(new oi(r),t,r)}}class Pe{constructor(t,r,i){this.ecCodewords=t,this.ecBlocks=[r],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Me{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class be{constructor(t,r,i,o,a,c){this.versionNumber=t,this.symbolSizeRows=r,this.symbolSizeColumns=i,this.dataRegionSizeRows=o,this.dataRegionSizeColumns=a,this.ecBlocks=c;let f=0;const h=c.getECCodewords(),g=c.getECBlocks();for(let m of g)f+=m.getCount()*(m.getDataCodewords()+h);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,r){if(t&1||r&1)throw new z;for(let i of be.VERSIONS)if(i.symbolSizeRows===t&&i.symbolSizeColumns===r)return i;throw new z}toString(){return""+this.versionNumber}static buildVersions(){return[new be(1,10,10,8,8,new Pe(5,new Me(1,3))),new be(2,12,12,10,10,new Pe(7,new Me(1,5))),new be(3,14,14,12,12,new Pe(10,new Me(1,8))),new be(4,16,16,14,14,new Pe(12,new Me(1,12))),new be(5,18,18,16,16,new Pe(14,new Me(1,18))),new be(6,20,20,18,18,new Pe(18,new Me(1,22))),new be(7,22,22,20,20,new Pe(20,new Me(1,30))),new be(8,24,24,22,22,new Pe(24,new Me(1,36))),new be(9,26,26,24,24,new Pe(28,new Me(1,44))),new be(10,32,32,14,14,new Pe(36,new Me(1,62))),new be(11,36,36,16,16,new Pe(42,new Me(1,86))),new be(12,40,40,18,18,new Pe(48,new Me(1,114))),new be(13,44,44,20,20,new Pe(56,new Me(1,144))),new be(14,48,48,22,22,new Pe(68,new Me(1,174))),new be(15,52,52,24,24,new Pe(42,new Me(2,102))),new be(16,64,64,14,14,new Pe(56,new Me(2,140))),new be(17,72,72,16,16,new Pe(36,new Me(4,92))),new be(18,80,80,18,18,new Pe(48,new Me(4,114))),new be(19,88,88,20,20,new Pe(56,new Me(4,144))),new be(20,96,96,22,22,new Pe(68,new Me(4,174))),new be(21,104,104,24,24,new Pe(56,new Me(6,136))),new be(22,120,120,18,18,new Pe(68,new Me(6,175))),new be(23,132,132,20,20,new Pe(62,new Me(8,163))),new be(24,144,144,22,22,new Pe(62,new Me(8,156),new Me(2,155))),new be(25,8,18,6,16,new Pe(7,new Me(1,5))),new be(26,8,32,6,14,new Pe(11,new Me(1,10))),new be(27,12,26,10,24,new Pe(14,new Me(1,16))),new be(28,12,36,10,16,new Pe(18,new Me(1,22))),new be(29,16,36,14,16,new Pe(24,new Me(1,32))),new be(30,16,48,14,22,new Pe(28,new Me(1,49)))]}}be.VERSIONS=be.buildVersions();class Va{constructor(t){const r=t.getHeight();if(r<8||r>144||r&1)throw new z;this.version=Va.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Ee(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const r=t.getHeight(),i=t.getWidth();return be.getVersionForDimensions(r,i)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let r=0,i=4,o=0;const a=this.mappingBitMatrix.getHeight(),c=this.mappingBitMatrix.getWidth();let f=!1,h=!1,g=!1,m=!1;do if(i===a&&o===0&&!f)t[r++]=this.readCorner1(a,c)&255,i-=2,o+=2,f=!0;else if(i===a-2&&o===0&&c&3&&!h)t[r++]=this.readCorner2(a,c)&255,i-=2,o+=2,h=!0;else if(i===a+4&&o===2&&!(c&7)&&!g)t[r++]=this.readCorner3(a,c)&255,i-=2,o+=2,g=!0;else if(i===a-2&&o===0&&(c&7)===4&&!m)t[r++]=this.readCorner4(a,c)&255,i-=2,o+=2,m=!0;else{do i<a&&o>=0&&!this.readMappingMatrix.get(o,i)&&(t[r++]=this.readUtah(i,o,a,c)&255),i-=2,o+=2;while(i>=0&&o<c);i+=1,o+=3;do i>=0&&o<c&&!this.readMappingMatrix.get(o,i)&&(t[r++]=this.readUtah(i,o,a,c)&255),i+=2,o-=2;while(i<a&&o>=0);i+=3,o+=1}while(i<a||o<c);if(r!==this.version.getTotalCodewords())throw new z;return t}readModule(t,r,i,o){return t<0&&(t+=i,r+=4-(i+4&7)),r<0&&(r+=o,t+=4-(o+4&7)),this.readMappingMatrix.set(r,t),this.mappingBitMatrix.get(r,t)}readUtah(t,r,i,o){let a=0;return this.readModule(t-2,r-2,i,o)&&(a|=1),a<<=1,this.readModule(t-2,r-1,i,o)&&(a|=1),a<<=1,this.readModule(t-1,r-2,i,o)&&(a|=1),a<<=1,this.readModule(t-1,r-1,i,o)&&(a|=1),a<<=1,this.readModule(t-1,r,i,o)&&(a|=1),a<<=1,this.readModule(t,r-2,i,o)&&(a|=1),a<<=1,this.readModule(t,r-1,i,o)&&(a|=1),a<<=1,this.readModule(t,r,i,o)&&(a|=1),a}readCorner1(t,r){let i=0;return this.readModule(t-1,0,t,r)&&(i|=1),i<<=1,this.readModule(t-1,1,t,r)&&(i|=1),i<<=1,this.readModule(t-1,2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-1,t,r)&&(i|=1),i<<=1,this.readModule(1,r-1,t,r)&&(i|=1),i<<=1,this.readModule(2,r-1,t,r)&&(i|=1),i<<=1,this.readModule(3,r-1,t,r)&&(i|=1),i}readCorner2(t,r){let i=0;return this.readModule(t-3,0,t,r)&&(i|=1),i<<=1,this.readModule(t-2,0,t,r)&&(i|=1),i<<=1,this.readModule(t-1,0,t,r)&&(i|=1),i<<=1,this.readModule(0,r-4,t,r)&&(i|=1),i<<=1,this.readModule(0,r-3,t,r)&&(i|=1),i<<=1,this.readModule(0,r-2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-1,t,r)&&(i|=1),i<<=1,this.readModule(1,r-1,t,r)&&(i|=1),i}readCorner3(t,r){let i=0;return this.readModule(t-1,0,t,r)&&(i|=1),i<<=1,this.readModule(t-1,r-1,t,r)&&(i|=1),i<<=1,this.readModule(0,r-3,t,r)&&(i|=1),i<<=1,this.readModule(0,r-2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-1,t,r)&&(i|=1),i<<=1,this.readModule(1,r-3,t,r)&&(i|=1),i<<=1,this.readModule(1,r-2,t,r)&&(i|=1),i<<=1,this.readModule(1,r-1,t,r)&&(i|=1),i}readCorner4(t,r){let i=0;return this.readModule(t-3,0,t,r)&&(i|=1),i<<=1,this.readModule(t-2,0,t,r)&&(i|=1),i<<=1,this.readModule(t-1,0,t,r)&&(i|=1),i<<=1,this.readModule(0,r-2,t,r)&&(i|=1),i<<=1,this.readModule(0,r-1,t,r)&&(i|=1),i<<=1,this.readModule(1,r-1,t,r)&&(i|=1),i<<=1,this.readModule(2,r-1,t,r)&&(i|=1),i<<=1,this.readModule(3,r-1,t,r)&&(i|=1),i}extractDataRegion(t){const r=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(t.getHeight()!==r)throw new S("Dimension of bitMatrix must match the version size");const o=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),c=r/o|0,f=i/a|0,h=c*o,g=f*a,m=new Ee(g,h);for(let v=0;v<c;++v){const A=v*o;for(let _=0;_<f;++_){const k=_*a;for(let D=0;D<o;++D){const V=v*(o+2)+1+D,X=A+D;for(let ne=0;ne<a;++ne){const re=_*(a+2)+1+ne;if(t.get(re,V)){const J=k+ne;m.set(J,X)}}}}}return m}}class Wa{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r){const i=r.getECBlocks();let o=0;const a=i.getECBlocks();for(let D of a)o+=D.getCount();const c=new Array(o);let f=0;for(let D of a)for(let V=0;V<D.getCount();V++){const X=D.getDataCodewords(),ne=i.getECCodewords()+X;c[f++]=new Wa(X,new Uint8Array(ne))}const g=c[0].codewords.length-i.getECCodewords(),m=g-1;let v=0;for(let D=0;D<m;D++)for(let V=0;V<f;V++)c[V].codewords[D]=t[v++];const A=r.getVersionNumber()===24,_=A?8:f;for(let D=0;D<_;D++)c[D].codewords[g-1]=t[v++];const k=c[0].codewords.length;for(let D=g;D<k;D++)for(let V=0;V<f;V++){const X=A?(V+8)%f:V,ne=A&&X>7?D-1:D;c[X].codewords[ne]=t[v++]}if(v!==t.length)throw new S;return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class za{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new S(""+t);let r=0,i=this.bitOffset,o=this.byteOffset;const a=this.bytes;if(i>0){const c=8-i,f=t<c?t:c,h=c-f,g=255>>8-f<<h;r=(a[o]&g)>>h,t-=f,i+=f,i===8&&(i=0,o++)}if(t>0){for(;t>=8;)r=r<<8|a[o]&255,o++,t-=8;if(t>0){const c=8-t,f=255>>c<<c;r=r<<t|(a[o]&f)>>c,i+=t}}return this.bitOffset=i,this.byteOffset=o,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var dt;(function(C){C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE"})(dt||(dt={}));class ir{static decode(t){const r=new za(t),i=new fe,o=new fe,a=new Array;let c=dt.ASCII_ENCODE;do if(c===dt.ASCII_ENCODE)c=this.decodeAsciiSegment(r,i,o);else{switch(c){case dt.C40_ENCODE:this.decodeC40Segment(r,i);break;case dt.TEXT_ENCODE:this.decodeTextSegment(r,i);break;case dt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,i);break;case dt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,i);break;case dt.BASE256_ENCODE:this.decodeBase256Segment(r,i,a);break;default:throw new z}c=dt.ASCII_ENCODE}while(c!==dt.PAD_ENCODE&&r.available()>0);return o.length()>0&&i.append(o.toString()),new Gi(t,i.toString(),a.length===0?null:a,null)}static decodeAsciiSegment(t,r,i){let o=!1;do{let a=t.readBits(8);if(a===0)throw new z;if(a<=128)return o&&(a+=128),r.append(String.fromCharCode(a-1)),dt.ASCII_ENCODE;if(a===129)return dt.PAD_ENCODE;if(a<=229){const c=a-130;c<10&&r.append("0"),r.append(""+c)}else switch(a){case 230:return dt.C40_ENCODE;case 231:return dt.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:o=!0;break;case 236:r.append("[)>05"),i.insert(0,"");break;case 237:r.append("[)>06"),i.insert(0,"");break;case 238:return dt.ANSIX12_ENCODE;case 239:return dt.TEXT_ENCODE;case 240:return dt.EDIFACT_ENCODE;case 241:break;default:if(a!==254||t.available()!==0)throw new z;break}}while(t.available()>0);return dt.ASCII_ENCODE}static decodeC40Segment(t,r){let i=!1;const o=[];let a=0;do{if(t.available()===8)return;const c=t.readBits(8);if(c===254)return;this.parseTwoBytes(c,t.readBits(8),o);for(let f=0;f<3;f++){const h=o[f];switch(a){case 0:if(h<3)a=h+1;else if(h<this.C40_BASIC_SET_CHARS.length){const g=this.C40_BASIC_SET_CHARS[h];i?(r.append(String.fromCharCode(g.charCodeAt(0)+128)),i=!1):r.append(g)}else throw new z;break;case 1:i?(r.append(String.fromCharCode(h+128)),i=!1):r.append(String.fromCharCode(h)),a=0;break;case 2:if(h<this.C40_SHIFT2_SET_CHARS.length){const g=this.C40_SHIFT2_SET_CHARS[h];i?(r.append(String.fromCharCode(g.charCodeAt(0)+128)),i=!1):r.append(g)}else switch(h){case 27:r.append("");break;case 30:i=!0;break;default:throw new z}a=0;break;case 3:i?(r.append(String.fromCharCode(h+224)),i=!1):r.append(String.fromCharCode(h+96)),a=0;break;default:throw new z}}}while(t.available()>0)}static decodeTextSegment(t,r){let i=!1,o=[],a=0;do{if(t.available()===8)return;const c=t.readBits(8);if(c===254)return;this.parseTwoBytes(c,t.readBits(8),o);for(let f=0;f<3;f++){const h=o[f];switch(a){case 0:if(h<3)a=h+1;else if(h<this.TEXT_BASIC_SET_CHARS.length){const g=this.TEXT_BASIC_SET_CHARS[h];i?(r.append(String.fromCharCode(g.charCodeAt(0)+128)),i=!1):r.append(g)}else throw new z;break;case 1:i?(r.append(String.fromCharCode(h+128)),i=!1):r.append(String.fromCharCode(h)),a=0;break;case 2:if(h<this.TEXT_SHIFT2_SET_CHARS.length){const g=this.TEXT_SHIFT2_SET_CHARS[h];i?(r.append(String.fromCharCode(g.charCodeAt(0)+128)),i=!1):r.append(g)}else switch(h){case 27:r.append("");break;case 30:i=!0;break;default:throw new z}a=0;break;case 3:if(h<this.TEXT_SHIFT3_SET_CHARS.length){const g=this.TEXT_SHIFT3_SET_CHARS[h];i?(r.append(String.fromCharCode(g.charCodeAt(0)+128)),i=!1):r.append(g),a=0}else throw new z;break;default:throw new z}}}while(t.available()>0)}static decodeAnsiX12Segment(t,r){const i=[];do{if(t.available()===8)return;const o=t.readBits(8);if(o===254)return;this.parseTwoBytes(o,t.readBits(8),i);for(let a=0;a<3;a++){const c=i[a];switch(c){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(c<14)r.append(String.fromCharCode(c+44));else if(c<40)r.append(String.fromCharCode(c+51));else throw new z;break}}}while(t.available()>0)}static parseTwoBytes(t,r,i){let o=(t<<8)+r-1,a=Math.floor(o/1600);i[0]=a,o-=a*1600,a=Math.floor(o/40),i[1]=a,i[2]=o-a*40}static decodeEdifactSegment(t,r){do{if(t.available()<=16)return;for(let i=0;i<4;i++){let o=t.readBits(6);if(o===31){const a=8-t.getBitOffset();a!==8&&t.readBits(a);return}o&32||(o|=64),r.append(String.fromCharCode(o))}}while(t.available()>0)}static decodeBase256Segment(t,r,i){let o=1+t.getByteOffset();const a=this.unrandomize255State(t.readBits(8),o++);let c;if(a===0?c=t.available()/8|0:a<250?c=a:c=250*(a-249)+this.unrandomize255State(t.readBits(8),o++),c<0)throw new z;const f=new Uint8Array(c);for(let h=0;h<c;h++){if(t.available()<8)throw new z;f[h]=this.unrandomize255State(t.readBits(8),o++)}i.push(f);try{r.append($.decode(f,ee.ISO88591))}catch(h){throw new Tn("Platform does not support required encoding: "+h.message)}}static unrandomize255State(t,r){const i=149*r%255+1,o=t-i;return o>=0?o:o+256}}ir.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ir.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ir.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ir.TEXT_SHIFT2_SET_CHARS=ir.C40_SHIFT2_SET_CHARS,ir.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Eh{constructor(){this.rsDecoder=new Yi(ke.DATA_MATRIX_FIELD_256)}decode(t){const r=new Va(t),i=r.getVersion(),o=r.readCodewords(),a=Wa.getDataBlocks(o,i);let c=0;for(let g of a)c+=g.getNumDataCodewords();const f=new Uint8Array(c),h=a.length;for(let g=0;g<h;g++){const m=a[g],v=m.getCodewords(),A=m.getNumDataCodewords();this.correctErrors(v,A);for(let _=0;_<A;_++)f[_*h+g]=v[_]}return ir.decode(f)}correctErrors(t,r){const i=new Int32Array(t);try{this.rsDecoder.decode(i,t.length-r)}catch{throw new B}for(let o=0;o<r;o++)t[o]=i[o]}}class at{constructor(t){this.image=t,this.rectangleDetector=new Vn(this.image)}detect(){const t=this.rectangleDetector.detect();let r=this.detectSolid1(t);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new H;r=this.shiftToModuleCenter(r);const i=r[0],o=r[1],a=r[2],c=r[3];let f=this.transitionsBetween(i,c)+1,h=this.transitionsBetween(a,c)+1;(f&1)===1&&(f+=1),(h&1)===1&&(h+=1),4*f<7*h&&4*h<7*f&&(f=h=Math.max(f,h));let g=at.sampleGrid(this.image,i,o,a,c,f,h);return new Js(g,[i,o,a,c])}static shiftPoint(t,r,i){let o=(r.getX()-t.getX())/(i+1),a=(r.getY()-t.getY())/(i+1);return new de(t.getX()+o,t.getY()+a)}static moveAway(t,r,i){let o=t.getX(),a=t.getY();return o<r?o-=1:o+=1,a<i?a-=1:a+=1,new de(o,a)}detectSolid1(t){let r=t[0],i=t[1],o=t[3],a=t[2],c=this.transitionsBetween(r,i),f=this.transitionsBetween(i,o),h=this.transitionsBetween(o,a),g=this.transitionsBetween(a,r),m=c,v=[a,r,i,o];return m>f&&(m=f,v[0]=r,v[1]=i,v[2]=o,v[3]=a),m>h&&(m=h,v[0]=i,v[1]=o,v[2]=a,v[3]=r),m>g&&(v[0]=o,v[1]=a,v[2]=r,v[3]=i),v}detectSolid2(t){let r=t[0],i=t[1],o=t[2],a=t[3],c=this.transitionsBetween(r,a),f=at.shiftPoint(i,o,(c+1)*4),h=at.shiftPoint(o,i,(c+1)*4),g=this.transitionsBetween(f,r),m=this.transitionsBetween(h,a);return g<m?(t[0]=r,t[1]=i,t[2]=o,t[3]=a):(t[0]=i,t[1]=o,t[2]=a,t[3]=r),t}correctTopRight(t){let r=t[0],i=t[1],o=t[2],a=t[3],c=this.transitionsBetween(r,a),f=this.transitionsBetween(i,a),h=at.shiftPoint(r,i,(f+1)*4),g=at.shiftPoint(o,i,(c+1)*4);c=this.transitionsBetween(h,a),f=this.transitionsBetween(g,a);let m=new de(a.getX()+(o.getX()-i.getX())/(c+1),a.getY()+(o.getY()-i.getY())/(c+1)),v=new de(a.getX()+(r.getX()-i.getX())/(f+1),a.getY()+(r.getY()-i.getY())/(f+1));if(!this.isValid(m))return this.isValid(v)?v:null;if(!this.isValid(v))return m;let A=this.transitionsBetween(h,m)+this.transitionsBetween(g,m),_=this.transitionsBetween(h,v)+this.transitionsBetween(g,v);return A>_?m:v}shiftToModuleCenter(t){let r=t[0],i=t[1],o=t[2],a=t[3],c=this.transitionsBetween(r,a)+1,f=this.transitionsBetween(o,a)+1,h=at.shiftPoint(r,i,f*4),g=at.shiftPoint(o,i,c*4);c=this.transitionsBetween(h,a)+1,f=this.transitionsBetween(g,a)+1,(c&1)===1&&(c+=1),(f&1)===1&&(f+=1);let m=(r.getX()+i.getX()+o.getX()+a.getX())/4,v=(r.getY()+i.getY()+o.getY()+a.getY())/4;r=at.moveAway(r,m,v),i=at.moveAway(i,m,v),o=at.moveAway(o,m,v),a=at.moveAway(a,m,v);let A,_;return h=at.shiftPoint(r,i,f*4),h=at.shiftPoint(h,a,c*4),A=at.shiftPoint(i,r,f*4),A=at.shiftPoint(A,o,c*4),g=at.shiftPoint(o,a,f*4),g=at.shiftPoint(g,i,c*4),_=at.shiftPoint(a,o,f*4),_=at.shiftPoint(_,r,c*4),[h,A,g,_]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,r,i,o,a,c,f){return nr.getInstance().sampleGrid(t,c,f,.5,.5,c-.5,.5,c-.5,f-.5,.5,f-.5,r.getX(),r.getY(),a.getX(),a.getY(),o.getX(),o.getY(),i.getX(),i.getY())}transitionsBetween(t,r){let i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),a=Math.trunc(r.getX()),c=Math.trunc(r.getY()),f=Math.abs(c-o)>Math.abs(a-i);if(f){let D=i;i=o,o=D,D=a,a=c,c=D}let h=Math.abs(a-i),g=Math.abs(c-o),m=-h/2,v=o<c?1:-1,A=i<a?1:-1,_=0,k=this.image.get(f?o:i,f?i:o);for(let D=i,V=o;D!==a;D+=A){let X=this.image.get(f?V:D,f?D:V);if(X!==k&&(_++,k=X),m+=g,m>0){if(V===c)break;V+=v,m-=h}}return _}}class sr{constructor(){this.decoder=new Eh}decode(t,r=null){let i,o;if(r!=null&&r.has(K.PURE_BARCODE)){const g=sr.extractPureBits(t.getBlackMatrix());i=this.decoder.decode(g),o=sr.NO_POINTS}else{const g=new at(t.getBlackMatrix()).detect();i=this.decoder.decode(g.getBits()),o=g.getPoints()}const a=i.getRawBytes(),c=new Qe(i.getText(),a,8*a.length,o,he.DATA_MATRIX,j.currentTimeMillis()),f=i.getByteSegments();f!=null&&c.putMetadata(pt.BYTE_SEGMENTS,f);const h=i.getECLevel();return h!=null&&c.putMetadata(pt.ERROR_CORRECTION_LEVEL,h),c}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),i=t.getBottomRightOnBit();if(r==null||i==null)throw new H;const o=this.moduleSize(r,t);let a=r[1];const c=i[1];let f=r[0];const g=(i[0]-f+1)/o,m=(c-a+1)/o;if(g<=0||m<=0)throw new H;const v=o/2;a+=v,f+=v;const A=new Ee(g,m);for(let _=0;_<m;_++){const k=a+_*o;for(let D=0;D<g;D++)t.get(f+D*o,k)&&A.set(D,_)}return A}static moduleSize(t,r){const i=r.getWidth();let o=t[0];const a=t[1];for(;o<i&&r.get(o,a);)o++;if(o===i)throw new H;const c=o-t[0];if(c===0)throw new H;return c}}sr.NO_POINTS=[];class Ch extends ln{constructor(t=500){super(new sr,t)}}var ai;(function(C){C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H"})(ai||(ai={}));class We{constructor(t,r,i){this.value=t,this.stringValue=r,this.bits=i,We.FOR_BITS.set(i,this),We.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return We.L;case"M":return We.M;case"Q":return We.Q;case"H":return We.H;default:throw new N(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof We))return!1;const r=t;return this.value===r.value}static forBits(t){if(t<0||t>=We.FOR_BITS.size)throw new S;return We.FOR_BITS.get(t)}}We.FOR_BITS=new Map,We.FOR_VALUE=new Map,We.L=new We(ai.L,"L",1),We.M=new We(ai.M,"M",0),We.Q=new We(ai.Q,"Q",3),We.H=new We(ai.H,"H",2);class Tt{constructor(t){this.errorCorrectionLevel=We.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,r){return T.bitCount(t^r)}static decodeFormatInformation(t,r){const i=Tt.doDecodeFormatInformation(t,r);return i!==null?i:Tt.doDecodeFormatInformation(t^Tt.FORMAT_INFO_MASK_QR,r^Tt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,r){let i=Number.MAX_SAFE_INTEGER,o=0;for(const a of Tt.FORMAT_INFO_DECODE_LOOKUP){const c=a[0];if(c===t||c===r)return new Tt(a[1]);let f=Tt.numBitsDiffering(t,c);f<i&&(o=a[1],i=f),t!==r&&(f=Tt.numBitsDiffering(r,c),f<i&&(o=a[1],i=f))}return i<=3?new Tt(o):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof Tt))return!1;const r=t;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}Tt.FORMAT_INFO_MASK_QR=21522,Tt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class W{constructor(t,...r){this.ecCodewordsPerBlock=t,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const r=this.ecBlocks;for(const i of r)t+=i.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class I{constructor(t,r){this.count=t,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class xe{constructor(t,r,...i){this.versionNumber=t,this.alignmentPatternCenters=r,this.ecBlocks=i;let o=0;const a=i[0].getECCodewordsPerBlock(),c=i[0].getECBlocks();for(const f of c)o+=f.getCount()*(f.getDataCodewords()+a);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new z;try{return this.getVersionForNumber((t-17)/4)}catch{throw new z}}static getVersionForNumber(t){if(t<1||t>40)throw new S;return xe.VERSIONS[t-1]}static decodeVersionInformation(t){let r=Number.MAX_SAFE_INTEGER,i=0;for(let o=0;o<xe.VERSION_DECODE_INFO.length;o++){const a=xe.VERSION_DECODE_INFO[o];if(a===t)return xe.getVersionForNumber(o+7);const c=Tt.numBitsDiffering(t,a);c<r&&(i=o+7,r=c)}return r<=3?xe.getVersionForNumber(i):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),r=new Ee(t);r.setRegion(0,0,9,9),r.setRegion(t-8,0,8,9),r.setRegion(0,t-8,9,8);const i=this.alignmentPatternCenters.length;for(let o=0;o<i;o++){const a=this.alignmentPatternCenters[o]-2;for(let c=0;c<i;c++)o===0&&(c===0||c===i-1)||o===i-1&&c===0||r.setRegion(this.alignmentPatternCenters[c]-2,a,5,5)}return r.setRegion(6,9,1,t-17),r.setRegion(9,6,t-17,1),this.versionNumber>6&&(r.setRegion(t-11,0,3,6),r.setRegion(0,t-11,6,3)),r}toString(){return""+this.versionNumber}}xe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),xe.VERSIONS=[new xe(1,new Int32Array(0),new W(7,new I(1,19)),new W(10,new I(1,16)),new W(13,new I(1,13)),new W(17,new I(1,9))),new xe(2,Int32Array.from([6,18]),new W(10,new I(1,34)),new W(16,new I(1,28)),new W(22,new I(1,22)),new W(28,new I(1,16))),new xe(3,Int32Array.from([6,22]),new W(15,new I(1,55)),new W(26,new I(1,44)),new W(18,new I(2,17)),new W(22,new I(2,13))),new xe(4,Int32Array.from([6,26]),new W(20,new I(1,80)),new W(18,new I(2,32)),new W(26,new I(2,24)),new W(16,new I(4,9))),new xe(5,Int32Array.from([6,30]),new W(26,new I(1,108)),new W(24,new I(2,43)),new W(18,new I(2,15),new I(2,16)),new W(22,new I(2,11),new I(2,12))),new xe(6,Int32Array.from([6,34]),new W(18,new I(2,68)),new W(16,new I(4,27)),new W(24,new I(4,19)),new W(28,new I(4,15))),new xe(7,Int32Array.from([6,22,38]),new W(20,new I(2,78)),new W(18,new I(4,31)),new W(18,new I(2,14),new I(4,15)),new W(26,new I(4,13),new I(1,14))),new xe(8,Int32Array.from([6,24,42]),new W(24,new I(2,97)),new W(22,new I(2,38),new I(2,39)),new W(22,new I(4,18),new I(2,19)),new W(26,new I(4,14),new I(2,15))),new xe(9,Int32Array.from([6,26,46]),new W(30,new I(2,116)),new W(22,new I(3,36),new I(2,37)),new W(20,new I(4,16),new I(4,17)),new W(24,new I(4,12),new I(4,13))),new xe(10,Int32Array.from([6,28,50]),new W(18,new I(2,68),new I(2,69)),new W(26,new I(4,43),new I(1,44)),new W(24,new I(6,19),new I(2,20)),new W(28,new I(6,15),new I(2,16))),new xe(11,Int32Array.from([6,30,54]),new W(20,new I(4,81)),new W(30,new I(1,50),new I(4,51)),new W(28,new I(4,22),new I(4,23)),new W(24,new I(3,12),new I(8,13))),new xe(12,Int32Array.from([6,32,58]),new W(24,new I(2,92),new I(2,93)),new W(22,new I(6,36),new I(2,37)),new W(26,new I(4,20),new I(6,21)),new W(28,new I(7,14),new I(4,15))),new xe(13,Int32Array.from([6,34,62]),new W(26,new I(4,107)),new W(22,new I(8,37),new I(1,38)),new W(24,new I(8,20),new I(4,21)),new W(22,new I(12,11),new I(4,12))),new xe(14,Int32Array.from([6,26,46,66]),new W(30,new I(3,115),new I(1,116)),new W(24,new I(4,40),new I(5,41)),new W(20,new I(11,16),new I(5,17)),new W(24,new I(11,12),new I(5,13))),new xe(15,Int32Array.from([6,26,48,70]),new W(22,new I(5,87),new I(1,88)),new W(24,new I(5,41),new I(5,42)),new W(30,new I(5,24),new I(7,25)),new W(24,new I(11,12),new I(7,13))),new xe(16,Int32Array.from([6,26,50,74]),new W(24,new I(5,98),new I(1,99)),new W(28,new I(7,45),new I(3,46)),new W(24,new I(15,19),new I(2,20)),new W(30,new I(3,15),new I(13,16))),new xe(17,Int32Array.from([6,30,54,78]),new W(28,new I(1,107),new I(5,108)),new W(28,new I(10,46),new I(1,47)),new W(28,new I(1,22),new I(15,23)),new W(28,new I(2,14),new I(17,15))),new xe(18,Int32Array.from([6,30,56,82]),new W(30,new I(5,120),new I(1,121)),new W(26,new I(9,43),new I(4,44)),new W(28,new I(17,22),new I(1,23)),new W(28,new I(2,14),new I(19,15))),new xe(19,Int32Array.from([6,30,58,86]),new W(28,new I(3,113),new I(4,114)),new W(26,new I(3,44),new I(11,45)),new W(26,new I(17,21),new I(4,22)),new W(26,new I(9,13),new I(16,14))),new xe(20,Int32Array.from([6,34,62,90]),new W(28,new I(3,107),new I(5,108)),new W(26,new I(3,41),new I(13,42)),new W(30,new I(15,24),new I(5,25)),new W(28,new I(15,15),new I(10,16))),new xe(21,Int32Array.from([6,28,50,72,94]),new W(28,new I(4,116),new I(4,117)),new W(26,new I(17,42)),new W(28,new I(17,22),new I(6,23)),new W(30,new I(19,16),new I(6,17))),new xe(22,Int32Array.from([6,26,50,74,98]),new W(28,new I(2,111),new I(7,112)),new W(28,new I(17,46)),new W(30,new I(7,24),new I(16,25)),new W(24,new I(34,13))),new xe(23,Int32Array.from([6,30,54,78,102]),new W(30,new I(4,121),new I(5,122)),new W(28,new I(4,47),new I(14,48)),new W(30,new I(11,24),new I(14,25)),new W(30,new I(16,15),new I(14,16))),new xe(24,Int32Array.from([6,28,54,80,106]),new W(30,new I(6,117),new I(4,118)),new W(28,new I(6,45),new I(14,46)),new W(30,new I(11,24),new I(16,25)),new W(30,new I(30,16),new I(2,17))),new xe(25,Int32Array.from([6,32,58,84,110]),new W(26,new I(8,106),new I(4,107)),new W(28,new I(8,47),new I(13,48)),new W(30,new I(7,24),new I(22,25)),new W(30,new I(22,15),new I(13,16))),new xe(26,Int32Array.from([6,30,58,86,114]),new W(28,new I(10,114),new I(2,115)),new W(28,new I(19,46),new I(4,47)),new W(28,new I(28,22),new I(6,23)),new W(30,new I(33,16),new I(4,17))),new xe(27,Int32Array.from([6,34,62,90,118]),new W(30,new I(8,122),new I(4,123)),new W(28,new I(22,45),new I(3,46)),new W(30,new I(8,23),new I(26,24)),new W(30,new I(12,15),new I(28,16))),new xe(28,Int32Array.from([6,26,50,74,98,122]),new W(30,new I(3,117),new I(10,118)),new W(28,new I(3,45),new I(23,46)),new W(30,new I(4,24),new I(31,25)),new W(30,new I(11,15),new I(31,16))),new xe(29,Int32Array.from([6,30,54,78,102,126]),new W(30,new I(7,116),new I(7,117)),new W(28,new I(21,45),new I(7,46)),new W(30,new I(1,23),new I(37,24)),new W(30,new I(19,15),new I(26,16))),new xe(30,Int32Array.from([6,26,52,78,104,130]),new W(30,new I(5,115),new I(10,116)),new W(28,new I(19,47),new I(10,48)),new W(30,new I(15,24),new I(25,25)),new W(30,new I(23,15),new I(25,16))),new xe(31,Int32Array.from([6,30,56,82,108,134]),new W(30,new I(13,115),new I(3,116)),new W(28,new I(2,46),new I(29,47)),new W(30,new I(42,24),new I(1,25)),new W(30,new I(23,15),new I(28,16))),new xe(32,Int32Array.from([6,34,60,86,112,138]),new W(30,new I(17,115)),new W(28,new I(10,46),new I(23,47)),new W(30,new I(10,24),new I(35,25)),new W(30,new I(19,15),new I(35,16))),new xe(33,Int32Array.from([6,30,58,86,114,142]),new W(30,new I(17,115),new I(1,116)),new W(28,new I(14,46),new I(21,47)),new W(30,new I(29,24),new I(19,25)),new W(30,new I(11,15),new I(46,16))),new xe(34,Int32Array.from([6,34,62,90,118,146]),new W(30,new I(13,115),new I(6,116)),new W(28,new I(14,46),new I(23,47)),new W(30,new I(44,24),new I(7,25)),new W(30,new I(59,16),new I(1,17))),new xe(35,Int32Array.from([6,30,54,78,102,126,150]),new W(30,new I(12,121),new I(7,122)),new W(28,new I(12,47),new I(26,48)),new W(30,new I(39,24),new I(14,25)),new W(30,new I(22,15),new I(41,16))),new xe(36,Int32Array.from([6,24,50,76,102,128,154]),new W(30,new I(6,121),new I(14,122)),new W(28,new I(6,47),new I(34,48)),new W(30,new I(46,24),new I(10,25)),new W(30,new I(2,15),new I(64,16))),new xe(37,Int32Array.from([6,28,54,80,106,132,158]),new W(30,new I(17,122),new I(4,123)),new W(28,new I(29,46),new I(14,47)),new W(30,new I(49,24),new I(10,25)),new W(30,new I(24,15),new I(46,16))),new xe(38,Int32Array.from([6,32,58,84,110,136,162]),new W(30,new I(4,122),new I(18,123)),new W(28,new I(13,46),new I(32,47)),new W(30,new I(48,24),new I(14,25)),new W(30,new I(42,15),new I(32,16))),new xe(39,Int32Array.from([6,26,54,82,110,138,166]),new W(30,new I(20,117),new I(4,118)),new W(28,new I(40,47),new I(7,48)),new W(30,new I(43,24),new I(22,25)),new W(30,new I(10,15),new I(67,16))),new xe(40,Int32Array.from([6,30,58,86,114,142,170]),new W(30,new I(19,118),new I(6,119)),new W(28,new I(18,47),new I(31,48)),new W(30,new I(34,24),new I(34,25)),new W(30,new I(20,15),new I(61,16)))];var mt;(function(C){C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111"})(mt||(mt={}));class un{constructor(t,r){this.value=t,this.isMasked=r}unmaskBitMatrix(t,r){for(let i=0;i<r;i++)for(let o=0;o<r;o++)this.isMasked(i,o)&&t.flip(o,i)}}un.values=new Map([[mt.DATA_MASK_000,new un(mt.DATA_MASK_000,(C,t)=>(C+t&1)===0)],[mt.DATA_MASK_001,new un(mt.DATA_MASK_001,(C,t)=>(C&1)===0)],[mt.DATA_MASK_010,new un(mt.DATA_MASK_010,(C,t)=>t%3===0)],[mt.DATA_MASK_011,new un(mt.DATA_MASK_011,(C,t)=>(C+t)%3===0)],[mt.DATA_MASK_100,new un(mt.DATA_MASK_100,(C,t)=>(Math.floor(C/2)+Math.floor(t/3)&1)===0)],[mt.DATA_MASK_101,new un(mt.DATA_MASK_101,(C,t)=>C*t%6===0)],[mt.DATA_MASK_110,new un(mt.DATA_MASK_110,(C,t)=>C*t%6<3)],[mt.DATA_MASK_111,new un(mt.DATA_MASK_111,(C,t)=>(C+t+C*t%3&1)===0)]]);class vh{constructor(t){const r=t.getHeight();if(r<21||(r&3)!==1)throw new z;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let a=0;a<6;a++)t=this.copyBit(a,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let a=5;a>=0;a--)t=this.copyBit(8,a,t);const r=this.bitMatrix.getHeight();let i=0;const o=r-7;for(let a=r-1;a>=o;a--)i=this.copyBit(8,a,i);for(let a=r-8;a<r;a++)i=this.copyBit(a,8,i);if(this.parsedFormatInfo=Tt.decodeFormatInformation(t,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new z}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),r=Math.floor((t-17)/4);if(r<=6)return xe.getVersionForNumber(r);let i=0;const o=t-11;for(let c=5;c>=0;c--)for(let f=t-9;f>=o;f--)i=this.copyBit(f,c,i);let a=xe.decodeVersionInformation(i);if(a!==null&&a.getDimensionForVersion()===t)return this.parsedVersion=a,a;i=0;for(let c=5;c>=0;c--)for(let f=t-9;f>=o;f--)i=this.copyBit(c,f,i);if(a=xe.decodeVersionInformation(i),a!==null&&a.getDimensionForVersion()===t)return this.parsedVersion=a,a;throw new z}copyBit(t,r,i){return(this.isMirror?this.bitMatrix.get(r,t):this.bitMatrix.get(t,r))?i<<1|1:i<<1}readCodewords(){const t=this.readFormatInformation(),r=this.readVersion(),i=un.values.get(t.getDataMask()),o=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,o);const a=r.buildFunctionPattern();let c=!0;const f=new Uint8Array(r.getTotalCodewords());let h=0,g=0,m=0;for(let v=o-1;v>0;v-=2){v===6&&v--;for(let A=0;A<o;A++){const _=c?o-1-A:A;for(let k=0;k<2;k++)a.get(v-k,_)||(m++,g<<=1,this.bitMatrix.get(v-k,_)&&(g|=1),m===8&&(f[h++]=g,m=0,g=0))}c=!c}if(h!==r.getTotalCodewords())throw new z;return f}remask(){if(this.parsedFormatInfo===null)return;const t=un.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,r)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let r=0,i=t.getWidth();r<i;r++)for(let o=r+1,a=t.getHeight();o<a;o++)t.get(r,o)!==t.get(o,r)&&(t.flip(o,r),t.flip(r,o))}}class Ha{constructor(t,r){this.numDataCodewords=t,this.codewords=r}static getDataBlocks(t,r,i){if(t.length!==r.getTotalCodewords())throw new S;const o=r.getECBlocksForLevel(i);let a=0;const c=o.getECBlocks();for(const k of c)a+=k.getCount();const f=new Array(a);let h=0;for(const k of c)for(let D=0;D<k.getCount();D++){const V=k.getDataCodewords(),X=o.getECCodewordsPerBlock()+V;f[h++]=new Ha(V,new Uint8Array(X))}const g=f[0].codewords.length;let m=f.length-1;for(;m>=0&&f[m].codewords.length!==g;)m--;m++;const v=g-o.getECCodewordsPerBlock();let A=0;for(let k=0;k<v;k++)for(let D=0;D<h;D++)f[D].codewords[k]=t[A++];for(let k=m;k<h;k++)f[k].codewords[v]=t[A++];const _=f[0].codewords.length;for(let k=v;k<_;k++)for(let D=0;D<h;D++){const V=D<m?k:k+1;f[D].codewords[V]=t[A++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var fn;(function(C){C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI"})(fn||(fn={}));class me{constructor(t,r,i,o){this.value=t,this.stringValue=r,this.characterCountBitsForVersions=i,this.bits=o,me.FOR_BITS.set(o,this),me.FOR_VALUE.set(t,this)}static forBits(t){const r=me.FOR_BITS.get(t);if(r===void 0)throw new S;return r}getCharacterCountBits(t){const r=t.getVersionNumber();let i;return r<=9?i=0:r<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof me))return!1;const r=t;return this.value===r.value}toString(){return this.stringValue}}me.FOR_BITS=new Map,me.FOR_VALUE=new Map,me.TERMINATOR=new me(fn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),me.NUMERIC=new me(fn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),me.ALPHANUMERIC=new me(fn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),me.STRUCTURED_APPEND=new me(fn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),me.BYTE=new me(fn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),me.ECI=new me(fn.ECI,"ECI",Int32Array.from([0,0,0]),7),me.KANJI=new me(fn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),me.FNC1_FIRST_POSITION=new me(fn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),me.FNC1_SECOND_POSITION=new me(fn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),me.HANZI=new me(fn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class qe{static decode(t,r,i,o){const a=new za(t);let c=new fe;const f=new Array;let h=-1,g=-1;try{let m=null,v=!1,A;do{if(a.available()<4)A=me.TERMINATOR;else{const _=a.readBits(4);A=me.forBits(_)}switch(A){case me.TERMINATOR:break;case me.FNC1_FIRST_POSITION:case me.FNC1_SECOND_POSITION:v=!0;break;case me.STRUCTURED_APPEND:if(a.available()<16)throw new z;h=a.readBits(8),g=a.readBits(8);break;case me.ECI:const _=qe.parseECIValue(a);if(m=U.getCharacterSetECIByValue(_),m===null)throw new z;break;case me.HANZI:const k=a.readBits(4),D=a.readBits(A.getCharacterCountBits(r));k===qe.GB2312_SUBSET&&qe.decodeHanziSegment(a,c,D);break;default:const V=a.readBits(A.getCharacterCountBits(r));switch(A){case me.NUMERIC:qe.decodeNumericSegment(a,c,V);break;case me.ALPHANUMERIC:qe.decodeAlphanumericSegment(a,c,V,v);break;case me.BYTE:qe.decodeByteSegment(a,c,V,m,f,o);break;case me.KANJI:qe.decodeKanjiSegment(a,c,V);break;default:throw new z}break}}while(A!==me.TERMINATOR)}catch{throw new z}return new Gi(t,c.toString(),f.length===0?null:f,i===null?null:i.toString(),h,g)}static decodeHanziSegment(t,r,i){if(i*13>t.available())throw new z;const o=new Uint8Array(2*i);let a=0;for(;i>0;){const c=t.readBits(13);let f=c/96<<8&4294967295|c%96;f<959?f+=41377:f+=42657,o[a]=f>>8&255,o[a+1]=f&255,a+=2,i--}try{r.append($.decode(o,ee.GB2312))}catch(c){throw new z(c)}}static decodeKanjiSegment(t,r,i){if(i*13>t.available())throw new z;const o=new Uint8Array(2*i);let a=0;for(;i>0;){const c=t.readBits(13);let f=c/192<<8&4294967295|c%192;f<7936?f+=33088:f+=49472,o[a]=f>>8,o[a+1]=f,a+=2,i--}try{r.append($.decode(o,ee.SHIFT_JIS))}catch(c){throw new z(c)}}static decodeByteSegment(t,r,i,o,a,c){if(8*i>t.available())throw new z;const f=new Uint8Array(i);for(let g=0;g<i;g++)f[g]=t.readBits(8);let h;o===null?h=ee.guessEncoding(f,c):h=o.getName();try{r.append($.decode(f,h))}catch(g){throw new z(g)}a.push(f)}static toAlphaNumericChar(t){if(t>=qe.ALPHANUMERIC_CHARS.length)throw new z;return qe.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,r,i,o){const a=r.length();for(;i>1;){if(t.available()<11)throw new z;const c=t.readBits(11);r.append(qe.toAlphaNumericChar(Math.floor(c/45))),r.append(qe.toAlphaNumericChar(c%45)),i-=2}if(i===1){if(t.available()<6)throw new z;r.append(qe.toAlphaNumericChar(t.readBits(6)))}if(o)for(let c=a;c<r.length();c++)r.charAt(c)==="%"&&(c<r.length()-1&&r.charAt(c+1)==="%"?r.deleteCharAt(c+1):r.setCharAt(c,""))}static decodeNumericSegment(t,r,i){for(;i>=3;){if(t.available()<10)throw new z;const o=t.readBits(10);if(o>=1e3)throw new z;r.append(qe.toAlphaNumericChar(Math.floor(o/100))),r.append(qe.toAlphaNumericChar(Math.floor(o/10)%10)),r.append(qe.toAlphaNumericChar(o%10)),i-=3}if(i===2){if(t.available()<7)throw new z;const o=t.readBits(7);if(o>=100)throw new z;r.append(qe.toAlphaNumericChar(Math.floor(o/10))),r.append(qe.toAlphaNumericChar(o%10))}else if(i===1){if(t.available()<4)throw new z;const o=t.readBits(4);if(o>=10)throw new z;r.append(qe.toAlphaNumericChar(o))}}static parseECIValue(t){const r=t.readBits(8);if(!(r&128))return r&127;if((r&192)===128){const i=t.readBits(8);return(r&63)<<8&4294967295|i}if((r&224)===192){const i=t.readBits(16);return(r&31)<<16&4294967295|i}throw new z}}qe.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",qe.GB2312_SUBSET=1;class ku{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const r=t[0];t[0]=t[2],t[2]=r}}class Ah{constructor(){this.rsDecoder=new Yi(ke.QR_CODE_FIELD_256)}decodeBooleanArray(t,r){return this.decodeBitMatrix(Ee.parseFromBooleanArray(t),r)}decodeBitMatrix(t,r){const i=new vh(t);let o=null;try{return this.decodeBitMatrixParser(i,r)}catch(a){o=a}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const a=this.decodeBitMatrixParser(i,r);return a.setOther(new ku(!0)),a}catch(a){throw o!==null?o:a}}decodeBitMatrixParser(t,r){const i=t.readVersion(),o=t.readFormatInformation().getErrorCorrectionLevel(),a=t.readCodewords(),c=Ha.getDataBlocks(a,i,o);let f=0;for(const m of c)f+=m.getNumDataCodewords();const h=new Uint8Array(f);let g=0;for(const m of c){const v=m.getCodewords(),A=m.getNumDataCodewords();this.correctErrors(v,A);for(let _=0;_<A;_++)h[g++]=v[_]}return qe.decode(h,i,o,r)}correctErrors(t,r){const i=new Int32Array(t);try{this.rsDecoder.decode(i,t.length-r)}catch{throw new B}for(let o=0;o<r;o++)t[o]=i[o]}}class Ga extends de{constructor(t,r,i){super(t,r),this.estimatedModuleSize=i}aboutEquals(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){const o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(t,r,i){const o=(this.getX()+r)/2,a=(this.getY()+t)/2,c=(this.estimatedModuleSize+i)/2;return new Ga(o,a,c)}}class io{constructor(t,r,i,o,a,c,f){this.image=t,this.startX=r,this.startY=i,this.width=o,this.height=a,this.moduleSize=c,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,r=this.height,i=this.width,o=t+i,a=this.startY+r/2,c=new Int32Array(3),f=this.image;for(let h=0;h<r;h++){const g=a+(h&1?-Math.floor((h+1)/2):Math.floor((h+1)/2));c[0]=0,c[1]=0,c[2]=0;let m=t;for(;m<o&&!f.get(m,g);)m++;let v=0;for(;m<o;){if(f.get(m,g))if(v===1)c[1]++;else if(v===2){if(this.foundPatternCross(c)){const A=this.handlePossibleCenter(c,g,m);if(A!==null)return A}c[0]=c[2],c[1]=1,c[2]=0,v=1}else c[++v]++;else v===1&&v++,c[v]++;m++}if(this.foundPatternCross(c)){const A=this.handlePossibleCenter(c,g,o);if(A!==null)return A}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new H}static centerFromEnd(t,r){return r-t[2]-t[1]/2}foundPatternCross(t){const r=this.moduleSize,i=r/2;for(let o=0;o<3;o++)if(Math.abs(r-t[o])>=i)return!1;return!0}crossCheckVertical(t,r,i,o){const a=this.image,c=a.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let h=t;for(;h>=0&&a.get(r,h)&&f[1]<=i;)f[1]++,h--;if(h<0||f[1]>i)return NaN;for(;h>=0&&!a.get(r,h)&&f[0]<=i;)f[0]++,h--;if(f[0]>i)return NaN;for(h=t+1;h<c&&a.get(r,h)&&f[1]<=i;)f[1]++,h++;if(h===c||f[1]>i)return NaN;for(;h<c&&!a.get(r,h)&&f[2]<=i;)f[2]++,h++;if(f[2]>i)return NaN;const g=f[0]+f[1]+f[2];return 5*Math.abs(g-o)>=2*o?NaN:this.foundPatternCross(f)?io.centerFromEnd(f,h):NaN}handlePossibleCenter(t,r,i){const o=t[0]+t[1]+t[2],a=io.centerFromEnd(t,i),c=this.crossCheckVertical(r,a,2*t[1],o);if(!isNaN(c)){const f=(t[0]+t[1]+t[2])/3;for(const g of this.possibleCenters)if(g.aboutEquals(f,c,a))return g.combineEstimate(c,a,f);const h=new Ga(a,c,f);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null}}class Xa extends de{constructor(t,r,i,o){super(t,r),this.estimatedModuleSize=i,this.count=o,o===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){const o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(t,r,i){const o=this.count+1,a=(this.count*this.getX()+r)/o,c=(this.count*this.getY()+t)/o,f=(this.count*this.estimatedModuleSize+i)/o;return new Xa(a,c,f,o)}}class Sh{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class wt{constructor(t,r){this.image=t,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const r=t!=null&&t.get(K.TRY_HARDER)!==void 0,i=t!=null&&t.get(K.PURE_BARCODE)!==void 0,o=this.image,a=o.getHeight(),c=o.getWidth();let f=Math.floor(3*a/(4*wt.MAX_MODULES));(f<wt.MIN_SKIP||r)&&(f=wt.MIN_SKIP);let h=!1;const g=new Int32Array(5);for(let v=f-1;v<a&&!h;v+=f){g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0;let A=0;for(let _=0;_<c;_++)if(o.get(_,v))(A&1)===1&&A++,g[A]++;else if(A&1)g[A]++;else if(A===4)if(wt.foundPatternCross(g)){if(this.handlePossibleCenter(g,v,_,i)===!0)if(f=2,this.hasSkipped===!0)h=this.haveMultiplyConfirmedCenters();else{const D=this.findRowSkip();D>g[2]&&(v+=D-g[2]-f,_=c-1)}else{g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,A=3;continue}A=0,g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0}else g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,A=3;else g[++A]++;wt.foundPatternCross(g)&&this.handlePossibleCenter(g,v,c,i)===!0&&(f=g[0],this.hasSkipped&&(h=this.haveMultiplyConfirmedCenters()))}const m=this.selectBestPatterns();return de.orderBestPatterns(m),new Sh(m)}static centerFromEnd(t,r){return r-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let r=0;for(let a=0;a<5;a++){const c=t[a];if(c===0)return!1;r+=c}if(r<7)return!1;const i=r/7,o=i/2;return Math.abs(i-t[0])<o&&Math.abs(i-t[1])<o&&Math.abs(3*i-t[2])<3*o&&Math.abs(i-t[3])<o&&Math.abs(i-t[4])<o}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,r,i,o){const a=this.getCrossCheckStateCount();let c=0;const f=this.image;for(;t>=c&&r>=c&&f.get(r-c,t-c);)a[2]++,c++;if(t<c||r<c)return!1;for(;t>=c&&r>=c&&!f.get(r-c,t-c)&&a[1]<=i;)a[1]++,c++;if(t<c||r<c||a[1]>i)return!1;for(;t>=c&&r>=c&&f.get(r-c,t-c)&&a[0]<=i;)a[0]++,c++;if(a[0]>i)return!1;const h=f.getHeight(),g=f.getWidth();for(c=1;t+c<h&&r+c<g&&f.get(r+c,t+c);)a[2]++,c++;if(t+c>=h||r+c>=g)return!1;for(;t+c<h&&r+c<g&&!f.get(r+c,t+c)&&a[3]<i;)a[3]++,c++;if(t+c>=h||r+c>=g||a[3]>=i)return!1;for(;t+c<h&&r+c<g&&f.get(r+c,t+c)&&a[4]<i;)a[4]++,c++;if(a[4]>=i)return!1;const m=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(m-o)<2*o&&wt.foundPatternCross(a)}crossCheckVertical(t,r,i,o){const a=this.image,c=a.getHeight(),f=this.getCrossCheckStateCount();let h=t;for(;h>=0&&a.get(r,h);)f[2]++,h--;if(h<0)return NaN;for(;h>=0&&!a.get(r,h)&&f[1]<=i;)f[1]++,h--;if(h<0||f[1]>i)return NaN;for(;h>=0&&a.get(r,h)&&f[0]<=i;)f[0]++,h--;if(f[0]>i)return NaN;for(h=t+1;h<c&&a.get(r,h);)f[2]++,h++;if(h===c)return NaN;for(;h<c&&!a.get(r,h)&&f[3]<i;)f[3]++,h++;if(h===c||f[3]>=i)return NaN;for(;h<c&&a.get(r,h)&&f[4]<i;)f[4]++,h++;if(f[4]>=i)return NaN;const g=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(g-o)>=2*o?NaN:wt.foundPatternCross(f)?wt.centerFromEnd(f,h):NaN}crossCheckHorizontal(t,r,i,o){const a=this.image,c=a.getWidth(),f=this.getCrossCheckStateCount();let h=t;for(;h>=0&&a.get(h,r);)f[2]++,h--;if(h<0)return NaN;for(;h>=0&&!a.get(h,r)&&f[1]<=i;)f[1]++,h--;if(h<0||f[1]>i)return NaN;for(;h>=0&&a.get(h,r)&&f[0]<=i;)f[0]++,h--;if(f[0]>i)return NaN;for(h=t+1;h<c&&a.get(h,r);)f[2]++,h++;if(h===c)return NaN;for(;h<c&&!a.get(h,r)&&f[3]<i;)f[3]++,h++;if(h===c||f[3]>=i)return NaN;for(;h<c&&a.get(h,r)&&f[4]<i;)f[4]++,h++;if(f[4]>=i)return NaN;const g=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(g-o)>=o?NaN:wt.foundPatternCross(f)?wt.centerFromEnd(f,h):NaN}handlePossibleCenter(t,r,i,o){const a=t[0]+t[1]+t[2]+t[3]+t[4];let c=wt.centerFromEnd(t,i),f=this.crossCheckVertical(r,Math.floor(c),t[2],a);if(!isNaN(f)&&(c=this.crossCheckHorizontal(Math.floor(c),Math.floor(f),t[2],a),!isNaN(c)&&(!o||this.crossCheckDiagonal(Math.floor(f),Math.floor(c),t[2],a)))){const h=a/7;let g=!1;const m=this.possibleCenters;for(let v=0,A=m.length;v<A;v++){const _=m[v];if(_.aboutEquals(h,f,c)){m[v]=_.combineEstimate(f,c,h),g=!0;break}}if(!g){const v=new Xa(c,f,h);m.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const i of this.possibleCenters)if(i.getCount()>=wt.CENTER_QUORUM)if(r==null)r=i;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-i.getX())-Math.abs(r.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,r=0;const i=this.possibleCenters.length;for(const c of this.possibleCenters)c.getCount()>=wt.CENTER_QUORUM&&(t++,r+=c.getEstimatedModuleSize());if(t<3)return!1;const o=r/i;let a=0;for(const c of this.possibleCenters)a+=Math.abs(c.getEstimatedModuleSize()-o);return a<=.05*r}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new H;const r=this.possibleCenters;let i;if(t>3){let o=0,a=0;for(const h of this.possibleCenters){const g=h.getEstimatedModuleSize();o+=g,a+=g*g}i=o/t;let c=Math.sqrt(a/t-i*i);r.sort((h,g)=>{const m=Math.abs(g.getEstimatedModuleSize()-i),v=Math.abs(h.getEstimatedModuleSize()-i);return m<v?-1:m>v?1:0});const f=Math.max(.2*i,c);for(let h=0;h<r.length&&r.length>3;h++){const g=r[h];Math.abs(g.getEstimatedModuleSize()-i)>f&&(r.splice(h,1),h--)}}if(r.length>3){let o=0;for(const a of r)o+=a.getEstimatedModuleSize();i=o/r.length,r.sort((a,c)=>{if(c.getCount()===a.getCount()){const f=Math.abs(c.getEstimatedModuleSize()-i),h=Math.abs(a.getEstimatedModuleSize()-i);return f<h?1:f>h?-1:0}else return c.getCount()-a.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}wt.CENTER_QUORUM=2,wt.MIN_SKIP=3,wt.MAX_MODULES=57;class Ki{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(K.NEED_RESULT_POINT_CALLBACK);const i=new wt(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(i)}processFinderPatternInfo(t){const r=t.getTopLeft(),i=t.getTopRight(),o=t.getBottomLeft(),a=this.calculateModuleSize(r,i,o);if(a<1)throw new H("No pattern found in proccess finder.");const c=Ki.computeDimension(r,i,o,a),f=xe.getProvisionalVersionForDimension(c),h=f.getDimensionForVersion()-7;let g=null;if(f.getAlignmentPatternCenters().length>0){const _=i.getX()-r.getX()+o.getX(),k=i.getY()-r.getY()+o.getY(),D=1-3/h,V=Math.floor(r.getX()+D*(_-r.getX())),X=Math.floor(r.getY()+D*(k-r.getY()));for(let ne=4;ne<=16;ne<<=1)try{g=this.findAlignmentInRegion(a,V,X,ne);break}catch(re){if(!(re instanceof H))throw re}}const m=Ki.createTransform(r,i,o,g,c),v=Ki.sampleGrid(this.image,m,c);let A;return g===null?A=[o,r,i]:A=[o,r,i,g],new Js(v,A)}static createTransform(t,r,i,o,a){const c=a-3.5;let f,h,g,m;return o!==null?(f=o.getX(),h=o.getY(),g=c-3,m=g):(f=r.getX()-t.getX()+i.getX(),h=r.getY()-t.getY()+i.getY(),g=c,m=c),yn.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,g,m,3.5,c,t.getX(),t.getY(),r.getX(),r.getY(),f,h,i.getX(),i.getY())}static sampleGrid(t,r,i){return nr.getInstance().sampleGridWithTransform(t,i,i,r)}static computeDimension(t,r,i,o){const a=_e.round(de.distance(t,r)/o),c=_e.round(de.distance(t,i)/o);let f=Math.floor((a+c)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new H("Dimensions could be not found.")}return f}calculateModuleSize(t,r,i){return(this.calculateModuleSizeOneWay(t,r)+this.calculateModuleSizeOneWay(t,i))/2}calculateModuleSizeOneWay(t,r){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(r.getX()),Math.floor(r.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(i)?o/7:isNaN(o)?i/7:(i+o)/14}sizeOfBlackWhiteBlackRunBothWays(t,r,i,o){let a=this.sizeOfBlackWhiteBlackRun(t,r,i,o),c=1,f=t-(i-t);f<0?(c=t/(t-f),f=0):f>=this.image.getWidth()&&(c=(this.image.getWidth()-1-t)/(f-t),f=this.image.getWidth()-1);let h=Math.floor(r-(o-r)*c);return c=1,h<0?(c=r/(r-h),h=0):h>=this.image.getHeight()&&(c=(this.image.getHeight()-1-r)/(h-r),h=this.image.getHeight()-1),f=Math.floor(t+(f-t)*c),a+=this.sizeOfBlackWhiteBlackRun(t,r,f,h),a-1}sizeOfBlackWhiteBlackRun(t,r,i,o){const a=Math.abs(o-r)>Math.abs(i-t);if(a){let _=t;t=r,r=_,_=i,i=o,o=_}const c=Math.abs(i-t),f=Math.abs(o-r);let h=-c/2;const g=t<i?1:-1,m=r<o?1:-1;let v=0;const A=i+g;for(let _=t,k=r;_!==A;_+=g){const D=a?k:_,V=a?_:k;if(v===1===this.image.get(D,V)){if(v===2)return _e.distance(_,k,t,r);v++}if(h+=f,h>0){if(k===o)break;k+=m,h-=c}}return v===2?_e.distance(i+g,o,t,r):NaN}findAlignmentInRegion(t,r,i,o){const a=Math.floor(o*t),c=Math.max(0,r-a),f=Math.min(this.image.getWidth()-1,r+a);if(f-c<t*3)throw new H("Alignment top exceeds estimated module size.");const h=Math.max(0,i-a),g=Math.min(this.image.getHeight()-1,i+a);if(g-h<t*3)throw new H("Alignment bottom exceeds estimated module size.");return new io(this.image,c,h,f-c,g-h,t,this.resultPointCallback).find()}}class or{constructor(){this.decoder=new Ah}getDecoder(){return this.decoder}decode(t,r){let i,o;if(r!=null&&r.get(K.PURE_BARCODE)!==void 0){const h=or.extractPureBits(t.getBlackMatrix());i=this.decoder.decodeBitMatrix(h,r),o=or.NO_POINTS}else{const h=new Ki(t.getBlackMatrix()).detect(r);i=this.decoder.decodeBitMatrix(h.getBits(),r),o=h.getPoints()}i.getOther()instanceof ku&&i.getOther().applyMirroredCorrection(o);const a=new Qe(i.getText(),i.getRawBytes(),void 0,o,he.QR_CODE,void 0),c=i.getByteSegments();c!==null&&a.putMetadata(pt.BYTE_SEGMENTS,c);const f=i.getECLevel();return f!==null&&a.putMetadata(pt.ERROR_CORRECTION_LEVEL,f),i.hasStructuredAppend()&&(a.putMetadata(pt.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),a.putMetadata(pt.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),a}reset(){}static extractPureBits(t){const r=t.getTopLeftOnBit(),i=t.getBottomRightOnBit();if(r===null||i===null)throw new H;const o=this.moduleSize(r,t);let a=r[1],c=i[1],f=r[0],h=i[0];if(f>=h||a>=c)throw new H;if(c-a!==h-f&&(h=f+(c-a),h>=t.getWidth()))throw new H;const g=Math.round((h-f+1)/o),m=Math.round((c-a+1)/o);if(g<=0||m<=0)throw new H;if(m!==g)throw new H;const v=Math.floor(o/2);a+=v,f+=v;const A=f+Math.floor((g-1)*o)-h;if(A>0){if(A>v)throw new H;f-=A}const _=a+Math.floor((m-1)*o)-c;if(_>0){if(_>v)throw new H;a-=_}const k=new Ee(g,m);for(let D=0;D<m;D++){const V=a+Math.floor(D*o);for(let X=0;X<g;X++)t.get(f+Math.floor(X*o),V)&&k.set(X,D)}return k}static moduleSize(t,r){const i=r.getHeight(),o=r.getWidth();let a=t[0],c=t[1],f=!0,h=0;for(;a<o&&c<i;){if(f!==r.get(a,c)){if(++h===5)break;f=!f}a++,c++}if(a===o||c===i)throw new H;return(a-t[0])/7}}or.NO_POINTS=new Array;class ye{PDF417Common(){}static getBitCountSum(t){return _e.sum(t)}static toIntArray(t){if(t==null||!t.length)return ye.EMPTY_INT_ARRAY;const r=new Int32Array(t.length);let i=0;for(const o of t)r[i++]=o;return r}static getCodeword(t){const r=b.binarySearch(ye.SYMBOL_TABLE,t&262143);return r<0?-1:(ye.CODEWORD_TABLE[r]-1)%ye.NUMBER_OF_CODEWORDS}}ye.NUMBER_OF_CODEWORDS=929,ye.MAX_CODEWORDS_IN_BARCODE=ye.NUMBER_OF_CODEWORDS-1,ye.MIN_ROWS_IN_BARCODE=3,ye.MAX_ROWS_IN_BARCODE=90,ye.MODULES_IN_CODEWORD=17,ye.MODULES_IN_STOP_PATTERN=18,ye.BARS_IN_MODULE=8,ye.EMPTY_INT_ARRAY=new Int32Array([]),ye.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ye.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ih{constructor(t,r){this.bits=t,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class ve{static detectMultiple(t,r,i){let o=t.getBlackMatrix(),a=ve.detect(i,o);return a.length||(o=o.clone(),o.rotate180(),a=ve.detect(i,o)),new Ih(o,a)}static detect(t,r){const i=new Array;let o=0,a=0,c=!1;for(;o<r.getHeight();){const f=ve.findVertices(r,o,a);if(f[0]==null&&f[3]==null){if(!c)break;c=!1,a=0;for(const h of i)h[1]!=null&&(o=Math.trunc(Math.max(o,h[1].getY()))),h[3]!=null&&(o=Math.max(o,Math.trunc(h[3].getY())));o+=ve.ROW_STEP;continue}if(c=!0,i.push(f),!t)break;f[2]!=null?(a=Math.trunc(f[2].getX()),o=Math.trunc(f[2].getY())):(a=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY()))}return i}static findVertices(t,r,i){const o=t.getHeight(),a=t.getWidth(),c=new Array(8);return ve.copyToResult(c,ve.findRowsWithPattern(t,o,a,r,i,ve.START_PATTERN),ve.INDEXES_START_PATTERN),c[4]!=null&&(i=Math.trunc(c[4].getX()),r=Math.trunc(c[4].getY())),ve.copyToResult(c,ve.findRowsWithPattern(t,o,a,r,i,ve.STOP_PATTERN),ve.INDEXES_STOP_PATTERN),c}static copyToResult(t,r,i){for(let o=0;o<i.length;o++)t[i[o]]=r[o]}static findRowsWithPattern(t,r,i,o,a,c){const f=new Array(4);let h=!1;const g=new Int32Array(c.length);for(;o<r;o+=ve.ROW_STEP){let v=ve.findGuardPattern(t,a,o,i,!1,c,g);if(v!=null){for(;o>0;){const A=ve.findGuardPattern(t,a,--o,i,!1,c,g);if(A!=null)v=A;else{o++;break}}f[0]=new de(v[0],o),f[1]=new de(v[1],o),h=!0;break}}let m=o+1;if(h){let v=0,A=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;m<r;m++){const _=ve.findGuardPattern(t,A[0],m,i,!1,c,g);if(_!=null&&Math.abs(A[0]-_[0])<ve.MAX_PATTERN_DRIFT&&Math.abs(A[1]-_[1])<ve.MAX_PATTERN_DRIFT)A=_,v=0;else{if(v>ve.SKIPPED_ROW_COUNT_MAX)break;v++}}m-=v+1,f[2]=new de(A[0],m),f[3]=new de(A[1],m)}return m-o<ve.BARCODE_MIN_HEIGHT&&b.fill(f,null),f}static findGuardPattern(t,r,i,o,a,c,f){b.fillWithin(f,0,f.length,0);let h=r,g=0;for(;t.get(h,i)&&h>0&&g++<ve.MAX_PIXEL_DRIFT;)h--;let m=h,v=0,A=c.length;for(let _=a;m<o;m++)if(t.get(m,i)!==_)f[v]++;else{if(v===A-1){if(ve.patternMatchVariance(f,c,ve.MAX_INDIVIDUAL_VARIANCE)<ve.MAX_AVG_VARIANCE)return new Int32Array([h,m]);h+=f[0]+f[1],j.arraycopy(f,2,f,0,v-1),f[v-1]=0,f[v]=0,v--}else v++;f[v]=1,_=!_}return v===A-1&&ve.patternMatchVariance(f,c,ve.MAX_INDIVIDUAL_VARIANCE)<ve.MAX_AVG_VARIANCE?new Int32Array([h,m-1]):null}static patternMatchVariance(t,r,i){let o=t.length,a=0,c=0;for(let g=0;g<o;g++)a+=t[g],c+=r[g];if(a<c)return 1/0;let f=a/c;i*=f;let h=0;for(let g=0;g<o;g++){let m=t[g],v=r[g]*f,A=m>v?m-v:v-m;if(A>i)return 1/0;h+=A}return h/a}}ve.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ve.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ve.MAX_AVG_VARIANCE=.42,ve.MAX_INDIVIDUAL_VARIANCE=.8,ve.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ve.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ve.MAX_PIXEL_DRIFT=3,ve.MAX_PATTERN_DRIFT=5,ve.SKIPPED_ROW_COUNT_MAX=25,ve.ROW_STEP=5,ve.BARCODE_MIN_HEIGHT=10;class vt{constructor(t,r){if(r.length===0)throw new S;this.field=t;let i=r.length;if(i>1&&r[0]===0){let o=1;for(;o<i&&r[o]===0;)o++;o===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-o),j.arraycopy(r,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let o=0;for(let a of this.coefficients)o=this.field.add(o,a);return o}let r=this.coefficients[0],i=this.coefficients.length;for(let o=1;o<i;o++)r=this.field.add(this.field.multiply(t,r),this.coefficients[o]);return r}add(t){if(!this.field.equals(t.field))throw new S("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let r=this.coefficients,i=t.coefficients;if(r.length>i.length){let c=r;r=i,i=c}let o=new Int32Array(i.length),a=i.length-r.length;j.arraycopy(i,0,o,0,a);for(let c=a;c<i.length;c++)o[c]=this.field.add(r[c-a],i[c]);return new vt(this.field,o)}subtract(t){if(!this.field.equals(t.field))throw new S("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof vt?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new S("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new vt(this.field,new Int32Array([0]));let r=this.coefficients,i=r.length,o=t.coefficients,a=o.length,c=new Int32Array(i+a-1);for(let f=0;f<i;f++){let h=r[f];for(let g=0;g<a;g++)c[f+g]=this.field.add(c[f+g],this.field.multiply(h,o[g]))}return new vt(this.field,c)}negative(){let t=this.coefficients.length,r=new Int32Array(t);for(let i=0;i<t;i++)r[i]=this.field.subtract(0,this.coefficients[i]);return new vt(this.field,r)}multiplyScalar(t){if(t===0)return new vt(this.field,new Int32Array([0]));if(t===1)return this;let r=this.coefficients.length,i=new Int32Array(r);for(let o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new vt(this.field,i)}multiplyByMonomial(t,r){if(t<0)throw new S;if(r===0)return new vt(this.field,new Int32Array([0]));let i=this.coefficients.length,o=new Int32Array(i+t);for(let a=0;a<i;a++)o[a]=this.field.multiply(this.coefficients[a],r);return new vt(this.field,o)}toString(){let t=new fe;for(let r=this.getDegree();r>=0;r--){let i=this.getCoefficient(r);i!==0&&(i<0?(t.append(" - "),i=-i):t.length()>0&&t.append(" + "),(r===0||i!==1)&&t.append(i),r!==0&&(r===1?t.append("x"):(t.append("x^"),t.append(r))))}return t.toString()}}class Nh{add(t,r){return(t+r)%this.modulus}subtract(t,r){return(this.modulus+t-r)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new S;return this.logTable[t]}inverse(t){if(t===0)throw new qs;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class Ya extends Nh{constructor(t,r){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let i=1;for(let o=0;o<t;o++)this.expTable[o]=i,i=i*r%t;for(let o=0;o<t-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new vt(this,new Int32Array([0])),this.one=new vt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,r){if(t<0)throw new S;if(r===0)return this.zero;let i=new Int32Array(t+1);return i[0]=r,new vt(this,i)}}Ya.PDF417_GF=new Ya(ye.NUMBER_OF_CODEWORDS,3);class Du{constructor(){this.field=Ya.PDF417_GF}decode(t,r,i){let o=new vt(this.field,t),a=new Int32Array(r),c=!1;for(let k=r;k>0;k--){let D=o.evaluateAt(this.field.exp(k));a[r-k]=D,D!==0&&(c=!0)}if(!c)return 0;let f=this.field.getOne();if(i!=null)for(const k of i){let D=this.field.exp(t.length-1-k),V=new vt(this.field,new Int32Array([this.field.subtract(0,D),1]));f=f.multiply(V)}let h=new vt(this.field,a),g=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),h,r),m=g[0],v=g[1],A=this.findErrorLocations(m),_=this.findErrorMagnitudes(v,m,A);for(let k=0;k<A.length;k++){let D=t.length-1-this.field.log(A[k]);if(D<0)throw B.getChecksumInstance();t[D]=this.field.subtract(t[D],_[k])}return A.length}runEuclideanAlgorithm(t,r,i){if(t.getDegree()<r.getDegree()){let A=t;t=r,r=A}let o=t,a=r,c=this.field.getZero(),f=this.field.getOne();for(;a.getDegree()>=Math.round(i/2);){let A=o,_=c;if(o=a,c=f,o.isZero())throw B.getChecksumInstance();a=A;let k=this.field.getZero(),D=o.getCoefficient(o.getDegree()),V=this.field.inverse(D);for(;a.getDegree()>=o.getDegree()&&!a.isZero();){let X=a.getDegree()-o.getDegree(),ne=this.field.multiply(a.getCoefficient(a.getDegree()),V);k=k.add(this.field.buildMonomial(X,ne)),a=a.subtract(o.multiplyByMonomial(X,ne))}f=k.multiply(c).subtract(_).negative()}let h=f.getCoefficient(0);if(h===0)throw B.getChecksumInstance();let g=this.field.inverse(h),m=f.multiply(g),v=a.multiply(g);return[m,v]}findErrorLocations(t){let r=t.getDegree(),i=new Int32Array(r),o=0;for(let a=1;a<this.field.getSize()&&o<r;a++)t.evaluateAt(a)===0&&(i[o]=this.field.inverse(a),o++);if(o!==r)throw B.getChecksumInstance();return i}findErrorMagnitudes(t,r,i){let o=r.getDegree(),a=new Int32Array(o);for(let g=1;g<=o;g++)a[o-g]=this.field.multiply(g,r.getCoefficient(g));let c=new vt(this.field,a),f=i.length,h=new Int32Array(f);for(let g=0;g<f;g++){let m=this.field.inverse(i[g]),v=this.field.subtract(0,t.evaluateAt(m)),A=this.field.inverse(c.evaluateAt(m));h[g]=this.field.multiply(v,A)}return h}}class Fr{constructor(t,r,i,o,a){t instanceof Fr?this.constructor_2(t):this.constructor_1(t,r,i,o,a)}constructor_1(t,r,i,o,a){const c=r==null||i==null,f=o==null||a==null;if(c&&f)throw new H;c?(r=new de(0,o.getY()),i=new de(0,a.getY())):f&&(o=new de(t.getWidth()-1,r.getY()),a=new de(t.getWidth()-1,i.getY())),this.image=t,this.topLeft=r,this.bottomLeft=i,this.topRight=o,this.bottomRight=a,this.minX=Math.trunc(Math.min(r.getX(),i.getX())),this.maxX=Math.trunc(Math.max(o.getX(),a.getX())),this.minY=Math.trunc(Math.min(r.getY(),o.getY())),this.maxY=Math.trunc(Math.max(i.getY(),a.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,r){return t==null?r:r==null?t:new Fr(t.image,t.topLeft,t.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(t,r,i){let o=this.topLeft,a=this.bottomLeft,c=this.topRight,f=this.bottomRight;if(t>0){let h=i?this.topLeft:this.topRight,g=Math.trunc(h.getY()-t);g<0&&(g=0);let m=new de(h.getX(),g);i?o=m:c=m}if(r>0){let h=i?this.bottomLeft:this.bottomRight,g=Math.trunc(h.getY()+r);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);let m=new de(h.getX(),g);i?a=m:f=m}return new Fr(this.image,o,a,c,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class bh{constructor(t,r,i,o){this.columnCount=t,this.errorCorrectionLevel=o,this.rowCountUpperPart=r,this.rowCountLowerPart=i,this.rowCount=r+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Qi{constructor(){this.buffer=""}static form(t,r){let i=-1;function o(c,f,h,g,m,v){if(c==="%%")return"%";if(r[++i]===void 0)return;c=g?parseInt(g.substr(1)):void 0;let A=m?parseInt(m.substr(1)):void 0,_;switch(v){case"s":_=r[i];break;case"c":_=r[i][0];break;case"f":_=parseFloat(r[i]).toFixed(c);break;case"p":_=parseFloat(r[i]).toPrecision(c);break;case"e":_=parseFloat(r[i]).toExponential(c);break;case"x":_=parseInt(r[i]).toString(A||16);break;case"d":_=parseFloat(parseInt(r[i],A||10).toPrecision(c)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(A);let k=parseInt(h),D=h&&h[0]+""=="0"?"0":" ";for(;_.length<k;)_=f!==void 0?_+D:D+_;return _}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(a,o)}format(t,...r){this.buffer+=Qi.form(t,r)}toString(){return this.buffer}}class qi{constructor(t){this.boundingBox=new Fr(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let r=this.getCodeword(t);if(r!=null)return r;for(let i=1;i<qi.MAX_NEARBY_DISTANCE;i++){let o=this.imageRowToCodewordIndex(t)-i;if(o>=0&&(r=this.codewords[o],r!=null)||(o=this.imageRowToCodewordIndex(t)+i,o<this.codewords.length&&(r=this.codewords[o],r!=null)))return r}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,r){this.codewords[this.imageRowToCodewordIndex(t)]=r}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Qi;let r=0;for(const i of this.codewords){if(i==null){t.format("%3d:    |   %n",r++);continue}t.format("%3d: %3d|%3d%n",r++,i.getRowNumber(),i.getValue())}return t.toString()}}qi.MAX_NEARBY_DISTANCE=5;class $i{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let r=this.values.get(t);r==null&&(r=0),r++,this.values.set(t,r)}getValue(){let t=-1,r=new Array;for(const[i,o]of this.values.entries()){const a={getKey:()=>i,getValue:()=>o};a.getValue()>t?(t=a.getValue(),r=[],r.push(a.getKey())):a.getValue()===t&&r.push(a.getKey())}return ye.toIntArray(r)}getConfidence(t){return this.values.get(t)}}class Mu extends qi{constructor(t,r){super(t),this._isLeft=r}setRowNumbers(){for(let t of this.getCodewords())t!=null&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),a=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=-1,g=1,m=0;for(let v=c;v<f;v++){if(r[v]==null)continue;let A=r[v],_=A.getRowNumber()-h;if(_===0)m++;else if(_===1)g=Math.max(g,m),m=1,h=A.getRowNumber();else if(_<0||A.getRowNumber()>=t.getRowCount()||_>v)r[v]=null;else{let k;g>2?k=(g-2)*_:k=_;let D=k>=v;for(let V=1;V<=k&&!D;V++)D=r[v-V]!=null;D?r[v]=null:(h=A.getRowNumber(),m=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let r=new Int32Array(t.getRowCount());for(let i of this.getCodewords())if(i!=null){let o=i.getRowNumber();if(o>=r.length)continue;r[o]++}return r}adjustIncompleteIndicatorColumnRowNumbers(t){let r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=this.getCodewords(),h=-1;for(let g=a;g<c;g++){if(f[g]==null)continue;let m=f[g];m.setRowNumberAsRowIndicatorColumn();let v=m.getRowNumber()-h;v===0||(v===1?h=m.getRowNumber():m.getRowNumber()>=t.getRowCount()?f[g]=null:h=m.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),r=new $i,i=new $i,o=new $i,a=new $i;for(let f of t){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let h=f.getValue()%30,g=f.getRowNumber();switch(this._isLeft||(g+=2),g%3){case 0:i.setValue(h*3+1);break;case 1:a.setValue(h/3),o.setValue(h%3);break;case 2:r.setValue(h+1);break}}if(r.getValue().length===0||i.getValue().length===0||o.getValue().length===0||a.getValue().length===0||r.getValue()[0]<1||i.getValue()[0]+o.getValue()[0]<ye.MIN_ROWS_IN_BARCODE||i.getValue()[0]+o.getValue()[0]>ye.MAX_ROWS_IN_BARCODE)return null;let c=new bh(r.getValue()[0],i.getValue()[0],o.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(t,c),c}removeIncorrectCodewords(t,r){for(let i=0;i<t.length;i++){let o=t[i];if(t[i]==null)continue;let a=o.getValue()%30,c=o.getRowNumber();if(c>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:a*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(a/3)!==r.getErrorCorrectionLevel()||a%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:a+1!==r.getColumnCount()&&(t[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ji{constructor(t,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=ye.MAX_CODEWORDS_IN_BARCODE,r;do r=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let i=this.detectionResultColumns[r].getCodewords();for(let o=0;o<i.length;o++)i[o]!=null&&(i[o].hasValidRowNumber()||this.adjustRowNumbers(r,o,i))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<t.length;i++)if(t[i]!=null&&r[i]!=null&&t[i].getRowNumber()===r[i].getRowNumber())for(let o=1;o<=this.barcodeColumnCount;o++){let a=this.detectionResultColumns[o].getCodewords()[i];a!=null&&(a.setRowNumber(t[i].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[o].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<r.length;i++){if(r[i]==null)continue;let o=r[i].getRowNumber(),a=0;for(let c=this.barcodeColumnCount+1;c>0&&a<this.ADJUST_ROW_NUMBER_SKIP;c--){let f=this.detectionResultColumns[c].getCodewords()[i];f!=null&&(a=Ji.adjustRowNumberIfValid(o,a,f),f.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,r=this.detectionResultColumns[0].getCodewords();for(let i=0;i<r.length;i++){if(r[i]==null)continue;let o=r[i].getRowNumber(),a=0;for(let c=1;c<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;c++){let f=this.detectionResultColumns[c].getCodewords()[i];f!=null&&(a=Ji.adjustRowNumberIfValid(o,a,f),f.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,r,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(t)?(i.setRowNumber(t),r=0):++r),r}adjustRowNumbers(t,r,i){if(!this.detectionResultColumns[t-1])return;let o=i[r],a=this.detectionResultColumns[t-1].getCodewords(),c=a;this.detectionResultColumns[t+1]!=null&&(c=this.detectionResultColumns[t+1].getCodewords());let f=new Array(14);f[2]=a[r],f[3]=c[r],r>0&&(f[0]=i[r-1],f[4]=a[r-1],f[5]=c[r-1]),r>1&&(f[8]=i[r-2],f[10]=a[r-2],f[11]=c[r-2]),r<i.length-1&&(f[1]=i[r+1],f[6]=a[r+1],f[7]=c[r+1]),r<i.length-2&&(f[9]=i[r+2],f[12]=a[r+2],f[13]=c[r+2]);for(let h of f)if(Ji.adjustRowNumber(o,h))return}static adjustRowNumber(t,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===t.getBucket()?(t.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,r){this.detectionResultColumns[t]=r}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new Qi;for(let i=0;i<t.getCodewords().length;i++){r.format("CW %3d:",i);for(let o=0;o<this.barcodeColumnCount+2;o++){if(this.detectionResultColumns[o]==null){r.format("    |   ");continue}let a=this.detectionResultColumns[o].getCodewords()[i];if(a==null){r.format("    |   ");continue}r.format(" %3d|%3d",a.getRowNumber(),a.getValue())}r.format("%n")}return r.toString()}}class es{constructor(t,r,i,o){this.rowNumber=es.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(r),this.bucket=Math.trunc(i),this.value=Math.trunc(o)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==es.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}es.BARCODE_ROW_UNKNOWN=-1;class Ht{static initialize(){for(let t=0;t<ye.SYMBOL_TABLE.length;t++){let r=ye.SYMBOL_TABLE[t],i=r&1;for(let o=0;o<ye.BARS_IN_MODULE;o++){let a=0;for(;(r&1)===i;)a+=1,r>>=1;i=r&1,Ht.RATIOS_TABLE[t]||(Ht.RATIOS_TABLE[t]=new Array(ye.BARS_IN_MODULE)),Ht.RATIOS_TABLE[t][ye.BARS_IN_MODULE-o-1]=Math.fround(a/ye.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let r=Ht.getDecodedCodewordValue(Ht.sampleBitCounts(t));return r!==-1?r:Ht.getClosestDecodedValue(t)}static sampleBitCounts(t){let r=_e.sum(t),i=new Int32Array(ye.BARS_IN_MODULE),o=0,a=0;for(let c=0;c<ye.MODULES_IN_CODEWORD;c++){let f=r/(2*ye.MODULES_IN_CODEWORD)+c*r/ye.MODULES_IN_CODEWORD;a+t[o]<=f&&(a+=t[o],o++),i[o]++}return i}static getDecodedCodewordValue(t){let r=Ht.getBitValue(t);return ye.getCodeword(r)===-1?-1:r}static getBitValue(t){let r=0;for(let i=0;i<t.length;i++)for(let o=0;o<t[i];o++)r=r<<1|(i%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(t){let r=_e.sum(t),i=new Array(ye.BARS_IN_MODULE);if(r>1)for(let c=0;c<i.length;c++)i[c]=Math.fround(t[c]/r);let o=$s.MAX_VALUE,a=-1;this.bSymbolTableReady||Ht.initialize();for(let c=0;c<Ht.RATIOS_TABLE.length;c++){let f=0,h=Ht.RATIOS_TABLE[c];for(let g=0;g<ye.BARS_IN_MODULE;g++){let m=Math.fround(h[g]-i[g]);if(f+=Math.fround(m*m),f>=o)break}f<o&&(o=f,a=ye.SYMBOL_TABLE[c])}return a}}Ht.bSymbolTableReady=!1,Ht.RATIOS_TABLE=new Array(ye.SYMBOL_TABLE.length).map(C=>new Array(ye.BARS_IN_MODULE));class Pu{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class Bu{static parseLong(t,r=void 0){return parseInt(t,r)}}class Lu extends p{}Lu.kind="NullPointerException";class _h{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,r,i){if(t==null)throw new Lu;if(r<0||r>t.length||i<0||r+i>t.length||r+i<0)throw new q;if(i===0)return;for(let o=0;o<i;o++)this.write(t[r+o])}flush(){}close(){}}class Th extends p{}class Rh extends _h{constructor(t=32){if(super(),this.count=0,t<0)throw new S("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let i=this.buf.length<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new Th;i=T.MAX_VALUE}this.buf=b.copyOfUint8Array(this.buf,i)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new q;this.ensureCapacity(this.count+i),j.arraycopy(t,r,this.buf,this.count,i),this.count+=i}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return b.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var Le;(function(C){C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Le||(Le={}));function Fu(){if(typeof window<"u")return window.BigInt||null;if(typeof rs<"u")return rs.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let so;function ar(C){if(typeof so>"u"&&(so=Fu()),so===null)throw new Error("BigInt is not supported!");return so(C)}function Oh(){let C=[];C[0]=ar(1);let t=ar(900);C[1]=t;for(let r=2;r<16;r++)C[r]=C[r-1]*t;return C}class G{static decode(t,r){let i=new fe(""),o=U.ISO8859_1;i.enableDecoding(o);let a=1,c=t[a++],f=new Pu;for(;a<t[0];){switch(c){case G.TEXT_COMPACTION_MODE_LATCH:a=G.textCompaction(t,a,i);break;case G.BYTE_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH_6:a=G.byteCompaction(c,t,o,a,i);break;case G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a++]);break;case G.NUMERIC_COMPACTION_MODE_LATCH:a=G.numericCompaction(t,a,i);break;case G.ECI_CHARSET:U.getCharacterSetECIByValue(t[a++]);break;case G.ECI_GENERAL_PURPOSE:a+=2;break;case G.ECI_USER_DEFINED:a++;break;case G.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=G.decodeMacroBlock(t,a,f);break;case G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case G.MACRO_PDF417_TERMINATOR:throw new z;default:a--,a=G.textCompaction(t,a,i);break}if(a<t.length)c=t[a++];else throw z.getFormatInstance()}if(i.length()===0)throw z.getFormatInstance();let h=new Gi(null,i.toString(),null,r);return h.setOther(f),h}static decodeMacroBlock(t,r,i){if(r+G.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw z.getFormatInstance();let o=new Int32Array(G.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<G.NUMBER_OF_SEQUENCE_CODEWORDS;f++,r++)o[f]=t[r];i.setSegmentIndex(T.parseInt(G.decodeBase900toBase10(o,G.NUMBER_OF_SEQUENCE_CODEWORDS)));let a=new fe;r=G.textCompaction(t,r,a),i.setFileId(a.toString());let c=-1;for(t[r]===G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=r+1);r<t[0];)switch(t[r]){case G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,t[r]){case G.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new fe;r=G.textCompaction(t,r+1,f),i.setFileName(f.toString());break;case G.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let h=new fe;r=G.textCompaction(t,r+1,h),i.setSender(h.toString());break;case G.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let g=new fe;r=G.textCompaction(t,r+1,g),i.setAddressee(g.toString());break;case G.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let m=new fe;r=G.numericCompaction(t,r+1,m),i.setSegmentCount(T.parseInt(m.toString()));break;case G.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let v=new fe;r=G.numericCompaction(t,r+1,v),i.setTimestamp(Bu.parseLong(v.toString()));break;case G.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let A=new fe;r=G.numericCompaction(t,r+1,A),i.setChecksum(T.parseInt(A.toString()));break;case G.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let _=new fe;r=G.numericCompaction(t,r+1,_),i.setFileSize(Bu.parseLong(_.toString()));break;default:throw z.getFormatInstance()}break;case G.MACRO_PDF417_TERMINATOR:r++,i.setLastSegment(!0);break;default:throw z.getFormatInstance()}if(c!==-1){let f=r-c;i.isLastSegment()&&f--,i.setOptionalData(b.copyOfRange(t,c,c+f))}return r}static textCompaction(t,r,i){let o=new Int32Array((t[0]-r)*2),a=new Int32Array((t[0]-r)*2),c=0,f=!1;for(;r<t[0]&&!f;){let h=t[r++];if(h<G.TEXT_COMPACTION_MODE_LATCH)o[c]=h/30,o[c+1]=h%30,c+=2;else switch(h){case G.TEXT_COMPACTION_MODE_LATCH:o[c++]=G.TEXT_COMPACTION_MODE_LATCH;break;case G.BYTE_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH_6:case G.NUMERIC_COMPACTION_MODE_LATCH:case G.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case G.MACRO_PDF417_TERMINATOR:r--,f=!0;break;case G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[c]=G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,h=t[r++],a[c]=h,c++;break}}return G.decodeTextCompaction(o,a,c,i),r}static decodeTextCompaction(t,r,i,o){let a=Le.ALPHA,c=Le.ALPHA,f=0;for(;f<i;){let h=t[f],g="";switch(a){case Le.ALPHA:if(h<26)g=String.fromCharCode(65+h);else switch(h){case 26:g=" ";break;case G.LL:a=Le.LOWER;break;case G.ML:a=Le.MIXED;break;case G.PS:c=a,a=Le.PUNCT_SHIFT;break;case G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[f]);break;case G.TEXT_COMPACTION_MODE_LATCH:a=Le.ALPHA;break}break;case Le.LOWER:if(h<26)g=String.fromCharCode(97+h);else switch(h){case 26:g=" ";break;case G.AS:c=a,a=Le.ALPHA_SHIFT;break;case G.ML:a=Le.MIXED;break;case G.PS:c=a,a=Le.PUNCT_SHIFT;break;case G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[f]);break;case G.TEXT_COMPACTION_MODE_LATCH:a=Le.ALPHA;break}break;case Le.MIXED:if(h<G.PL)g=G.MIXED_CHARS[h];else switch(h){case G.PL:a=Le.PUNCT;break;case 26:g=" ";break;case G.LL:a=Le.LOWER;break;case G.AL:a=Le.ALPHA;break;case G.PS:c=a,a=Le.PUNCT_SHIFT;break;case G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[f]);break;case G.TEXT_COMPACTION_MODE_LATCH:a=Le.ALPHA;break}break;case Le.PUNCT:if(h<G.PAL)g=G.PUNCT_CHARS[h];else switch(h){case G.PAL:a=Le.ALPHA;break;case G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[f]);break;case G.TEXT_COMPACTION_MODE_LATCH:a=Le.ALPHA;break}break;case Le.ALPHA_SHIFT:if(a=c,h<26)g=String.fromCharCode(65+h);else switch(h){case 26:g=" ";break;case G.TEXT_COMPACTION_MODE_LATCH:a=Le.ALPHA;break}break;case Le.PUNCT_SHIFT:if(a=c,h<G.PAL)g=G.PUNCT_CHARS[h];else switch(h){case G.PAL:a=Le.ALPHA;break;case G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[f]);break;case G.TEXT_COMPACTION_MODE_LATCH:a=Le.ALPHA;break}break}g!==""&&o.append(g),f++}}static byteCompaction(t,r,i,o,a){let c=new Rh,f=0,h=0,g=!1;switch(t){case G.BYTE_COMPACTION_MODE_LATCH:let m=new Int32Array(6),v=r[o++];for(;o<r[0]&&!g;)switch(m[f++]=v,h=900*h+v,v=r[o++],v){case G.TEXT_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH:case G.NUMERIC_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH_6:case G.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case G.MACRO_PDF417_TERMINATOR:o--,g=!0;break;default:if(f%5===0&&f>0){for(let A=0;A<6;++A)c.write(Number(ar(h)>>ar(8*(5-A))));h=0,f=0}break}o===r[0]&&v<G.TEXT_COMPACTION_MODE_LATCH&&(m[f++]=v);for(let A=0;A<f;A++)c.write(m[A]);break;case G.BYTE_COMPACTION_MODE_LATCH_6:for(;o<r[0]&&!g;){let A=r[o++];if(A<G.TEXT_COMPACTION_MODE_LATCH)f++,h=900*h+A;else switch(A){case G.TEXT_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH:case G.NUMERIC_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH_6:case G.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case G.MACRO_PDF417_TERMINATOR:o--,g=!0;break}if(f%5===0&&f>0){for(let _=0;_<6;++_)c.write(Number(ar(h)>>ar(8*(5-_))));h=0,f=0}}break}return a.append($.decode(c.toByteArray(),i)),o}static numericCompaction(t,r,i){let o=0,a=!1,c=new Int32Array(G.MAX_NUMERIC_CODEWORDS);for(;r<t[0]&&!a;){let f=t[r++];if(r===t[0]&&(a=!0),f<G.TEXT_COMPACTION_MODE_LATCH)c[o]=f,o++;else switch(f){case G.TEXT_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH:case G.BYTE_COMPACTION_MODE_LATCH_6:case G.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case G.MACRO_PDF417_TERMINATOR:r--,a=!0;break}(o%G.MAX_NUMERIC_CODEWORDS===0||f===G.NUMERIC_COMPACTION_MODE_LATCH||a)&&o>0&&(i.append(G.decodeBase900toBase10(c,o)),o=0)}return r}static decodeBase900toBase10(t,r){let i=ar(0);for(let a=0;a<r;a++)i+=G.EXP900[r-a-1]*ar(t[a]);let o=i.toString();if(o.charAt(0)!=="1")throw new z;return o.substring(1)}}G.TEXT_COMPACTION_MODE_LATCH=900,G.BYTE_COMPACTION_MODE_LATCH=901,G.NUMERIC_COMPACTION_MODE_LATCH=902,G.BYTE_COMPACTION_MODE_LATCH_6=924,G.ECI_USER_DEFINED=925,G.ECI_GENERAL_PURPOSE=926,G.ECI_CHARSET=927,G.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,G.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,G.MACRO_PDF417_TERMINATOR=922,G.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,G.MAX_NUMERIC_CODEWORDS=15,G.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,G.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,G.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,G.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,G.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,G.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,G.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,G.PL=25,G.LL=27,G.AS=27,G.ML=28,G.AL=28,G.PS=29,G.PAL=29,G.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,G.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",G.EXP900=Fu()?Oh():[],G.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Se{constructor(){}static decode(t,r,i,o,a,c,f){let h=new Fr(t,r,i,o,a),g=null,m=null,v;for(let k=!0;;k=!1){if(r!=null&&(g=Se.getRowIndicatorColumn(t,h,r,!0,c,f)),o!=null&&(m=Se.getRowIndicatorColumn(t,h,o,!1,c,f)),v=Se.merge(g,m),v==null)throw H.getNotFoundInstance();let D=v.getBoundingBox();if(k&&D!=null&&(D.getMinY()<h.getMinY()||D.getMaxY()>h.getMaxY()))h=D;else break}v.setBoundingBox(h);let A=v.getBarcodeColumnCount()+1;v.setDetectionResultColumn(0,g),v.setDetectionResultColumn(A,m);let _=g!=null;for(let k=1;k<=A;k++){let D=_?k:A-k;if(v.getDetectionResultColumn(D)!==void 0)continue;let V;D===0||D===A?V=new Mu(h,D===0):V=new qi(h),v.setDetectionResultColumn(D,V);let X=-1,ne=X;for(let re=h.getMinY();re<=h.getMaxY();re++){if(X=Se.getStartColumn(v,D,re,_),X<0||X>h.getMaxX()){if(ne===-1)continue;X=ne}let J=Se.detectCodeword(t,h.getMinX(),h.getMaxX(),_,X,re,c,f);J!=null&&(V.setCodeword(re,J),ne=X,c=Math.min(c,J.getWidth()),f=Math.max(f,J.getWidth()))}}return Se.createDecoderResult(v)}static merge(t,r){if(t==null&&r==null)return null;let i=Se.getBarcodeMetadata(t,r);if(i==null)return null;let o=Fr.merge(Se.adjustBoundingBox(t),Se.adjustBoundingBox(r));return new Ji(i,o)}static adjustBoundingBox(t){if(t==null)return null;let r=t.getRowHeights();if(r==null)return null;let i=Se.getMax(r),o=0;for(let f of r)if(o+=i-f,f>0)break;let a=t.getCodewords();for(let f=0;o>0&&a[f]==null;f++)o--;let c=0;for(let f=r.length-1;f>=0&&(c+=i-r[f],!(r[f]>0));f--);for(let f=a.length-1;c>0&&a[f]==null;f--)c--;return t.getBoundingBox().addMissingRows(o,c,t.isLeft())}static getMax(t){let r=-1;for(let i of t)r=Math.max(r,i);return r}static getBarcodeMetadata(t,r){let i;if(t==null||(i=t.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let o;return r==null||(o=r.getBarcodeMetadata())==null?i:i.getColumnCount()!==o.getColumnCount()&&i.getErrorCorrectionLevel()!==o.getErrorCorrectionLevel()&&i.getRowCount()!==o.getRowCount()?null:i}static getRowIndicatorColumn(t,r,i,o,a,c){let f=new Mu(r,o);for(let h=0;h<2;h++){let g=h===0?1:-1,m=Math.trunc(Math.trunc(i.getX()));for(let v=Math.trunc(Math.trunc(i.getY()));v<=r.getMaxY()&&v>=r.getMinY();v+=g){let A=Se.detectCodeword(t,0,t.getWidth(),o,m,v,a,c);A!=null&&(f.setCodeword(v,A),o?m=A.getStartX():m=A.getEndX())}}return f}static adjustCodewordCount(t,r){let i=r[0][1],o=i.getValue(),a=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-Se.getNumberOfECCodeWords(t.getBarcodeECLevel());if(o.length===0){if(a<1||a>ye.MAX_CODEWORDS_IN_BARCODE)throw H.getNotFoundInstance();i.setValue(a)}else o[0]!==a&&i.setValue(a)}static createDecoderResult(t){let r=Se.createBarcodeMatrix(t);Se.adjustCodewordCount(t,r);let i=new Array,o=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),a=[],c=new Array;for(let h=0;h<t.getBarcodeRowCount();h++)for(let g=0;g<t.getBarcodeColumnCount();g++){let m=r[h][g+1].getValue(),v=h*t.getBarcodeColumnCount()+g;m.length===0?i.push(v):m.length===1?o[v]=m[0]:(c.push(v),a.push(m))}let f=new Array(a.length);for(let h=0;h<f.length;h++)f[h]=a[h];return Se.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),o,ye.toIntArray(i),ye.toIntArray(c),f)}static createDecoderResultFromAmbiguousValues(t,r,i,o,a){let c=new Int32Array(o.length),f=100;for(;f-- >0;){for(let h=0;h<c.length;h++)r[o[h]]=a[h][c[h]];try{return Se.decodeCodewords(r,t,i)}catch(h){if(!(h instanceof B))throw h}if(c.length===0)throw B.getChecksumInstance();for(let h=0;h<c.length;h++)if(c[h]<a[h].length-1){c[h]++;break}else if(c[h]=0,h===c.length-1)throw B.getChecksumInstance()}throw B.getChecksumInstance()}static createBarcodeMatrix(t){let r=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let o=0;o<r.length;o++)for(let a=0;a<r[o].length;a++)r[o][a]=new $i;let i=0;for(let o of t.getDetectionResultColumns()){if(o!=null){for(let a of o.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=0){if(c>=r.length)continue;r[c][i].setValue(a.getValue())}}}i++}return r}static isValidBarcodeColumn(t,r){return r>=0&&r<=t.getBarcodeColumnCount()+1}static getStartColumn(t,r,i,o){let a=o?1:-1,c=null;if(Se.isValidBarcodeColumn(t,r-a)&&(c=t.getDetectionResultColumn(r-a).getCodeword(i)),c!=null)return o?c.getEndX():c.getStartX();if(c=t.getDetectionResultColumn(r).getCodewordNearby(i),c!=null)return o?c.getStartX():c.getEndX();if(Se.isValidBarcodeColumn(t,r-a)&&(c=t.getDetectionResultColumn(r-a).getCodewordNearby(i)),c!=null)return o?c.getEndX():c.getStartX();let f=0;for(;Se.isValidBarcodeColumn(t,r-a);){r-=a;for(let h of t.getDetectionResultColumn(r).getCodewords())if(h!=null)return(o?h.getEndX():h.getStartX())+a*f*(h.getEndX()-h.getStartX());f++}return o?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,r,i,o,a,c,f,h){a=Se.adjustCodewordStartColumn(t,r,i,o,a,c);let g=Se.getModuleBitCount(t,r,i,o,a,c);if(g==null)return null;let m,v=_e.sum(g);if(o)m=a+v;else{for(let k=0;k<g.length/2;k++){let D=g[k];g[k]=g[g.length-1-k],g[g.length-1-k]=D}m=a,a=m-v}if(!Se.checkCodewordSkew(v,f,h))return null;let A=Ht.getDecodedValue(g),_=ye.getCodeword(A);return _===-1?null:new es(a,m,Se.getCodewordBucketNumber(A),_)}static getModuleBitCount(t,r,i,o,a,c){let f=a,h=new Int32Array(8),g=0,m=o?1:-1,v=o;for(;(o?f<i:f>=r)&&g<h.length;)t.get(f,c)===v?(h[g]++,f+=m):(g++,v=!v);return g===h.length||f===(o?i:r)&&g===h.length-1?h:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,r,i,o,a,c){let f=a,h=o?-1:1;for(let g=0;g<2;g++){for(;(o?f>=r:f<i)&&o===t.get(f,c);){if(Math.abs(a-f)>Se.CODEWORD_SKEW_SIZE)return a;f+=h}h=-h,o=!o}return f}static checkCodewordSkew(t,r,i){return r-Se.CODEWORD_SKEW_SIZE<=t&&t<=i+Se.CODEWORD_SKEW_SIZE}static decodeCodewords(t,r,i){if(t.length===0)throw z.getFormatInstance();let o=1<<r+1,a=Se.correctErrors(t,i,o);Se.verifyCodewordCount(t,o);let c=G.decode(t,""+r);return c.setErrorsCorrected(a),c.setErasures(i.length),c}static correctErrors(t,r,i){if(r!=null&&r.length>i/2+Se.MAX_ERRORS||i<0||i>Se.MAX_EC_CODEWORDS)throw B.getChecksumInstance();return Se.errorCorrection.decode(t,i,r)}static verifyCodewordCount(t,r){if(t.length<4)throw z.getFormatInstance();let i=t[0];if(i>t.length)throw z.getFormatInstance();if(i===0)if(r<t.length)t[0]=t.length-r;else throw z.getFormatInstance()}static getBitCountForCodeword(t){let r=new Int32Array(8),i=0,o=r.length-1;for(;!((t&1)!==i&&(i=t&1,o--,o<0));)r[o]++,t>>=1;return r}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return Se.getCodewordBucketNumber(Se.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let r=new Qi;for(let i=0;i<t.length;i++){r.format("Row %2d: ",i);for(let o=0;o<t[i].length;o++){let a=t[i][o];a.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}r.format("%n")}return r.toString()}}Se.CODEWORD_SKEW_SIZE=2,Se.MAX_ERRORS=3,Se.MAX_EC_CODEWORDS=512,Se.errorCorrection=new Du;class At{decode(t,r=null){let i=At.decode(t,r,!1);if(i==null||i.length===0||i[0]==null)throw H.getNotFoundInstance();return i[0]}decodeMultiple(t,r=null){try{return At.decode(t,r,!0)}catch(i){throw i instanceof z||i instanceof B?H.getNotFoundInstance():i}}static decode(t,r,i){const o=new Array,a=ve.detectMultiple(t,r,i);for(const c of a.getPoints()){const f=Se.decode(a.getBits(),c[4],c[5],c[6],c[7],At.getMinCodewordWidth(c),At.getMaxCodewordWidth(c)),h=new Qe(f.getText(),f.getRawBytes(),void 0,c,he.PDF_417);h.putMetadata(pt.ERROR_CORRECTION_LEVEL,f.getECLevel());const g=f.getOther();g!=null&&h.putMetadata(pt.PDF417_EXTRA_METADATA,g),o.push(h)}return o.map(c=>c)}static getMaxWidth(t,r){return t==null||r==null?0:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMinWidth(t,r){return t==null||r==null?T.MAX_VALUE:Math.trunc(Math.abs(t.getX()-r.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(At.getMaxWidth(t[0],t[4]),At.getMaxWidth(t[6],t[2])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN),Math.max(At.getMaxWidth(t[1],t[5]),At.getMaxWidth(t[7],t[3])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(At.getMinWidth(t[0],t[4]),At.getMinWidth(t[6],t[2])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN),Math.min(At.getMinWidth(t[1],t[5]),At.getMinWidth(t[7],t[3])*ye.MODULES_IN_CODEWORD/ye.MODULES_IN_STOP_PATTERN)))}reset(){}}class oo extends p{}oo.kind="ReaderException";class ju{constructor(t,r){this.verbose=t===!0,r&&this.setHints(r)}decode(t,r){return r&&this.setHints(r),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const r=!l(t)&&t.get(K.TRY_HARDER)===!0,i=l(t)?null:t.get(K.POSSIBLE_FORMATS),o=new Array;if(!l(i)){const a=i.some(c=>c===he.UPC_A||c===he.UPC_E||c===he.EAN_13||c===he.EAN_8||c===he.CODABAR||c===he.CODE_39||c===he.CODE_93||c===he.CODE_128||c===he.ITF||c===he.RSS_14||c===he.RSS_EXPANDED);a&&!r&&o.push(new oi(t,this.verbose)),i.includes(he.QR_CODE)&&o.push(new or),i.includes(he.DATA_MATRIX)&&o.push(new sr),i.includes(he.AZTEC)&&o.push(new eo),i.includes(he.PDF_417)&&o.push(new At),a&&r&&o.push(new oi(t,this.verbose))}o.length===0&&(r||o.push(new oi(t,this.verbose)),o.push(new or),o.push(new sr),o.push(new eo),o.push(new At),r&&o.push(new oi(t,this.verbose))),this.readers=o}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new oo("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(t,this.hints)}catch(i){if(i instanceof oo)continue}throw new H("No MultiFormat Readers were able to detect the code.")}}class kh extends ln{constructor(t=null,r=500){const i=new ju;i.setHints(t),super(i,r)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class Dh extends ln{constructor(t=500){super(new At,t)}}class Mh extends ln{constructor(t=500){super(new or,t)}}var Za;(function(C){C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION"})(Za||(Za={}));var ht=Za;class Ka{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new Vt(t,Int32Array.from([1])))}buildGenerator(t){const r=this.cachedGenerators;if(t>=r.length){let i=r[r.length-1];const o=this.field;for(let a=r.length;a<=t;a++){const c=i.multiply(new Vt(o,Int32Array.from([1,o.exp(a-1+o.getGeneratorBase())])));r.push(c),i=c}}return r[t]}encode(t,r){if(r===0)throw new S("No error correction bytes");const i=t.length-r;if(i<=0)throw new S("No data bytes provided");const o=this.buildGenerator(r),a=new Int32Array(i);j.arraycopy(t,0,a,0,i);let c=new Vt(this.field,a);c=c.multiplyByMonomial(r,1);const h=c.divide(o)[1].getCoefficients(),g=r-h.length;for(let m=0;m<g;m++)t[i+m]=0;j.arraycopy(h,0,t,i+g,h.length)}}class rt{constructor(){}static applyMaskPenaltyRule1(t){return rt.applyMaskPenaltyRule1Internal(t,!0)+rt.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let r=0;const i=t.getArray(),o=t.getWidth(),a=t.getHeight();for(let c=0;c<a-1;c++){const f=i[c];for(let h=0;h<o-1;h++){const g=f[h];g===f[h+1]&&g===i[c+1][h]&&g===i[c+1][h+1]&&r++}}return rt.N2*r}static applyMaskPenaltyRule3(t){let r=0;const i=t.getArray(),o=t.getWidth(),a=t.getHeight();for(let c=0;c<a;c++)for(let f=0;f<o;f++){const h=i[c];f+6<o&&h[f]===1&&h[f+1]===0&&h[f+2]===1&&h[f+3]===1&&h[f+4]===1&&h[f+5]===0&&h[f+6]===1&&(rt.isWhiteHorizontal(h,f-4,f)||rt.isWhiteHorizontal(h,f+7,f+11))&&r++,c+6<a&&i[c][f]===1&&i[c+1][f]===0&&i[c+2][f]===1&&i[c+3][f]===1&&i[c+4][f]===1&&i[c+5][f]===0&&i[c+6][f]===1&&(rt.isWhiteVertical(i,f,c-4,c)||rt.isWhiteVertical(i,f,c+7,c+11))&&r++}return r*rt.N3}static isWhiteHorizontal(t,r,i){r=Math.max(r,0),i=Math.min(i,t.length);for(let o=r;o<i;o++)if(t[o]===1)return!1;return!0}static isWhiteVertical(t,r,i,o){i=Math.max(i,0),o=Math.min(o,t.length);for(let a=i;a<o;a++)if(t[a][r]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let r=0;const i=t.getArray(),o=t.getWidth(),a=t.getHeight();for(let h=0;h<a;h++){const g=i[h];for(let m=0;m<o;m++)g[m]===1&&r++}const c=t.getHeight()*t.getWidth();return Math.floor(Math.abs(r*2-c)*10/c)*rt.N4}static getDataMaskBit(t,r,i){let o,a;switch(t){case 0:o=i+r&1;break;case 1:o=i&1;break;case 2:o=r%3;break;case 3:o=(i+r)%3;break;case 4:o=Math.floor(i/2)+Math.floor(r/3)&1;break;case 5:a=i*r,o=(a&1)+a%3;break;case 6:a=i*r,o=(a&1)+a%3&1;break;case 7:a=i*r,o=a%3+(i+r&1)&1;break;default:throw new S("Invalid mask pattern: "+t)}return o===0}static applyMaskPenaltyRule1Internal(t,r){let i=0;const o=r?t.getHeight():t.getWidth(),a=r?t.getWidth():t.getHeight(),c=t.getArray();for(let f=0;f<o;f++){let h=0,g=-1;for(let m=0;m<a;m++){const v=r?c[f][m]:c[m][f];v===g?h++:(h>=5&&(i+=rt.N1+(h-5)),h=1,g=v)}h>=5&&(i+=rt.N1+(h-5))}return i}}rt.N1=3,rt.N2=3,rt.N3=40,rt.N4=10;class ao{constructor(t,r){this.width=t,this.height=r;const i=new Array(r);for(let o=0;o!==r;o++)i[o]=new Uint8Array(t);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(t,r){return this.bytes[r][t]}getArray(){return this.bytes}setNumber(t,r,i){this.bytes[r][t]=i}setBoolean(t,r,i){this.bytes[r][t]=i?1:0}clear(t){for(const r of this.bytes)b.fill(r,t)}equals(t){if(!(t instanceof ao))return!1;const r=t;if(this.width!==r.width||this.height!==r.height)return!1;for(let i=0,o=this.height;i<o;++i){const a=this.bytes[i],c=r.bytes[i];for(let f=0,h=this.width;f<h;++f)if(a[f]!==c[f])return!1}return!0}toString(){const t=new fe;for(let r=0,i=this.height;r<i;++r){const o=this.bytes[r];for(let a=0,c=this.width;a<c;++a)switch(o[a]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class jr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new fe;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<jr.NUM_MASK_PATTERNS}}jr.NUM_MASK_PATTERNS=8;class je extends p{}je.kind="WriterException";class we{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,r,i,o,a){we.clearMatrix(a),we.embedBasicPatterns(i,a),we.embedTypeInfo(r,o,a),we.maybeEmbedVersionInfo(i,a),we.embedDataBits(t,o,a)}static embedBasicPatterns(t,r){we.embedPositionDetectionPatternsAndSeparators(r),we.embedDarkDotAtLeftBottomCorner(r),we.maybeEmbedPositionAdjustmentPatterns(t,r),we.embedTimingPatterns(r)}static embedTypeInfo(t,r,i){const o=new L;we.makeTypeInfoBits(t,r,o);for(let a=0,c=o.getSize();a<c;++a){const f=o.get(o.getSize()-1-a),h=we.TYPE_INFO_COORDINATES[a],g=h[0],m=h[1];if(i.setBoolean(g,m,f),a<8){const v=i.getWidth()-a-1;i.setBoolean(v,8,f)}else{const A=i.getHeight()-7+(a-8);i.setBoolean(8,A,f)}}}static maybeEmbedVersionInfo(t,r){if(t.getVersionNumber()<7)return;const i=new L;we.makeVersionInfoBits(t,i);let o=6*3-1;for(let a=0;a<6;++a)for(let c=0;c<3;++c){const f=i.get(o);o--,r.setBoolean(a,r.getHeight()-11+c,f),r.setBoolean(r.getHeight()-11+c,a,f)}}static embedDataBits(t,r,i){let o=0,a=-1,c=i.getWidth()-1,f=i.getHeight()-1;for(;c>0;){for(c===6&&(c-=1);f>=0&&f<i.getHeight();){for(let h=0;h<2;++h){const g=c-h;if(!we.isEmpty(i.get(g,f)))continue;let m;o<t.getSize()?(m=t.get(o),++o):m=!1,r!==255&&rt.getDataMaskBit(r,g,f)&&(m=!m),i.setBoolean(g,f,m)}f+=a}a=-a,f+=a,c-=2}if(o!==t.getSize())throw new je("Not all bits consumed: "+o+"/"+t.getSize())}static findMSBSet(t){return 32-T.numberOfLeadingZeros(t)}static calculateBCHCode(t,r){if(r===0)throw new S("0 polynomial");const i=we.findMSBSet(r);for(t<<=i-1;we.findMSBSet(t)>=i;)t^=r<<we.findMSBSet(t)-i;return t}static makeTypeInfoBits(t,r,i){if(!jr.isValidMaskPattern(r))throw new je("Invalid mask pattern");const o=t.getBits()<<3|r;i.appendBits(o,5);const a=we.calculateBCHCode(o,we.TYPE_INFO_POLY);i.appendBits(a,10);const c=new L;if(c.appendBits(we.TYPE_INFO_MASK_PATTERN,15),i.xor(c),i.getSize()!==15)throw new je("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(t,r){r.appendBits(t.getVersionNumber(),6);const i=we.calculateBCHCode(t.getVersionNumber(),we.VERSION_INFO_POLY);if(r.appendBits(i,12),r.getSize()!==18)throw new je("should not happen but we got: "+r.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let r=8;r<t.getWidth()-8;++r){const i=(r+1)%2;we.isEmpty(t.get(r,6))&&t.setNumber(r,6,i),we.isEmpty(t.get(6,r))&&t.setNumber(6,r,i)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new je;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,r,i){for(let o=0;o<8;++o){if(!we.isEmpty(i.get(t+o,r)))throw new je;i.setNumber(t+o,r,0)}}static embedVerticalSeparationPattern(t,r,i){for(let o=0;o<7;++o){if(!we.isEmpty(i.get(t,r+o)))throw new je;i.setNumber(t,r+o,0)}}static embedPositionAdjustmentPattern(t,r,i){for(let o=0;o<5;++o){const a=we.POSITION_ADJUSTMENT_PATTERN[o];for(let c=0;c<5;++c)i.setNumber(t+c,r+o,a[c])}}static embedPositionDetectionPattern(t,r,i){for(let o=0;o<7;++o){const a=we.POSITION_DETECTION_PATTERN[o];for(let c=0;c<7;++c)i.setNumber(t+c,r+o,a[c])}}static embedPositionDetectionPatternsAndSeparators(t){const r=we.POSITION_DETECTION_PATTERN[0].length;we.embedPositionDetectionPattern(0,0,t),we.embedPositionDetectionPattern(t.getWidth()-r,0,t),we.embedPositionDetectionPattern(0,t.getWidth()-r,t);const i=8;we.embedHorizontalSeparationPattern(0,i-1,t),we.embedHorizontalSeparationPattern(t.getWidth()-i,i-1,t),we.embedHorizontalSeparationPattern(0,t.getWidth()-i,t);const o=7;we.embedVerticalSeparationPattern(o,0,t),we.embedVerticalSeparationPattern(t.getHeight()-o-1,0,t),we.embedVerticalSeparationPattern(o,t.getHeight()-o,t)}static maybeEmbedPositionAdjustmentPatterns(t,r){if(t.getVersionNumber()<2)return;const i=t.getVersionNumber()-1,o=we.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let a=0,c=o.length;a!==c;a++){const f=o[a];if(f>=0)for(let h=0;h!==c;h++){const g=o[h];g>=0&&we.isEmpty(r.get(g,f))&&we.embedPositionAdjustmentPattern(g-2,f-2,r)}}}}we.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),we.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),we.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),we.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),we.VERSION_INFO_POLY=7973,we.TYPE_INFO_POLY=1335,we.TYPE_INFO_MASK_PATTERN=21522;class Ph{constructor(t,r){this.dataBytes=t,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class He{constructor(){}static calculateMaskPenalty(t){return rt.applyMaskPenaltyRule1(t)+rt.applyMaskPenaltyRule2(t)+rt.applyMaskPenaltyRule3(t)+rt.applyMaskPenaltyRule4(t)}static encode(t,r,i=null){let o=He.DEFAULT_BYTE_MODE_ENCODING;const a=i!==null&&i.get(ht.CHARACTER_SET)!==void 0;a&&(o=i.get(ht.CHARACTER_SET).toString());const c=this.chooseMode(t,o),f=new L;if(c===me.BYTE&&(a||He.DEFAULT_BYTE_MODE_ENCODING!==o)){const re=U.getCharacterSetECIByName(o);re!==void 0&&this.appendECI(re,f)}this.appendModeInfo(c,f);const h=new L;this.appendBytes(t,c,h,o);let g;if(i!==null&&i.get(ht.QR_VERSION)!==void 0){const re=Number.parseInt(i.get(ht.QR_VERSION).toString(),10);g=xe.getVersionForNumber(re);const J=this.calculateBitsNeeded(c,f,h,g);if(!this.willFit(J,g,r))throw new je("Data too big for requested version")}else g=this.recommendVersion(r,c,f,h);const m=new L;m.appendBitArray(f);const v=c===me.BYTE?h.getSizeInBytes():t.length;this.appendLengthInfo(v,g,c,m),m.appendBitArray(h);const A=g.getECBlocksForLevel(r),_=g.getTotalCodewords()-A.getTotalECCodewords();this.terminateBits(_,m);const k=this.interleaveWithECBytes(m,g.getTotalCodewords(),_,A.getNumBlocks()),D=new jr;D.setECLevel(r),D.setMode(c),D.setVersion(g);const V=g.getDimensionForVersion(),X=new ao(V,V),ne=this.chooseMaskPattern(k,r,g,X);return D.setMaskPattern(ne),we.buildMatrix(k,r,g,ne,X),D.setMatrix(X),D}static recommendVersion(t,r,i,o){const a=this.calculateBitsNeeded(r,i,o,xe.getVersionForNumber(1)),c=this.chooseVersion(a,t),f=this.calculateBitsNeeded(r,i,o,c);return this.chooseVersion(f,t)}static calculateBitsNeeded(t,r,i,o){return r.getSize()+t.getCharacterCountBits(o)+i.getSize()}static getAlphanumericCode(t){return t<He.ALPHANUMERIC_TABLE.length?He.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,r=null){if(U.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(t))return me.KANJI;let i=!1,o=!1;for(let a=0,c=t.length;a<c;++a){const f=t.charAt(a);if(He.isDigit(f))i=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)o=!0;else return me.BYTE}return o?me.ALPHANUMERIC:i?me.NUMERIC:me.BYTE}static isOnlyDoubleByteKanji(t){let r;try{r=$.encode(t,U.SJIS)}catch{return!1}const i=r.length;if(i%2!==0)return!1;for(let o=0;o<i;o+=2){const a=r[o]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0}static chooseMaskPattern(t,r,i,o){let a=Number.MAX_SAFE_INTEGER,c=-1;for(let f=0;f<jr.NUM_MASK_PATTERNS;f++){we.buildMatrix(t,r,i,f,o);let h=this.calculateMaskPenalty(o);h<a&&(a=h,c=f)}return c}static chooseVersion(t,r){for(let i=1;i<=40;i++){const o=xe.getVersionForNumber(i);if(He.willFit(t,o,r))return o}throw new je("Data too big")}static willFit(t,r,i){const o=r.getTotalCodewords(),c=r.getECBlocksForLevel(i).getTotalECCodewords(),f=o-c,h=(t+7)/8;return f>=h}static terminateBits(t,r){const i=t*8;if(r.getSize()>i)throw new je("data bits cannot fit in the QR Code"+r.getSize()+" > "+i);for(let c=0;c<4&&r.getSize()<i;++c)r.appendBit(!1);const o=r.getSize()&7;if(o>0)for(let c=o;c<8;c++)r.appendBit(!1);const a=t-r.getSizeInBytes();for(let c=0;c<a;++c)r.appendBits(c&1?17:236,8);if(r.getSize()!==i)throw new je("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,r,i,o,a,c){if(o>=i)throw new je("Block ID too large");const f=t%i,h=i-f,g=Math.floor(t/i),m=g+1,v=Math.floor(r/i),A=v+1,_=g-v,k=m-A;if(_!==k)throw new je("EC bytes mismatch");if(i!==h+f)throw new je("RS blocks mismatch");if(t!==(v+_)*h+(A+k)*f)throw new je("Total bytes mismatch");o<h?(a[0]=v,c[0]=_):(a[0]=A,c[0]=k)}static interleaveWithECBytes(t,r,i,o){if(t.getSizeInBytes()!==i)throw new je("Number of bits and data bytes does not match");let a=0,c=0,f=0;const h=new Array;for(let m=0;m<o;++m){const v=new Int32Array(1),A=new Int32Array(1);He.getNumDataBytesAndNumECBytesForBlockID(r,i,o,m,v,A);const _=v[0],k=new Uint8Array(_);t.toBytes(8*a,k,0,_);const D=He.generateECBytes(k,A[0]);h.push(new Ph(k,D)),c=Math.max(c,_),f=Math.max(f,D.length),a+=v[0]}if(i!==a)throw new je("Data bytes does not match offset");const g=new L;for(let m=0;m<c;++m)for(const v of h){const A=v.getDataBytes();m<A.length&&g.appendBits(A[m],8)}for(let m=0;m<f;++m)for(const v of h){const A=v.getErrorCorrectionBytes();m<A.length&&g.appendBits(A[m],8)}if(r!==g.getSizeInBytes())throw new je("Interleaving error: "+r+" and "+g.getSizeInBytes()+" differ.");return g}static generateECBytes(t,r){const i=t.length,o=new Int32Array(i+r);for(let c=0;c<i;c++)o[c]=t[c]&255;new Ka(ke.QR_CODE_FIELD_256).encode(o,r);const a=new Uint8Array(r);for(let c=0;c<r;c++)a[c]=o[i+c];return a}static appendModeInfo(t,r){r.appendBits(t.getBits(),4)}static appendLengthInfo(t,r,i,o){const a=i.getCharacterCountBits(r);if(t>=1<<a)throw new je(t+" is bigger than "+((1<<a)-1));o.appendBits(t,a)}static appendBytes(t,r,i,o){switch(r){case me.NUMERIC:He.appendNumericBytes(t,i);break;case me.ALPHANUMERIC:He.appendAlphanumericBytes(t,i);break;case me.BYTE:He.append8BitBytes(t,i,o);break;case me.KANJI:He.appendKanjiBytes(t,i);break;default:throw new je("Invalid mode: "+r)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const r=He.getDigit(t);return r>=0&&r<=9}static appendNumericBytes(t,r){const i=t.length;let o=0;for(;o<i;){const a=He.getDigit(t.charAt(o));if(o+2<i){const c=He.getDigit(t.charAt(o+1)),f=He.getDigit(t.charAt(o+2));r.appendBits(a*100+c*10+f,10),o+=3}else if(o+1<i){const c=He.getDigit(t.charAt(o+1));r.appendBits(a*10+c,7),o+=2}else r.appendBits(a,4),o++}}static appendAlphanumericBytes(t,r){const i=t.length;let o=0;for(;o<i;){const a=He.getAlphanumericCode(t.charCodeAt(o));if(a===-1)throw new je;if(o+1<i){const c=He.getAlphanumericCode(t.charCodeAt(o+1));if(c===-1)throw new je;r.appendBits(a*45+c,11),o+=2}else r.appendBits(a,6),o++}}static append8BitBytes(t,r,i){let o;try{o=$.encode(t,i)}catch(a){throw new je(a)}for(let a=0,c=o.length;a!==c;a++){const f=o[a];r.appendBits(f,8)}}static appendKanjiBytes(t,r){let i;try{i=$.encode(t,U.SJIS)}catch(a){throw new je(a)}const o=i.length;for(let a=0;a<o;a+=2){const c=i[a]&255,f=i[a+1]&255,h=c<<8&4294967295|f;let g=-1;if(h>=33088&&h<=40956?g=h-33088:h>=57408&&h<=60351&&(g=h-49472),g===-1)throw new je("Invalid byte sequence");const m=(g>>8)*192+(g&255);r.appendBits(m,13)}}static appendECI(t,r){r.appendBits(me.ECI.getBits(),4),r.appendBits(t.getValue(),8)}}He.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),He.DEFAULT_BYTE_MODE_ENCODING=U.UTF8.getName();class Ur{write(t,r,i,o=null){if(t.length===0)throw new S("Found empty contents");if(r<0||i<0)throw new S("Requested dimensions are too small: "+r+"x"+i);let a=We.L,c=Ur.QUIET_ZONE_SIZE;o!==null&&(o.get(ht.ERROR_CORRECTION)!==void 0&&(a=We.fromString(o.get(ht.ERROR_CORRECTION).toString())),o.get(ht.MARGIN)!==void 0&&(c=Number.parseInt(o.get(ht.MARGIN).toString(),10)));const f=He.encode(t,a,o);return this.renderResult(f,r,i,c)}writeToDom(t,r,i,o,a=null){typeof t=="string"&&(t=document.querySelector(t));const c=this.write(r,i,o,a);t&&t.appendChild(c)}renderResult(t,r,i,o){const a=t.getMatrix();if(a===null)throw new Tn;const c=a.getWidth(),f=a.getHeight(),h=c+o*2,g=f+o*2,m=Math.max(r,h),v=Math.max(i,g),A=Math.min(Math.floor(m/h),Math.floor(v/g)),_=Math.floor((m-c*A)/2),k=Math.floor((v-f*A)/2),D=this.createSVGElement(m,v);for(let V=0,X=k;V<f;V++,X+=A)for(let ne=0,re=_;ne<c;ne++,re+=A)if(a.get(ne,V)===1){const J=this.createSvgRectElement(re,X,A,A);D.appendChild(J)}return D}createSVGElement(t,r){const i=document.createElementNS(Ur.SVG_NS,"svg");return i.setAttributeNS(null,"height",t.toString()),i.setAttributeNS(null,"width",r.toString()),i}createSvgRectElement(t,r,i,o){const a=document.createElementNS(Ur.SVG_NS,"rect");return a.setAttributeNS(null,"x",t.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"height",i.toString()),a.setAttributeNS(null,"width",o.toString()),a.setAttributeNS(null,"fill","#000000"),a}}Ur.QUIET_ZONE_SIZE=4,Ur.SVG_NS="http://www.w3.org/2000/svg";class li{encode(t,r,i,o,a){if(t.length===0)throw new S("Found empty contents");if(r!==he.QR_CODE)throw new S("Can only encode QR_CODE, but got "+r);if(i<0||o<0)throw new S(`Requested dimensions are too small: ${i}x${o}`);let c=We.L,f=li.QUIET_ZONE_SIZE;a!==null&&(a.get(ht.ERROR_CORRECTION)!==void 0&&(c=We.fromString(a.get(ht.ERROR_CORRECTION).toString())),a.get(ht.MARGIN)!==void 0&&(f=Number.parseInt(a.get(ht.MARGIN).toString(),10)));const h=He.encode(t,c,a);return li.renderResult(h,i,o,f)}static renderResult(t,r,i,o){const a=t.getMatrix();if(a===null)throw new Tn;const c=a.getWidth(),f=a.getHeight(),h=c+o*2,g=f+o*2,m=Math.max(r,h),v=Math.max(i,g),A=Math.min(Math.floor(m/h),Math.floor(v/g)),_=Math.floor((m-c*A)/2),k=Math.floor((v-f*A)/2),D=new Ee(m,v);for(let V=0,X=k;V<f;V++,X+=A)for(let ne=0,re=_;ne<c;ne++,re+=A)a.get(ne,V)===1&&D.setRegion(re,X,A,A);return D}}li.QUIET_ZONE_SIZE=4;class Bh{encode(t,r,i,o,a){let c;switch(r){case he.QR_CODE:c=new li;break;default:throw new S("No encoder available for format "+r)}return c.encode(t,r,i,o,a)}}class Dn extends ie{constructor(t,r,i,o,a,c,f,h){if(super(c,f),this.yuvData=t,this.dataWidth=r,this.dataHeight=i,this.left=o,this.top=a,o+c>r||a+f>i)throw new S("Crop rectangle does not fit within image data.");h&&this.reverseHorizontal(c,f)}getRow(t,r){if(t<0||t>=this.getHeight())throw new S("Requested row is outside the image: "+t);const i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));const o=(t+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,o,r,0,i),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;const i=t*r,o=new Uint8ClampedArray(i);let a=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return j.arraycopy(this.yuvData,a,o,0,i),o;for(let c=0;c<r;c++){const f=c*t;j.arraycopy(this.yuvData,a,o,f,t),a+=this.dataWidth}return o}isCropSupported(){return!0}crop(t,r,i,o){return new Dn(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,o,!1)}renderThumbnail(){const t=this.getWidth()/Dn.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/Dn.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),o=this.yuvData;let a=this.top*this.dataWidth+this.left;for(let c=0;c<r;c++){const f=c*t;for(let h=0;h<t;h++){const g=o[a+h*Dn.THUMBNAIL_SCALE_FACTOR]&255;i[f+h]=4278190080|g*65793}a+=this.dataWidth*Dn.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/Dn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Dn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,r){const i=this.yuvData;for(let o=0,a=this.top*this.dataWidth+this.left;o<r;o++,a+=this.dataWidth){const c=a+t/2;for(let f=a,h=a+t-1;f<c;f++,h--){const g=i[f];i[f]=i[h],i[h]=g}}}invert(){return new ge(this)}}Dn.THUMBNAIL_SCALE_FACTOR=2;class Qa extends ie{constructor(t,r,i,o,a,c,f){if(super(r,i),this.dataWidth=o,this.dataHeight=a,this.left=c,this.top=f,t.BYTES_PER_ELEMENT===4){const h=r*i,g=new Uint8ClampedArray(h);for(let m=0;m<h;m++){const v=t[m],A=v>>16&255,_=v>>7&510,k=v&255;g[m]=(A+_+k)/4&255}this.luminances=g}else this.luminances=t;if(o===void 0&&(this.dataWidth=r),a===void 0&&(this.dataHeight=i),c===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+i>this.dataHeight)throw new S("Crop rectangle does not fit within image data.")}getRow(t,r){if(t<0||t>=this.getHeight())throw new S("Requested row is outside the image: "+t);const i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));const o=(t+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,o,r,0,i),r}getMatrix(){const t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;const i=t*r,o=new Uint8ClampedArray(i);let a=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return j.arraycopy(this.luminances,a,o,0,i),o;for(let c=0;c<r;c++){const f=c*t;j.arraycopy(this.luminances,a,o,f,t),a+=this.dataWidth}return o}isCropSupported(){return!0}crop(t,r,i,o){return new Qa(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)}invert(){return new ge(this)}}class Uu extends U{static forName(t){return this.getCharacterSetECIByName(t)}}class qa{}qa.ISO_8859_1=U.ISO8859_1;class Vu{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class Wu{static singletonList(t){return[t]}static min(t,r){return t.sort(r)[0]}}class Lh{constructor(t){this.previous=t}getPrevious(){return this.previous}}class ci extends Lh{constructor(t,r,i){super(t),this.value=r,this.bitCount=i}appendTo(t,r){t.appendBits(this.value,this.bitCount)}add(t,r){return new ci(this,t,r)}addBinaryShift(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ci(this,t,r)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+T.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class $a extends ci{constructor(t,r,i){super(t,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=i}appendTo(t,r){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)}addBinaryShift(t,r){return new $a(this,t,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Fh(C,t,r){return new $a(C,t,r)}function ts(C,t,r){return new ci(C,t,r)}const jh=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],lr=0,lo=1,dn=2,zu=3,Mn=4,Uh=new ci(null,0,0),Ja=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Vh(C){for(let t of C)b.fill(t,-1);return C[lr][Mn]=0,C[lo][Mn]=0,C[lo][lr]=28,C[zu][Mn]=0,C[dn][Mn]=0,C[dn][lr]=15,C}const Hu=Vh(b.createInt32Array(6,6));class Pn{constructor(t,r,i,o){this.token=t,this.mode=r,this.binaryShiftByteCount=i,this.bitCount=o}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,r){let i=this.bitCount,o=this.token;if(t!==this.mode){let c=Ja[this.mode][t];o=ts(o,c&65535,c>>16),i+=c>>16}let a=t===dn?4:5;return o=ts(o,r,a),new Pn(o,t,0,i+a)}shiftAndAppend(t,r){let i=this.token,o=this.mode===dn?4:5;return i=ts(i,Hu[this.mode][t],o),i=ts(i,r,5),new Pn(i,this.mode,0,this.bitCount+o+5)}addBinaryShiftChar(t){let r=this.token,i=this.mode,o=this.bitCount;if(this.mode===Mn||this.mode===dn){let f=Ja[i][lr];r=ts(r,f&65535,f>>16),o+=f>>16,i=lr}let a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new Pn(r,i,this.binaryShiftByteCount+1,o+a);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(t+1)),c}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=Fh(r,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new Pn(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let r=this.bitCount+(Ja[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?r+=Pn.calculateBinaryShiftCost(t)-Pn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(r+=10),r<=t.bitCount}toBitArray(t){let r=[];for(let o=this.endBinaryShift(t.length).token;o!==null;o=o.getPrevious())r.unshift(o);let i=new L;for(const o of r)o.appendTo(i,t);return i}toString(){return ee.format("%s bits=%d bytes=%d",jh[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}Pn.INITIAL_STATE=new Pn(Uh,lr,0,0);function Wh(C){const t=ee.getCharCode(" "),r=ee.getCharCode("."),i=ee.getCharCode(",");C[lr][t]=1;const o=ee.getCharCode("Z"),a=ee.getCharCode("A");for(let A=a;A<=o;A++)C[lr][A]=A-a+2;C[lo][t]=1;const c=ee.getCharCode("z"),f=ee.getCharCode("a");for(let A=f;A<=c;A++)C[lo][A]=A-f+2;C[dn][t]=1;const h=ee.getCharCode("9"),g=ee.getCharCode("0");for(let A=g;A<=h;A++)C[dn][A]=A-g+2;C[dn][i]=12,C[dn][r]=13;const m=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let A=0;A<m.length;A++)C[zu][ee.getCharCode(m[A])]=A;const v=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let A=0;A<v.length;A++)ee.getCharCode(v[A])>0&&(C[Mn][ee.getCharCode(v[A])]=A);return C}const el=Wh(b.createInt32Array(5,256));class ns{constructor(t){this.text=t}encode(){const t=ee.getCharCode(" "),r=ee.getCharCode(`
`);let i=Wu.singletonList(Pn.INITIAL_STATE);for(let a=0;a<this.text.length;a++){let c,f=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case ee.getCharCode("\r"):c=f===r?2:0;break;case ee.getCharCode("."):c=f===t?3:0;break;case ee.getCharCode(","):c=f===t?4:0;break;case ee.getCharCode(":"):c=f===t?5:0;break;default:c=0}c>0?(i=ns.updateStateListForPair(i,a,c),a++):i=this.updateStateListForChar(i,a)}return Wu.min(i,(a,c)=>a.getBitCount()-c.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,r){const i=[];for(let o of t)this.updateStateForChar(o,r,i);return ns.simplifyStates(i)}updateStateForChar(t,r,i){let o=this.text[r]&255,a=el[t.getMode()][o]>0,c=null;for(let f=0;f<=Mn;f++){let h=el[f][o];if(h>0){if(c==null&&(c=t.endBinaryShift(r)),!a||f===t.getMode()||f===dn){const g=c.latchAndAppend(f,h);i.push(g)}if(!a&&Hu[t.getMode()][f]>=0){const g=c.shiftAndAppend(f,h);i.push(g)}}}if(t.getBinaryShiftByteCount()>0||el[t.getMode()][o]===0){let f=t.addBinaryShiftChar(r);i.push(f)}}static updateStateListForPair(t,r,i){const o=[];for(let a of t)this.updateStateForPair(a,r,i,o);return this.simplifyStates(o)}static updateStateForPair(t,r,i,o){let a=t.endBinaryShift(r);if(o.push(a.latchAndAppend(Mn,i)),t.getMode()!==Mn&&o.push(a.shiftAndAppend(Mn,i)),i===3||i===4){let c=a.latchAndAppend(dn,16-i).latchAndAppend(dn,1);o.push(c)}if(t.getBinaryShiftByteCount()>0){let c=t.addBinaryShiftChar(r).addBinaryShiftChar(r+1);o.push(c)}}static simplifyStates(t){let r=[];for(const i of t){let o=!0;for(const a of r){if(a.isBetterThanOrEqualTo(i)){o=!1;break}i.isBetterThanOrEqualTo(a)&&(r=r.filter(c=>c!==a))}o&&r.push(i)}return r}}class Te{constructor(){}static encodeBytes(t){return Te.encode(t,Te.DEFAULT_EC_PERCENT,Te.DEFAULT_AZTEC_LAYERS)}static encode(t,r,i){let o=new ns(t).encode(),a=T.truncDivision(o.getSize()*r,100)+11,c=o.getSize()+a,f,h,g,m,v;if(i!==Te.DEFAULT_AZTEC_LAYERS){if(f=i<0,h=Math.abs(i),h>(f?Te.MAX_NB_BITS_COMPACT:Te.MAX_NB_BITS))throw new S(ee.format("Illegal value %s for layers",i));g=Te.totalBitsInLayer(h,f),m=Te.WORD_SIZE[h];let J=g-g%m;if(v=Te.stuffBits(o,m),v.getSize()+a>J)throw new S("Data to large for user specified layer");if(f&&v.getSize()>m*64)throw new S("Data to large for user specified layer")}else{m=0,v=null;for(let J=0;;J++){if(J>Te.MAX_NB_BITS)throw new S("Data too large for an Aztec code");if(f=J<=3,h=f?J+1:J,g=Te.totalBitsInLayer(h,f),c>g)continue;(v==null||m!==Te.WORD_SIZE[h])&&(m=Te.WORD_SIZE[h],v=Te.stuffBits(o,m));let Ne=g-g%m;if(!(f&&v.getSize()>m*64)&&v.getSize()+a<=Ne)break}}let A=Te.generateCheckWords(v,g,m),_=v.getSize()/m,k=Te.generateModeMessage(f,h,_),D=(f?11:14)+h*4,V=new Int32Array(D),X;if(f){X=D;for(let J=0;J<V.length;J++)V[J]=J}else{X=D+1+2*T.truncDivision(T.truncDivision(D,2)-1,15);let J=T.truncDivision(D,2),Ne=T.truncDivision(X,2);for(let Ce=0;Ce<J;Ce++){let Gt=Ce+T.truncDivision(Ce,15);V[J-Ce-1]=Ne-Gt-1,V[J+Ce]=Ne+Gt+1}}let ne=new Ee(X);for(let J=0,Ne=0;J<h;J++){let Ce=(h-J)*4+(f?9:12);for(let Gt=0;Gt<Ce;Gt++){let Cn=Gt*2;for(let Xt=0;Xt<2;Xt++)A.get(Ne+Cn+Xt)&&ne.set(V[J*2+Xt],V[J*2+Gt]),A.get(Ne+Ce*2+Cn+Xt)&&ne.set(V[J*2+Gt],V[D-1-J*2-Xt]),A.get(Ne+Ce*4+Cn+Xt)&&ne.set(V[D-1-J*2-Xt],V[D-1-J*2-Gt]),A.get(Ne+Ce*6+Cn+Xt)&&ne.set(V[D-1-J*2-Gt],V[J*2+Xt])}Ne+=Ce*8}if(Te.drawModeMessage(ne,f,X,k),f)Te.drawBullsEye(ne,T.truncDivision(X,2),5);else{Te.drawBullsEye(ne,T.truncDivision(X,2),7);for(let J=0,Ne=0;J<T.truncDivision(D,2)-1;J+=15,Ne+=16)for(let Ce=T.truncDivision(X,2)&1;Ce<X;Ce+=2)ne.set(T.truncDivision(X,2)-Ne,Ce),ne.set(T.truncDivision(X,2)+Ne,Ce),ne.set(Ce,T.truncDivision(X,2)-Ne),ne.set(Ce,T.truncDivision(X,2)+Ne)}let re=new Vu;return re.setCompact(f),re.setSize(X),re.setLayers(h),re.setCodeWords(_),re.setMatrix(ne),re}static drawBullsEye(t,r,i){for(let o=0;o<i;o+=2)for(let a=r-o;a<=r+o;a++)t.set(a,r-o),t.set(a,r+o),t.set(r-o,a),t.set(r+o,a);t.set(r-i,r-i),t.set(r-i+1,r-i),t.set(r-i,r-i+1),t.set(r+i,r-i),t.set(r+i,r-i+1),t.set(r+i,r+i-1)}static generateModeMessage(t,r,i){let o=new L;return t?(o.appendBits(r-1,2),o.appendBits(i-1,6),o=Te.generateCheckWords(o,28,4)):(o.appendBits(r-1,5),o.appendBits(i-1,11),o=Te.generateCheckWords(o,40,4)),o}static drawModeMessage(t,r,i,o){let a=T.truncDivision(i,2);if(r)for(let c=0;c<7;c++){let f=a-3+c;o.get(c)&&t.set(f,a-5),o.get(c+7)&&t.set(a+5,f),o.get(20-c)&&t.set(f,a+5),o.get(27-c)&&t.set(a-5,f)}else for(let c=0;c<10;c++){let f=a-5+c+T.truncDivision(c,5);o.get(c)&&t.set(f,a-7),o.get(c+10)&&t.set(a+7,f),o.get(29-c)&&t.set(f,a+7),o.get(39-c)&&t.set(a-7,f)}}static generateCheckWords(t,r,i){let o=t.getSize()/i,a=new Ka(Te.getGF(i)),c=T.truncDivision(r,i),f=Te.bitsToWords(t,i,c);a.encode(f,c-o);let h=r%i,g=new L;g.appendBits(0,h);for(const m of Array.from(f))g.appendBits(m,i);return g}static bitsToWords(t,r,i){let o=new Int32Array(i),a,c;for(a=0,c=t.getSize()/r;a<c;a++){let f=0;for(let h=0;h<r;h++)f|=t.get(a*r+h)?1<<r-h-1:0;o[a]=f}return o}static getGF(t){switch(t){case 4:return ke.AZTEC_PARAM;case 6:return ke.AZTEC_DATA_6;case 8:return ke.AZTEC_DATA_8;case 10:return ke.AZTEC_DATA_10;case 12:return ke.AZTEC_DATA_12;default:throw new S("Unsupported word size "+t)}}static stuffBits(t,r){let i=new L,o=t.getSize(),a=(1<<r)-2;for(let c=0;c<o;c+=r){let f=0;for(let h=0;h<r;h++)(c+h>=o||t.get(c+h))&&(f|=1<<r-1-h);(f&a)===a?(i.appendBits(f&a,r),c--):f&a?i.appendBits(f,r):(i.appendBits(f|1,r),c--)}return i}static totalBitsInLayer(t,r){return((r?88:112)+16*t)*t}}Te.DEFAULT_EC_PERCENT=33,Te.DEFAULT_AZTEC_LAYERS=0,Te.MAX_NB_BITS=32,Te.MAX_NB_BITS_COMPACT=4,Te.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class co{encode(t,r,i,o){return this.encodeWithHints(t,r,i,o,null)}encodeWithHints(t,r,i,o,a){let c=qa.ISO_8859_1,f=Te.DEFAULT_EC_PERCENT,h=Te.DEFAULT_AZTEC_LAYERS;return a!=null&&(a.has(ht.CHARACTER_SET)&&(c=Uu.forName(a.get(ht.CHARACTER_SET).toString())),a.has(ht.ERROR_CORRECTION)&&(f=T.parseInt(a.get(ht.ERROR_CORRECTION).toString())),a.has(ht.AZTEC_LAYERS)&&(h=T.parseInt(a.get(ht.AZTEC_LAYERS).toString()))),co.encodeLayers(t,r,i,o,c,f,h)}static encodeLayers(t,r,i,o,a,c,f){if(r!==he.AZTEC)throw new S("Can only encode AZTEC, but got "+r);let h=Te.encode(ee.getBytes(t,a),c,f);return co.renderResult(h,i,o)}static renderResult(t,r,i){let o=t.getMatrix();if(o==null)throw new Tn;let a=o.getWidth(),c=o.getHeight(),f=Math.max(r,a),h=Math.max(i,c),g=Math.min(f/a,h/c),m=(f-a*g)/2,v=(h-c*g)/2,A=new Ee(f,h);for(let _=0,k=v;_<c;_++,k+=g)for(let D=0,V=m;D<a;D++,V+=g)o.get(D,_)&&A.setRegion(V,k,g,g);return A}}s.AbstractExpandedDecoder=ja,s.ArgumentException=N,s.ArithmeticException=qs,s.AztecCode=Vu,s.AztecCodeReader=eo,s.AztecCodeWriter=co,s.AztecDecoder=Ve,s.AztecDetector=bu,s.AztecDetectorResult=Iu,s.AztecEncoder=Te,s.AztecHighLevelEncoder=ns,s.AztecPoint=Mt,s.BarcodeFormat=he,s.Binarizer=Y,s.BinaryBitmap=O,s.BitArray=L,s.BitMatrix=Ee,s.BitSource=za,s.BrowserAztecCodeReader=gh,s.BrowserBarcodeReader=yh,s.BrowserCodeReader=ln,s.BrowserDatamatrixCodeReader=Ch,s.BrowserMultiFormatReader=kh,s.BrowserPDF417Reader=Dh,s.BrowserQRCodeReader=Mh,s.BrowserQRCodeSvgWriter=Ur,s.CharacterSetECI=U,s.ChecksumException=B,s.Code128Reader=oe,s.Code39Reader=ft,s.DataMatrixDecodedBitStreamParser=ir,s.DataMatrixReader=sr,s.DecodeHintType=K,s.DecoderResult=Gi,s.DefaultGridSampler=Nu,s.DetectorResult=Js,s.EAN13Reader=Pr,s.EncodeHintType=ht,s.Exception=p,s.FormatException=z,s.GenericGF=ke,s.GenericGFPoly=Vt,s.GlobalHistogramBinarizer=ae,s.GridSampler=Pa,s.GridSamplerInstance=nr,s.HTMLCanvasElementLuminanceSource=pe,s.HybridBinarizer=se,s.ITFReader=Fe,s.IllegalArgumentException=S,s.IllegalStateException=Tn,s.InvertedLuminanceSource=ge,s.LuminanceSource=ie,s.MathUtils=_e,s.MultiFormatOneDReader=oi,s.MultiFormatReader=ju,s.MultiFormatWriter=Bh,s.NotFoundException=H,s.OneDReader=ct,s.PDF417DecodedBitStreamParser=G,s.PDF417DecoderErrorCorrection=Du,s.PDF417Reader=At,s.PDF417ResultMetadata=Pu,s.PerspectiveTransform=yn,s.PlanarYUVLuminanceSource=Dn,s.QRCodeByteMatrix=ao,s.QRCodeDataMask=un,s.QRCodeDecodedBitStreamParser=qe,s.QRCodeDecoderErrorCorrectionLevel=We,s.QRCodeDecoderFormatInformation=Tt,s.QRCodeEncoder=He,s.QRCodeEncoderQRCode=jr,s.QRCodeMaskUtil=rt,s.QRCodeMatrixUtil=we,s.QRCodeMode=me,s.QRCodeReader=or,s.QRCodeVersion=xe,s.QRCodeWriter=li,s.RGBLuminanceSource=Qa,s.RSS14Reader=nt,s.RSSExpandedReader=Q,s.ReaderException=oo,s.ReedSolomonDecoder=Yi,s.ReedSolomonEncoder=Ka,s.ReedSolomonException=ni,s.Result=Qe,s.ResultMetadataType=pt,s.ResultPoint=de,s.StringUtils=ee,s.UnsupportedOperationException=M,s.VideoInputDevice=Oe,s.WhiteRectangleDetector=Vn,s.WriterException=je,s.ZXingArrays=b,s.ZXingCharset=Uu,s.ZXingInteger=T,s.ZXingStandardCharsets=qa,s.ZXingStringBuilder=fe,s.ZXingStringEncoding=$,s.ZXingSystem=j,s.createAbstractExpandedDecoder=Ou,Object.defineProperty(s,"__esModule",{value:!0})})})(Tc,Tc.exports);var Xe=Tc.exports;const hm=R1(Xe),gm=T1({__proto__:null,default:hm},[Xe]);var w1=function(){function e(n,s,l){if(this.formatMap=new Map([[ce.QR_CODE,Xe.BarcodeFormat.QR_CODE],[ce.AZTEC,Xe.BarcodeFormat.AZTEC],[ce.CODABAR,Xe.BarcodeFormat.CODABAR],[ce.CODE_39,Xe.BarcodeFormat.CODE_39],[ce.CODE_93,Xe.BarcodeFormat.CODE_93],[ce.CODE_128,Xe.BarcodeFormat.CODE_128],[ce.DATA_MATRIX,Xe.BarcodeFormat.DATA_MATRIX],[ce.MAXICODE,Xe.BarcodeFormat.MAXICODE],[ce.ITF,Xe.BarcodeFormat.ITF],[ce.EAN_13,Xe.BarcodeFormat.EAN_13],[ce.EAN_8,Xe.BarcodeFormat.EAN_8],[ce.PDF_417,Xe.BarcodeFormat.PDF_417],[ce.RSS_14,Xe.BarcodeFormat.RSS_14],[ce.RSS_EXPANDED,Xe.BarcodeFormat.RSS_EXPANDED],[ce.UPC_A,Xe.BarcodeFormat.UPC_A],[ce.UPC_E,Xe.BarcodeFormat.UPC_E],[ce.UPC_EAN_EXTENSION,Xe.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!gm)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=s,this.logger=l;var u=this.createZXingFormats(n),d=new Map;d.set(Xe.DecodeHintType.POSSIBLE_FORMATS,u),d.set(Xe.DecodeHintType.TRY_HARDER,!1),this.hints=d}return e.prototype.decodeAsync=function(n){var s=this;return new Promise(function(l,u){try{l(s.decode(n))}catch(d){u(d)}})},e.prototype.decode=function(n){var s=new Xe.MultiFormatReader(this.verbose,this.hints),l=new Xe.HTMLCanvasElementLuminanceSource(n),u=new Xe.BinaryBitmap(new Xe.HybridBinarizer(l)),d=s.decode(u);return{text:d.text,format:fh.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(s,l,u){n.set(s,l)}),n},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createZXingFormats=function(n){for(var s=[],l=0,u=n;l<u.length;l++){var d=u[l];this.formatMap.has(d)?s.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return s},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),xm=function(e,n,s,l){function u(d){return d instanceof s?d:new s(function(x){x(d)})}return new(s||(s=Promise))(function(d,x){function w(N){try{p(l.next(N))}catch(S){x(S)}}function y(N){try{p(l.throw(N))}catch(S){x(S)}}function p(N){N.done?d(N.value):u(N.value).then(w,y)}p((l=l.apply(e,n||[])).next())})},pm=function(e,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,u,d,x;return x={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function w(p){return function(N){return y([p,N])}}function y(p){if(l)throw new TypeError("Generator is already executing.");for(;x&&(x=0,p[0]&&(s=0)),s;)try{if(l=1,u&&(d=p[0]&2?u.return:p[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,p[1])).done)return d;switch(u=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return s.label++,{value:p[1],done:!1};case 5:s.label++,u=p[1],p=[0];continue;case 7:p=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){s=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){s.label=p[1];break}if(p[0]===6&&s.label<d[1]){s.label=d[1],d=p;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(p);break}d[2]&&s.ops.pop(),s.trys.pop();continue}p=n.call(e,s)}catch(N){p=[6,N],u=0}finally{l=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},y1=function(){function e(n,s,l){if(this.formatMap=new Map([[ce.QR_CODE,"qr_code"],[ce.AZTEC,"aztec"],[ce.CODABAR,"codabar"],[ce.CODE_39,"code_39"],[ce.CODE_93,"code_93"],[ce.CODE_128,"code_128"],[ce.DATA_MATRIX,"data_matrix"],[ce.ITF,"itf"],[ce.EAN_13,"ean_13"],[ce.EAN_8,"ean_8"],[ce.PDF_417,"pdf417"],[ce.UPC_A,"upc_a"],[ce.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=s,this.logger=l;var u=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(u),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},e.prototype.decodeAsync=function(n){return xm(this,void 0,void 0,function(){var s,l;return pm(this,function(u){switch(u.label){case 0:return[4,this.detector.detect(n)];case 1:if(s=u.sent(),!s||s.length===0)throw"No barcode or QR code detected.";return l=this.selectLargestBarcode(s),[2,{text:l.rawValue,format:fh.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(n){for(var s=null,l=0,u=0,d=n;u<d.length;u++){var x=d[u],w=x.boundingBox.width*x.boundingBox.height;w>l&&(l=w,s=x)}if(!s)throw"No largest barcode found";return s},e.prototype.createBarcodeDetectorFormats=function(n){for(var s=[],l=0,u=n;l<u.length;l++){var d=u[l];this.formatMap.has(d)?s.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:s}},e.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},e.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(s,l,u){n.set(s,l)}),n},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),E1=function(e,n,s,l){function u(d){return d instanceof s?d:new s(function(x){x(d)})}return new(s||(s=Promise))(function(d,x){function w(N){try{p(l.next(N))}catch(S){x(S)}}function y(N){try{p(l.throw(N))}catch(S){x(S)}}function p(N){N.done?d(N.value):u(N.value).then(w,y)}p((l=l.apply(e,n||[])).next())})},C1=function(e,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,u,d,x;return x={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function w(p){return function(N){return y([p,N])}}function y(p){if(l)throw new TypeError("Generator is already executing.");for(;x&&(x=0,p[0]&&(s=0)),s;)try{if(l=1,u&&(d=p[0]&2?u.return:p[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,p[1])).done)return d;switch(u=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return s.label++,{value:p[1],done:!1};case 5:s.label++,u=p[1],p=[0];continue;case 7:p=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){s=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){s.label=p[1];break}if(p[0]===6&&s.label<d[1]){s.label=d[1],d=p;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(p);break}d[2]&&s.ops.pop(),s.trys.pop();continue}p=n.call(e,s)}catch(N){p=[6,N],u=0}finally{l=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},mm=function(){function e(n,s,l,u){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=l,s&&y1.isSupported()?(this.primaryDecoder=new y1(n,l,u),this.secondaryDecoder=new w1(n,l,u)):this.primaryDecoder=new w1(n,l,u)}return e.prototype.decodeAsync=function(n){return E1(this,void 0,void 0,function(){var s;return C1(this,function(l){switch(l.label){case 0:s=performance.now(),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,l.sent()];case 3:return this.possiblyLogPerformance(s),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(n){return E1(this,void 0,void 0,function(){var s,l;return C1(this,function(u){switch(u.label){case 0:s=performance.now(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,u.sent()];case 3:if(l=u.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw l;case 4:return this.possiblyLogPerformance(s),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(n){if(this.verbose){var s=performance.now()-n;this.executionResults.push(s),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,s=0,l=this.executionResults;s<l.length;s++){var u=l[s];n+=u}var d=n/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Su=function(){var e=function(n,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(l[d]=u[d])},e(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(n,s);function l(){this.constructor=n}n.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),ga=function(e,n,s,l){function u(d){return d instanceof s?d:new s(function(x){x(d)})}return new(s||(s=Promise))(function(d,x){function w(N){try{p(l.next(N))}catch(S){x(S)}}function y(N){try{p(l.throw(N))}catch(S){x(S)}}function p(N){N.done?d(N.value):u(N.value).then(w,y)}p((l=l.apply(e,n||[])).next())})},xa=function(e,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,u,d,x;return x={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function w(p){return function(N){return y([p,N])}}function y(p){if(l)throw new TypeError("Generator is already executing.");for(;x&&(x=0,p[0]&&(s=0)),s;)try{if(l=1,u&&(d=p[0]&2?u.return:p[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,p[1])).done)return d;switch(u=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return s.label++,{value:p[1],done:!1};case 5:s.label++,u=p[1],p=[0];continue;case 7:p=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){s=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){s.label=p[1];break}if(p[0]===6&&s.label<d[1]){s.label=d[1],d=p;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(p);break}d[2]&&s.ops.pop(),s.trys.pop();continue}p=n.call(e,s)}catch(N){p=[6,N],u=0}finally{l=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},hh=function(){function e(n,s){this.name=n,this.track=s}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(n){var s={};s[this.name]=n;var l={advanced:[s]};return this.track.applyConstraints(l)},e.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var s=n[this.name];return s}return null},e}(),wm=function(e){Su(n,e);function n(s,l){return e.call(this,s,l)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(s){var l={};l[this.name]=s;var u={advanced:[l]};return this.track.applyConstraints(u)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var s=this.track.getCapabilities(),l=s[this.name];return{min:l.min,max:l.max,step:l.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n}(hh),ym=function(e){Su(n,e);function n(s){return e.call(this,"zoom",s)||this}return n}(wm),Em=function(e){Su(n,e);function n(s){return e.call(this,"torch",s)||this}return n}(hh),Cm=function(){function e(n){this.track=n}return e.prototype.zoomFeature=function(){return new ym(this.track)},e.prototype.torchFeature=function(){return new Em(this.track)},e}(),vm=function(){function e(n,s,l){this.isClosed=!1,this.parentElement=n,this.mediaStream=s,this.callbacks=l,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return e.prototype.createVideoElement=function(n){var s=document.createElement("video");return s.style.width="".concat(n,"px"),s.style.display="block",s.muted=!0,s.setAttribute("muted","true"),s.playsInline=!0,s},e.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var s=function(){var l=n.surface.clientWidth,u=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(l,u),n.surface.removeEventListener("playing",s)};this.surface.addEventListener("playing",s),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(n,s,l,u){return ga(this,void 0,void 0,function(){var d,x;return xa(this,function(w){switch(w.label){case 0:return d=new e(n,s,u),l.aspectRatio?(x={aspectRatio:l.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:w.sent(),w.label=2;case 2:return d.setupSurface(),[2,d]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(n){this.failIfClosed();var s=this,l=function(){setTimeout(n,200),s.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(n){return ga(this,void 0,void 0,function(){return xa(this,function(s){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(s,l){var u=n.mediaStream.getVideoTracks(),d=u.length,x=0;n.mediaStream.getVideoTracks().forEach(function(w){n.mediaStream.removeTrack(w),w.stop(),++x,x>=d&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),s())})})},e.prototype.getCapabilities=function(){return new Cm(this.getFirstTrackOrFail())},e}(),Am=function(){function e(n){this.mediaStream=n}return e.prototype.render=function(n,s,l){return ga(this,void 0,void 0,function(){return xa(this,function(u){return[2,vm.create(n,this.mediaStream,s,l)]})})},e.create=function(n){return ga(this,void 0,void 0,function(){var s,l;return xa(this,function(u){switch(u.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return s={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(s)];case 1:return l=u.sent(),[2,new e(l)]}})})},e}(),v1=function(e,n,s,l){function u(d){return d instanceof s?d:new s(function(x){x(d)})}return new(s||(s=Promise))(function(d,x){function w(N){try{p(l.next(N))}catch(S){x(S)}}function y(N){try{p(l.throw(N))}catch(S){x(S)}}function p(N){N.done?d(N.value):u(N.value).then(w,y)}p((l=l.apply(e,n||[])).next())})},A1=function(e,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,u,d,x;return x={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function w(p){return function(N){return y([p,N])}}function y(p){if(l)throw new TypeError("Generator is already executing.");for(;x&&(x=0,p[0]&&(s=0)),s;)try{if(l=1,u&&(d=p[0]&2?u.return:p[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,p[1])).done)return d;switch(u=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return s.label++,{value:p[1],done:!1};case 5:s.label++,u=p[1],p=[0];continue;case 7:p=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){s=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){s.label=p[1];break}if(p[0]===6&&s.label<d[1]){s.label=d[1],d=p;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(p);break}d[2]&&s.ops.pop(),s.trys.pop();continue}p=n.call(e,s)}catch(N){p=[6,N],u=0}finally{l=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Sm=function(){function e(){}return e.failIfNotSupported=function(){return v1(this,void 0,void 0,function(){return A1(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(n){return v1(this,void 0,void 0,function(){return A1(this,function(s){return[2,Am.create(n)]})})},e}(),Im=function(e,n,s,l){function u(d){return d instanceof s?d:new s(function(x){x(d)})}return new(s||(s=Promise))(function(d,x){function w(N){try{p(l.next(N))}catch(S){x(S)}}function y(N){try{p(l.throw(N))}catch(S){x(S)}}function p(N){N.done?d(N.value):u(N.value).then(w,y)}p((l=l.apply(e,n||[])).next())})},Nm=function(e,n){var s={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,u,d,x;return x={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function w(p){return function(N){return y([p,N])}}function y(p){if(l)throw new TypeError("Generator is already executing.");for(;x&&(x=0,p[0]&&(s=0)),s;)try{if(l=1,u&&(d=p[0]&2?u.return:p[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,p[1])).done)return d;switch(u=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return s.label++,{value:p[1],done:!1};case 5:s.label++,u=p[1],p=[0];continue;case 7:p=s.ops.pop(),s.trys.pop();continue;default:if(d=s.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){s=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){s.label=p[1];break}if(p[0]===6&&s.label<d[1]){s.label=d[1],d=p;break}if(d&&s.label<d[2]){s.label=d[2],s.ops.push(p);break}d[2]&&s.ops.pop(),s.trys.pop();continue}p=n.call(e,s)}catch(N){p=[6,N],u=0}finally{l=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},bm=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var n=Ni.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(n=Ni.insecureContextCameraQueryError()),Promise.reject(n)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},e.getCamerasFromMediaDevices=function(){return Im(this,void 0,void 0,function(){var n,s,l,u,d,x,w;return Nm(this,function(y){switch(y.label){case 0:return n=function(p){for(var N=p.getVideoTracks(),S=0,O=N;S<O.length;S++){var B=O[S];B.enabled=!1,B.stop(),p.removeTrack(B)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return s=y.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(l=y.sent(),u=[],d=0,x=l;d<x.length;d++)w=x[d],w.kind==="videoinput"&&u.push({id:w.deviceId,label:w.label});return n(s),[2,u]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,s){var l=function(d){for(var x=[],w=0,y=d;w<y.length;w++){var p=y[w];p.kind==="video"&&x.push({id:p.id,label:p.label})}n(x)},u=MediaStreamTrack;u.getSources(l)})},e}(),it;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(it||(it={}));var _m=function(){function e(){this.state=it.NOT_STARTED,this.onGoingTransactionNewState=it.UNKNOWN}return e.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},e.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===it.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=it.UNKNOWN,this.directTransition(n)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===it.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=it.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==it.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(n){switch(this.state){case it.UNKNOWN:throw"Transition from unknown is not allowed";case it.NOT_STARTED:this.failIfNewStateIs(n,[it.PAUSED]);break;case it.SCANNING:break;case it.PAUSED:break}},e.prototype.failIfNewStateIs=function(n,s){for(var l=0,u=s;l<u.length;l++){var d=u[l];if(n===d)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},e}(),Tm=function(){function e(n){this.stateManager=n}return e.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},e.prototype.directTransition=function(n){this.stateManager.directTransition(n)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===it.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==it.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===it.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===it.PAUSED},e}(),Rm=function(){function e(){}return e.create=function(){return new Tm(new _m)},e}(),Om=function(){var e=function(n,s){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,u){l.__proto__=u}||function(l,u){for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&(l[d]=u[d])},e(n,s)};return function(n,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(n,s);function l(){this.constructor=n}n.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}}(),en=function(e){Om(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n}(um),km=function(){function e(n,s){this.logger=s,this.fps=en.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=en.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?dh.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!zn(this.qrbox)},e.create=function(n,s){return new e(n,s)},e}(),S1=function(){function e(n,s){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var l;typeof s=="boolean"?this.verbose=s===!0:s&&(l=s,this.verbose=l.verbose===!0,l.experimentalFeatures),this.logger=new dm(this.verbose),this.qrcode=new mm(this.getSupportedFormats(s),this.getUseBarCodeDetectorIfSupported(l),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Rm.create()}return e.prototype.start=function(n,s,l,u){var d=this;if(!n)throw"cameraIdOrConfig is required";if(!l||typeof l!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;u?x=u:x=this.verbose?this.logger.log:function(){};var w=km.create(s,this.logger);this.clearElement();var y=!1;w.videoConstraints&&(w.isMediaStreamConstraintsValid()?y=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=y,N=document.getElementById(this.elementId);N.clientWidth?N.clientWidth:en.DEFAULT_WIDTH,N.style.position="relative",this.shouldScan=!0,this.element=N;var S=this,O=this.stateManagerProxy.startTransition(it.SCANNING);return new Promise(function(B,Y){var j=p?w.videoConstraints:S.createVideoConstraints(n);if(!j){O.cancel(),Y("videoConstraints should be defined");return}var q={};(!p||w.aspectRatio)&&(q.aspectRatio=w.aspectRatio);var R={onRenderSurfaceReady:function(b,T){S.setupUi(b,T,w),S.isScanning=!0,S.foreverScan(w,l,x)}};Sm.failIfNotSupported().then(function(b){b.create(j).then(function(T){return T.render(d.element,q,R).then(function(L){S.renderedCamera=L,O.execute(),B(null)}).catch(function(L){O.cancel(),Y(L)})}).catch(function(T){O.cancel(),Y(Ni.errorGettingUserMedia(T))})}).catch(function(b){O.cancel(),Y(Ni.cameraStreamingNotSupported())})})},e.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(it.PAUSED),this.showPausedState(),(zn(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,s=function(){n.stateManagerProxy.directTransition(it.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){s();return}this.renderedCamera.resume(function(){s()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var s=this.stateManagerProxy.startTransition(it.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var l=function(){if(n.element){var d=document.getElementById(en.SHADED_REGION_ELEMENT_ID);d&&n.element.removeChild(d)}},u=this;return this.renderedCamera.close().then(function(){return u.renderedCamera=null,u.element&&(u.element.removeChild(u.canvasElement),u.canvasElement=null),l(),u.qrRegion&&(u.qrRegion=null),u.context&&(u.context=null),s.execute(),u.hidePausedState(),u.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(n,s){return this.scanFileV2(n,s).then(function(l){return l.decodedText})},e.prototype.scanFileV2=function(n,s){var l=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(zn(s)&&(s=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(u,d){l.possiblyCloseLastScanImageFile(),l.clearElement(),l.lastScanImageFile=URL.createObjectURL(n);var x=new Image;x.onload=function(){var w=x.width,y=x.height,p=document.getElementById(l.elementId),N=p.clientWidth?p.clientWidth:en.DEFAULT_WIDTH,S=Math.max(p.clientHeight?p.clientHeight:y,en.FILE_SCAN_MIN_HEIGHT),O=l.computeCanvasDrawConfig(w,y,N,S);if(s){var B=l.createCanvasElement(N,S,"qr-canvas-visible");B.style.display="inline-block",p.appendChild(B);var Y=B.getContext("2d");if(!Y)throw"Unable to get 2d context from canvas";Y.canvas.width=N,Y.canvas.height=S,Y.drawImage(x,0,0,w,y,O.x,O.y,O.width,O.height)}var j=en.FILE_SCAN_HIDDEN_CANVAS_PADDING,q=Math.max(x.width,O.width),R=Math.max(x.height,O.height),b=q+2*j,T=R+2*j,L=l.createCanvasElement(b,T);p.appendChild(L);var Z=L.getContext("2d");if(!Z)throw"Unable to get 2d context from canvas";Z.canvas.width=b,Z.canvas.height=T,Z.drawImage(x,0,0,w,y,j,j,q,R);try{l.qrcode.decodeRobustlyAsync(L).then(function(K){u(m1.createFromQrcodeResult(K))}).catch(d)}catch(K){d("QR code parse error, error = ".concat(K))}},x.onerror=d,x.onabort=d,x.onstalled=d,x.onsuspend=d,x.src=URL.createObjectURL(n)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return bm.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(n){if(n){if(!dh.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(n){var s=[ce.QR_CODE,ce.AZTEC,ce.CODABAR,ce.CODE_39,ce.CODE_93,ce.CODE_128,ce.DATA_MATRIX,ce.MAXICODE,ce.ITF,ce.EAN_13,ce.EAN_8,ce.PDF_417,ce.RSS_14,ce.RSS_EXPANDED,ce.UPC_A,ce.UPC_E,ce.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return s;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var l=[],u=0,d=n.formatsToSupport;u<d.length;u++){var x=d[u];cm(x)?l.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(l.length===0)throw"None of formatsToSupport match supported values.";return l},e.prototype.getUseBarCodeDetectorIfSupported=function(n){if(zn(n))return!0;if(!zn(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(zn(n.experimentalFeatures))return!0;var s=n.experimentalFeatures;return zn(s.useBarCodeDetectorIfSupported)?!0:s.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(n,s,l){var u=this,d=l.qrbox;this.validateQrboxConfig(d);var x=this.toQrdimensions(n,s,d),w=function(p){if(p<en.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(en.MIN_QR_BOX_SIZE,"px.")},y=function(p){return p>n&&(u.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=n),p};w(x.width),w(x.height),x.width=y(x.width)},e.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(n,s,l){if(typeof l=="number")return{width:l,height:l};if(typeof l=="function")try{return l(n,s)}catch(u){throw new Error("qrbox config was passed as a function but it failed with unknown error"+u)}return l},e.prototype.setupUi=function(n,s,l){l.isShadedBoxEnabled()&&this.validateQrboxSize(n,s,l);var u=zn(l.qrbox)?{width:n,height:s}:l.qrbox;this.validateQrboxConfig(u);var d=this.toQrdimensions(n,s,u);d.height>s&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=l.isShadedBoxEnabled()&&d.height<=s,w={x:0,y:0,width:n,height:s},y=x?this.getShadedRegionBounds(n,s,d):w,p=this.createCanvasElement(y.width,y.height),N={willReadFrequently:!0},S=p.getContext("2d",N);S.canvas.width=y.width,S.canvas.height=y.height,this.element.append(p),x&&this.possiblyInsertShadingElement(this.element,n,s,d),this.createScannerPausedUiElement(this.element),this.qrRegion=y,this.context=S,this.canvasElement=p},e.prototype.createScannerPausedUiElement=function(n){var s=document.createElement("div");s.innerText=Ni.scannerPaused(),s.style.display="none",s.style.position="absolute",s.style.top="0px",s.style.zIndex="1",s.style.background="rgba(9, 9, 9, 0.46)",s.style.color="#FFECEC",s.style.textAlign="center",s.style.width="100%",n.appendChild(s),this.scannerPausedUiElement=s},e.prototype.scanContext=function(n,s){var l=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(u){return n(u.text,m1.createFromQrcodeResult(u)),l.possiblyUpdateShaders(!0),!0}).catch(function(u){l.possiblyUpdateShaders(!1);var d=Ni.codeParseError(u);return s(d,fm.createFrom(d)),!1})},e.prototype.foreverScan=function(n,s,l){var u=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),x=d.videoWidth/d.clientWidth,w=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var y=this.qrRegion.width*x,p=this.qrRegion.height*w,N=this.qrRegion.x*x,S=this.qrRegion.y*w;this.context.drawImage(d,N,S,y,p,0,0,this.qrRegion.width,this.qrRegion.height);var O=function(){u.foreverScanTimeout=setTimeout(function(){u.foreverScan(n,s,l)},u.getTimeoutFps(n.fps))};this.scanContext(s,l).then(function(B){!B&&n.disableFlip!==!0?(u.context.translate(u.context.canvas.width,0),u.context.scale(-1,1),u.scanContext(s,l).finally(function(){O()})):O()}).catch(function(B){u.logger.logError("Error happend while scanning context",B),O()})}},e.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var s="facingMode",l="deviceId",u={user:!0,environment:!0},d="exact",x=function(Y){if(Y in u)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(Y,"'")},w=Object.keys(n);if(w.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(w.length," keys");var y=Object.keys(n)[0];if(y!==s&&y!==l)throw"Only '".concat(s,"' and '").concat(l,"' ")+" are supported for 'cameraIdOrConfig'";if(y===s){var p=n.facingMode;if(typeof p=="string"){if(x(p))return{facingMode:p}}else if(typeof p=="object")if(d in p){if(x(p["".concat(d)]))return{facingMode:{exact:p["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var N=typeof p;throw"Invalid type of 'facingMode' = ".concat(N)}}else{var S=n.deviceId;if(typeof S=="string")return{deviceId:S};if(typeof S=="object"){if(d in S)return{deviceId:{exact:S["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var O=typeof S;throw"Invalid type of 'deviceId' = ".concat(O)}}}var B=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(B)},e.prototype.computeCanvasDrawConfig=function(n,s,l,u){if(n<=l&&s<=u){var d=(l-n)/2,x=(u-s)/2;return{x:d,y:x,width:n,height:s}}else{var w=n,y=s;return n>l&&(s=l/n*s,n=l),s>u&&(n=u/s*n,s=u),this.logger.log("Image downsampled from "+"".concat(w,"X").concat(y)+" to ".concat(n,"X").concat(s,".")),this.computeCanvasDrawConfig(n,s,l,u)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},e.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(s){s.style.backgroundColor=n?en.BORDER_SHADER_MATCH_COLOR:en.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(n,s,l){var u=n,d=s,x=document.createElement("canvas");return x.style.width="".concat(u,"px"),x.style.height="".concat(d,"px"),x.style.display="none",x.id=zn(l)?"qr-canvas":l,x},e.prototype.getShadedRegionBounds=function(n,s,l){if(l.width>n||l.height>s)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-l.width)/2,y:(s-l.height)/2,width:l.width,height:l.height}},e.prototype.possiblyInsertShadingElement=function(n,s,l,u){if(!(s-u.width<1||l-u.height<1)){var d=document.createElement("div");d.style.position="absolute";var x=(s-u.width)/2,w=(l-u.height)/2;if(d.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(en.SHADED_REGION_ELEMENT_ID),s-u.width<11||l-u.height<11)this.hasBorderShaders=!1;else{var y=5,p=40;this.insertShaderBorders(d,p,y,-y,null,0,!0),this.insertShaderBorders(d,p,y,-y,null,0,!1),this.insertShaderBorders(d,p,y,null,-y,0,!0),this.insertShaderBorders(d,p,y,null,-y,0,!1),this.insertShaderBorders(d,y,p+y,-y,null,-y,!0),this.insertShaderBorders(d,y,p+y,null,-y,-y,!0),this.insertShaderBorders(d,y,p+y,-y,null,-y,!1),this.insertShaderBorders(d,y,p+y,null,-y,-y,!1),this.hasBorderShaders=!0}n.append(d)}},e.prototype.insertShaderBorders=function(n,s,l,u,d,x,w){var y=document.createElement("div");y.style.position="absolute",y.style.backgroundColor=en.BORDER_SHADER_DEFAULT_COLOR,y.style.width="".concat(s,"px"),y.style.height="".concat(l,"px"),u!==null&&(y.style.top="".concat(u,"px")),d!==null&&(y.style.bottom="".concat(d,"px")),w?y.style.left="".concat(x,"px"):y.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(y),n.appendChild(y)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(n){return 1e3/n},e}(),I1;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(I1||(I1={}));const Bt=[{key:"scannerA",label:"Scanner A",regionId:"qr-reader-a"},{key:"scannerB",label:"Scanner B",regionId:"qr-reader-b"}],N1=1500;function Dm(){return{statusMsg:"Align QR code within the frame",lastResult:null,scanStatus:"idle",isVerifying:!1,isStarting:!1,error:null,errorDetail:null}}function Mm(e=[]){if(!e.length)return null;const n=e.find(s=>/back|rear|environment/i.test(s.label));return(n==null?void 0:n.id)??e[0].id}function Pm(e){const s=typeof window<"u"&&window.isSecureContext?"":" Make sure you are using HTTPS or localhost.";if(!e)return{status:"Scanner inactive.",message:`Unable to start the selected camera. Refresh the list or choose another device.${s}`};switch(e.name){case"NotAllowedError":case"PermissionDeniedError":return{status:"Camera permission blocked.",message:"Camera access was denied. Allow access in your browser permissions, then press Retry."};case"NotReadableError":case"TrackStartError":return{status:"Camera busy.",message:"Another application is using the camera. Close other apps or tabs that use the camera, then press Retry."};case"OverconstrainedError":return{status:"Camera not compatible.",message:"The selected camera does not support this configuration. Pick a different camera or reduce quality."};case"NotFoundError":case"DevicesNotFoundError":return{status:"Camera unavailable.",message:"The camera is no longer available. Refresh the list or reconnect your device."};default:return{status:"Scanner inactive.",message:`Unable to start the selected camera${e.message?` (${e.message})`:""}. Refresh or pick another device.${s}`}}}function Bm(){const e=P.useRef(null),n=P.useRef({}),s=()=>{if(!e.current)try{const F=window.AudioContext||window.webkitAudioContext;e.current=new F}catch(F){console.warn("Web Audio not supported",F)}return e.current},l=P.useCallback((F,U)=>{const M=s();if(!M||!Array.isArray(U)||U.length===0)return;const $=M.currentTime,ee=n.current[F]||0;$-ee<.4||(n.current[F]=$,U.forEach((fe,Ee)=>{const{freq:H=880,dur:ae=.12,vol:se=.25,type:ie="sine",glide:ge=0}=fe||{},pe=$+Ee*(fe.offset??ae*.85),Oe=M.createOscillator(),Ae=M.createGain();Oe.type=ie,Oe.frequency.value=H,Ae.gain.setValueAtTime(0,pe),Ae.gain.linearRampToValueAtTime(se,pe+.01),Ae.gain.linearRampToValueAtTime(1e-4,pe+ae),ge&&Oe.frequency.exponentialRampToValueAtTime(Math.max(40,H+ge),pe+ae),Oe.connect(Ae).connect(M.destination),Oe.start(pe),Oe.stop(pe+ae+.02)}))},[]),u=P.useCallback(F=>{switch(F){case"success":l("success",[{freq:523.25,dur:.1,vol:.22,type:"sine"},{freq:659.25,dur:.11,vol:.22,type:"sine"},{freq:784,dur:.14,vol:.2,type:"sine"}]);break;case"used":l("used",[{freq:660,dur:.13,vol:.2,type:"triangle",glide:-120},{freq:520,dur:.14,vol:.18,type:"triangle"}]);break;case"invalid":l("invalid",[{freq:480,dur:.12,vol:.23,type:"square"},{freq:360,dur:.18,vol:.23,type:"square",offset:.12}]);break;case"error":l("error",[{freq:160,dur:.25,vol:.25,type:"sawtooth",glide:-80}]);break}},[l]),d=P.useRef({}),x=P.useRef(Bt.map(()=>null)),w=P.useRef(Bt.map(()=>({text:null,timestamp:0}))),y=P.useRef(Bt.map(()=>!1)),[p,N]=P.useState([]),[S,O]=P.useState(!0),[B,Y]=P.useState(()=>Bt.map(()=>null)),[j,q]=P.useState(()=>Bt.map(()=>Dm())),R=P.useRef(Bt.map(()=>null)),b=P.useCallback((F,U)=>{q(M=>{const $=[...M];return $[F]={...M[F],...U},$})},[]),T=P.useCallback(async F=>{y.current[F]=!1,clearTimeout(x.current[F]),x.current[F]=null;const{key:U}=Bt[F],M=d.current[U];if(M){if(M.isScanning)try{await M.stop()}catch($){console.warn(`Failed to stop ${U}`,$)}try{await M.clear()}catch{}}},[]),L=P.useCallback(async(F,U)=>{if(y.current[F])return;const M=Date.now(),$=w.current[F];if(!($.text===U&&M-$.timestamp<N1)){w.current[F]={text:U,timestamp:M},y.current[F]=!0,b(F,{isVerifying:!0,statusMsg:"Checking ticket…",scanStatus:"processing",error:null,errorDetail:null});try{const ee=await Jn("/api/scanner/verify-qr",{method:"POST",body:{qr:U}});b(F,{lastResult:{ok:!0,data:ee,at:new Date},statusMsg:`✅ Ticket accepted (${ee.ticketCode}). Ready for the next attendee.`,scanStatus:"success",error:null,errorDetail:null}),u("success")}catch(ee){let fe="error";const Ee=(ee.message||"").toLowerCase();Ee.includes("already used")?fe="used":(Ee.includes("cancelled")||Ee.includes("signature")||Ee.includes("not valid")||Ee.includes("not found")||Ee.includes("invalid"))&&(fe="invalid"),b(F,{lastResult:{ok:!1,message:ee.message,at:new Date,data:ee.payload||null},statusMsg:`❌ ${ee.message||"Rejected"}. Present another ticket when ready.`,scanStatus:fe,error:null,errorDetail:null}),u(fe)}finally{y.current[F]=!1,b(F,{isVerifying:!1}),clearTimeout(x.current[F]),x.current[F]=setTimeout(()=>{b(F,{statusMsg:"Scanner ready. Present the QR code.",scanStatus:"idle"})},N1)}}},[b,u]),Z=P.useCallback(async(F,U)=>{if(!U)return;const{key:M}=Bt[F],$=d.current[M];if($){clearTimeout(x.current[F]),x.current[F]=null,b(F,{isStarting:!0,statusMsg:"Starting camera…",error:null,errorDetail:null});try{$.isScanning&&await $.stop()}catch(ee){console.warn(`Failed to stop existing scan for ${M}`,ee)}try{await $.start({deviceId:{exact:U}},{fps:10,qrbox:{width:280,height:280}},ee=>L(F,ee),ee=>{typeof ee=="string"&&ee.toLowerCase().includes("no qr code")||console.warn(`${M} scan warning`,ee)}),b(F,{isStarting:!1,statusMsg:"Scanner ready. Present the QR code.",error:null,errorDetail:null})}catch(ee){const{status:fe,message:Ee}=Pm(ee);clearTimeout(x.current[F]),x.current[F]=null,b(F,{isStarting:!1,statusMsg:fe,error:Ee,errorDetail:(ee==null?void 0:ee.message)||null});try{await T(F)}catch(H){console.warn(`Failed to cleanup ${M} after error`,H)}}}},[L,T,b]),K=P.useCallback(async()=>{O(!0);try{const F=await S1.getCameras();if(!F||F.length===0){N([]),Y(U=>{const M=Bt.map(()=>null);return M.some((ee,fe)=>ee!==U[fe])?M:U}),Bt.forEach((U,M)=>{b(M,{statusMsg:"No camera detected. Connect a camera and refresh.",error:"No camera detected. Connect a camera and refresh.",errorDetail:null})});return}N(F),Bt.forEach((U,M)=>{b(M,{error:null,errorDetail:null})}),Y(U=>{const M=U.map(H=>F.some(ae=>ae.id===H)?H:null),$=new Set(M.filter(Boolean)),ee=F.map(H=>H.id),fe=M.map((H,ae)=>{if(H)return H;let se=null;if(ae===0){const ie=Mm(F);ie&&!$.has(ie)&&(se=ie)}return se||(se=ee.find(ie=>!$.has(ie))??null),se&&$.add(se),se});return fe.some((H,ae)=>H!==U[ae])?fe:U})}catch(F){console.error("Failed to enumerate cameras",F),N([]),Bt.forEach((U,M)=>{b(M,{statusMsg:"Camera access blocked.",error:"Unable to access camera list. Check browser permissions.",errorDetail:(F==null?void 0:F.message)||null})})}finally{O(!1)}},[b]);P.useEffect(()=>{const F={};return Bt.forEach(({key:U,regionId:M})=>{F[U]=new S1(M)}),d.current=F,K(),()=>{x.current.forEach(U=>clearTimeout(U)),Bt.forEach((U,M)=>{T(M).catch(()=>{})}),d.current={}}},[K,T]),P.useEffect(()=>{B.forEach((F,U)=>{R.current[U]!==F&&(R.current[U]=F,F?Z(U,F):(T(U).catch(()=>{}),b(U,{statusMsg:p.length?"Select a camera to begin.":"No camera selected.",error:p.length?null:"No camera assigned.",errorDetail:null})))})},[p.length,B,Z,T,b]);const z=P.useCallback((F,U)=>{Y(M=>{if(M[F]===U)return M;const $=[...M];return $[F]=U||null,$})},[]);return E.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-8",children:[E.jsxs("section",{className:"glass-panel px-8 py-8",children:[E.jsx("p",{className:"glass-section-label",children:"Live validation"}),E.jsx("h2",{className:"page-heading",children:"Dual QR scanners"}),E.jsx("p",{className:"page-subheading",children:"Connect up to two cameras for parallel ticket checks. Each station runs independently so you can assign separate entry lanes and keep the queue moving."})]}),E.jsx("section",{className:"grid gap-6 xl:grid-cols-2",children:Bt.map((F,U)=>{var ee,fe,Ee,H;const M=j[U],$=B[U]??"";return E.jsxs("div",{className:"glass-card flex flex-col gap-5 p-6",children:[E.jsxs("div",{className:"flex items-center justify-between gap-4",children:[E.jsxs("div",{children:[E.jsx("p",{className:"glass-section-label",children:F.label}),E.jsx("h3",{className:"text-lg font-semibold text-white",children:"Scanner station"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:`inline-flex h-3 w-3 rounded-full ring-2 ring-offset-2 ring-offset-slate-900/50 transition-shadow duration-300 ${M.scanStatus==="processing"?"animate-pulse bg-sky-400 ring-sky-400/40":M.scanStatus==="success"?"bg-emerald-400 ring-emerald-400/40":M.scanStatus==="used"?"bg-amber-400 ring-amber-400/40":M.scanStatus==="invalid"?"bg-rose-500 ring-rose-500/40":M.scanStatus==="error"?"bg-rose-700 ring-rose-600/40":"bg-slate-500 ring-slate-400/40"}`,"aria-label":`Scan status: ${M.scanStatus}`}),E.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold uppercase tracking-[0.25em] ${M.scanStatus==="processing"?"bg-sky-500/20 text-sky-200":M.scanStatus==="success"?"bg-emerald-500/20 text-emerald-200":M.scanStatus==="used"?"bg-amber-500/20 text-amber-200":M.scanStatus==="invalid"?"bg-rose-500/25 text-rose-200":M.scanStatus==="error"?"bg-rose-700/30 text-rose-200":"bg-white/5 text-slate-300"}`,children:M.scanStatus==="processing"?"Processing":M.scanStatus==="success"?"Accepted":M.scanStatus==="used"?"Used":M.scanStatus==="invalid"?"Invalid":M.scanStatus==="error"?"Error":"Idle"})]})]}),E.jsx("div",{className:"flex flex-col gap-4 rounded-2xl border border-white/10 bg-white/5 p-4",children:E.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[E.jsx("label",{className:"input-label",htmlFor:`camera-select-${F.key}`,children:"Camera source"}),E.jsxs("div",{className:"flex flex-1 flex-col gap-3 sm:flex-row sm:items-center",children:[E.jsx("select",{id:`camera-select-${F.key}`,value:$,onChange:ae=>z(U,ae.target.value||null),disabled:S||M.isStarting||p.length===0,className:"input-field",children:p.length===0?E.jsx("option",{value:"",children:S?"Detecting cameras…":"No cameras found"}):E.jsxs(E.Fragment,{children:[E.jsx("option",{value:"",children:"Select a camera"}),p.map(ae=>E.jsx("option",{value:ae.id,children:ae.label||`Camera ${ae.id}`},ae.id))]})}),E.jsx("button",{type:"button",onClick:K,disabled:S,className:"muted-button whitespace-nowrap text-xs uppercase tracking-[0.3em] disabled:cursor-not-allowed disabled:opacity-60",children:S?"Refreshing…":"Refresh cameras"})]})]})}),E.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:E.jsx("div",{id:F.regionId,className:"mx-auto aspect-square max-w-sm overflow-hidden rounded-2xl bg-black/40"})}),E.jsx("p",{className:"text-center text-sm font-medium text-slate-200",children:M.isStarting?"Starting camera…":M.statusMsg}),M.error&&E.jsxs("div",{className:"space-y-2 rounded-2xl border border-rose-500/40 bg-rose-500/15 p-4 text-center text-sm text-rose-100",children:[E.jsx("p",{className:"font-semibold uppercase tracking-[0.25em]",children:"Camera issue"}),E.jsx("p",{className:"text-rose-100/90",children:M.error}),M.errorDetail&&E.jsxs("p",{className:"text-xs text-rose-200/80",children:["Details: ",M.errorDetail]}),E.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 text-xs font-semibold",children:[E.jsx("button",{type:"button",onClick:()=>{const ae=B[U];ae?Z(U,ae):K()},disabled:M.isStarting,className:"muted-button border-rose-500/50 text-rose-200 hover:bg-rose-500/20 disabled:cursor-not-allowed disabled:opacity-60",children:"Retry camera"}),E.jsx("button",{type:"button",onClick:K,disabled:S,className:"muted-button text-slate-200 disabled:cursor-not-allowed disabled:opacity-60",children:"Refresh list"})]})]}),E.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[E.jsx("h4",{className:"text-sm font-semibold uppercase tracking-[0.3em] text-slate-300",children:"Last scan"}),M.lastResult?E.jsxs("div",{className:"mt-2 space-y-2 text-sm text-slate-200/90",children:[E.jsxs("p",{children:["Result:"," ",E.jsx("span",{className:`font-semibold ${M.lastResult.ok?"text-emerald-300":"text-rose-300"}`,children:M.lastResult.ok?"ACCEPTED":"REJECTED"})]}),E.jsxs("p",{children:["Timestamp: ",M.lastResult.at.toLocaleTimeString()]}),M.lastResult.ok?E.jsxs(E.Fragment,{children:[E.jsxs("p",{children:["Ticket: ",M.lastResult.data.ticketCode]}),M.lastResult.data.attendee&&E.jsxs("p",{children:["Attendee: ",M.lastResult.data.attendee]}),M.lastResult.data.eventName&&E.jsxs("p",{children:["Event: ",M.lastResult.data.eventName]}),M.lastResult.data.seatLabel&&E.jsxs("p",{children:["Seat: ",M.lastResult.data.seatLabel]}),E.jsxs("p",{children:["Status: ",M.lastResult.data.message]})]}):E.jsxs("div",{className:"space-y-1",children:[E.jsxs("p",{children:["Reason: ",M.lastResult.message]}),((ee=M.lastResult.data)==null?void 0:ee.ticketCode)&&E.jsxs("p",{children:["Ticket: ",M.lastResult.data.ticketCode]}),((fe=M.lastResult.data)==null?void 0:fe.attendee)&&E.jsxs("p",{children:["Attendee: ",M.lastResult.data.attendee]}),((Ee=M.lastResult.data)==null?void 0:Ee.eventName)&&E.jsxs("p",{children:["Event: ",M.lastResult.data.eventName]}),((H=M.lastResult.data)==null?void 0:H.seatLabel)&&E.jsxs("p",{children:["Seat: ",M.lastResult.data.seatLabel]})]})]}):E.jsx("p",{className:"mt-2 text-sm text-slate-400/80",children:"No scans yet."})]})]},F.key)})}),E.jsxs("section",{className:"glass-card p-6 text-sm text-slate-200/85",children:[E.jsx("h4",{className:"text-base font-semibold text-white",children:"Operational tips"}),E.jsxs("ul",{className:"mt-3 list-disc space-y-2 pl-6",children:[E.jsx("li",{children:"Grant camera permissions in your browser for both devices. Use HTTPS (or localhost) to avoid permission issues."}),E.jsx("li",{children:"Assign different external cameras to each scanner for two simultaneous entry lanes."}),E.jsx("li",{children:"If a camera stops responding, refresh the list or reconnect the device—each scanner can be restarted independently."})]})]})]})}const Lm="Your Ticket for {{event}}",Fm=`<!doctype html>
<p>Hi {{name}},</p>
<p>We're excited to see you at <strong>{{event}}</strong>.</p>
<ul>
  <li><strong>Seat:</strong> {{seat}}</li>
  <li><strong>Ticket Code:</strong> {{ticket_code}}</li>
  <li><strong>Starts:</strong> {{event_starts}}</li>
</ul>
<p>Show this QR code at the entrance:</p>
<p><img src="cid:{{qr_cid}}" alt="Ticket QR" style="max-width:260px" /></p>
<p>If you have any questions, reply to this email.</p>`;function jm({eventId:e,onQueued:n}){var b,T,L;const s=P.useRef(null),[l,u]=P.useState(""),[d,x]=P.useState(!1),[w,y]=P.useState(!1),[p,N]=P.useState(null),[S,O]=P.useState(Lm),[B,Y]=P.useState(Fm),j=P.useMemo(()=>b1(l),[l]),q=async Z=>{var F,U;Z.preventDefault();const K=(U=(F=s.current)==null?void 0:F.files)==null?void 0:U[0],z=[];if(K){const M=await K.text(),$=b1(M);z.push(...$)}if(z.push(...j),z.length===0){alert("Add recipients using the CSV upload or the manual list.");return}x(!0);try{const M=await Jn("/api/admin/emails/bulk",{method:"POST",body:{event_id:e,list:z,subject:S,bodyTemplate:B}});N({type:"queue",queued:M.queued,at:new Date,details:M.details||[]}),n==null||n(M.queued),s.current&&(s.current.value=""),u(""),alert(`Queued ${M.queued} emails.`)}catch(M){console.error(M),alert(M.message||"Failed to queue emails")}finally{x(!1)}},R=async()=>{y(!0);try{const Z=await Jn("/api/admin/emails/send-now",{method:"POST",body:{limit:200}});N({type:"send",result:Z,at:new Date}),alert(`Sent ${Z.sent} emails, ${Z.failed} failed (pending batch size ${Z.pending}).`)}catch(Z){console.error(Z),alert(Z.message||"Failed to send queued emails")}finally{y(!1)}};return E.jsxs("div",{className:"glass-card flex h-full flex-col gap-6 p-6",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("p",{className:"glass-section-label",children:"Bulk email queue"}),E.jsx("h3",{className:"text-lg font-semibold text-white",children:"Ticket delivery automation"}),E.jsx("p",{className:"text-sm text-slate-200/80",children:"Upload a CSV or paste recipients to queue personalized tickets. Seats are auto-assigned in order starting at Row A · Seat 1."})]}),E.jsxs("form",{onSubmit:q,className:"space-y-5",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"input-label",children:"CSV upload"}),E.jsx("input",{ref:s,type:"file",accept:".csv",className:"block w-full text-sm text-slate-200 file:mr-4 file:rounded-xl file:border-0 file:bg-gradient-to-r file:from-sky-500 file:via-indigo-500 file:to-purple-500 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-white hover:file:brightness-110"})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"input-label",htmlFor:"manual-list",children:"Manual entries"}),E.jsx("textarea",{id:"manual-list",rows:"4",value:l,onChange:Z=>u(Z.target.value),placeholder:["user@example.com","another@example.com"].join(`
`),className:"input-field font-mono text-xs"}),E.jsx("p",{className:"text-xs text-slate-300/80",children:"Separate entries with new lines. Provide one email per line; names and notes are optional after a comma."})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"input-label",htmlFor:"subject-template",children:"Email subject template"}),E.jsx("input",{id:"subject-template",type:"text",value:S,onChange:Z=>O(Z.target.value),className:"input-field"}),E.jsxs("p",{className:"text-xs text-slate-300/80",children:["Use tokens like ",E.jsx("code",{children:"{{event}}"}),", ",E.jsx("code",{children:"{{seat}}"}),", ",E.jsx("code",{children:"{{ticket_code}}"}),"."]})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"input-label",htmlFor:"body-template",children:"Email body template (HTML supported)"}),E.jsx("textarea",{id:"body-template",rows:"8",value:B,onChange:Z=>Y(Z.target.value),className:"input-field font-mono text-xs"}),E.jsxs("div",{className:"space-y-1 text-xs text-slate-300/80",children:[E.jsxs("p",{children:["Available placeholders: ",E.jsx("code",{children:"{{name}}"}),", ",E.jsx("code",{children:"{{email}}"}),", ",E.jsx("code",{children:"{{event}}"}),", ",E.jsx("code",{children:"{{seat}}"}),", ",E.jsx("code",{children:"{{ticket_code}}"}),", ",E.jsx("code",{children:"{{qr_cid}}"}),", ",E.jsx("code",{children:"{{qr_data_url}}"}),", ",E.jsx("code",{children:"{{event_starts}}"}),"."]}),E.jsxs("p",{children:["To embed the QR inline, use ",E.jsx("code",{children:'<img src="cid:{{qr_cid}}" alt="QR code" />'}),"."]})]})]}),E.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-300/80",children:[E.jsxs("span",{children:["Manual recipients: ",j.length]}),E.jsx("span",{children:(T=(b=s.current)==null?void 0:b.files)!=null&&T.length?"CSV attached":"No CSV file"})]}),E.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[E.jsx("button",{type:"submit",disabled:d,className:"primary-button disabled:opacity-60",children:d?"Queueing…":"Queue emails"}),E.jsx("button",{type:"button",onClick:R,disabled:w,className:"secondary-button disabled:opacity-60",children:w?"Sending…":"Send queued now"})]})]}),p&&E.jsxs("div",{className:"space-y-3 text-xs text-slate-200/85",children:[p.type==="queue"&&E.jsxs(E.Fragment,{children:[E.jsxs("p",{children:["Last queued ",p.queued," recipient",p.queued===1?"":"s"," at ",p.at.toLocaleTimeString(),"."]}),(L=p.details)!=null&&L.length?E.jsx("ul",{className:"max-h-40 overflow-y-auto rounded-2xl border border-white/10 bg-white/5 p-3 font-mono text-[11px]",children:p.details.map(Z=>E.jsxs("li",{children:[Z.email," → ",Z.seat," (",Z.ticketCode,")"]},`${Z.email}-${Z.ticketCode}`))}):null]}),p.type==="send"&&p.result&&E.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-3",children:[E.jsxs("p",{className:"font-semibold text-slate-100",children:["Last send run at ",p.at.toLocaleTimeString(),":"]}),E.jsxs("ul",{className:"ml-4 list-disc space-y-1 text-slate-300/85",children:[E.jsxs("li",{children:["Sent: ",p.result.sent]}),E.jsxs("li",{children:["Failed: ",p.result.failed]}),E.jsxs("li",{children:["Processed from queue: ",p.result.pending]})]})]})]})]})}function b1(e){if(!e)return[];const n=e.split(/\r?\n/).map(l=>l.trim()).filter(Boolean),s=[];for(const l of n){const[u,d="",x=""]=l.split(","),w=u==null?void 0:u.trim();w&&s.push({email:w,name:d.trim(),ticketData:x.trim()})}return s}const _1=1,_o={available:"bg-gradient-to-r from-emerald-400 to-teal-500",reserved:"bg-gradient-to-r from-amber-400 to-orange-500",sold:"bg-gradient-to-r from-indigo-500 to-purple-600",blocked:"bg-gradient-to-r from-rose-500 to-red-500"};function Um(){const[e,n]=P.useState(_1),[s,l]=P.useState(_1.toString()),[u,d]=P.useState([]),[x,w]=P.useState(!1),[y,p]=P.useState(1),[N,S]=P.useState(null),O=P.useCallback(async T=>{w(!0);try{const L=await Jn(`/api/admin/events/${T}/seats`);d(Array.isArray(L)?L:[])}catch(L){console.error(L),alert(L.message||"Failed to load seats"),d([])}finally{w(!1)}},[]);P.useEffect(()=>{O(e)},[e,O]);const B=P.useMemo(()=>u.reduce((L,Z)=>{const K=(Z==null?void 0:Z.status)||"available";return L[K]===void 0&&(L[K]=0),L[K]+=1,L.total+=1,L},{total:0,available:0,reserved:0,sold:0,blocked:0}),[u]),Y=T=>{l(T.target.value)},j=T=>{T.preventDefault();const L=Number(s);if(!Number.isInteger(L)||L<=0){alert("Event ID must be a positive number");return}n(L)},q=async T=>{T.preventDefault();const L=Number(y);if(!Number.isInteger(L)||L<1){alert("Quantity must be at least 1");return}try{const Z=await Jn(`/api/admin/events/${e}/auto-assign`,{method:"POST",body:JSON.stringify({qty:L})});S(Z),await O(e),alert(`Reserved ${Z.reserved.length} seats until ${new Date(Z.reservedUntil).toLocaleTimeString()}`)}catch(Z){console.error(Z),alert(Z.message||"Failed to reserve seats")}},R=B.sold+B.reserved,b=B.total?Math.round(R/B.total*100):0;return E.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-8",children:[E.jsxs("section",{className:"glass-panel flex flex-col gap-6 px-8 py-8 md:flex-row md:items-center md:justify-between",children:[E.jsxs("div",{className:"space-y-3",children:[E.jsx("p",{className:"glass-section-label",children:"Operations Center"}),E.jsx("h2",{className:"page-heading",children:"Seat management toolkit"}),E.jsxs("p",{className:"page-subheading",children:["Reserve contiguous seats, trigger bulk email queues, and monitor live capacity for event #",e,"."]})]}),E.jsxs("form",{onSubmit:j,className:"glass-card flex w-full max-w-sm flex-col gap-4 p-5 md:w-auto",children:[E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx("label",{className:"input-label",htmlFor:"operations-event",children:"Event ID"}),E.jsx("input",{id:"operations-event",type:"number",min:"1",value:s,onChange:Y,className:"input-field"})]}),E.jsx("button",{type:"submit",className:"primary-button justify-center",children:"Load event"})]})]}),E.jsxs("section",{className:"grid gap-5 sm:grid-cols-2 xl:grid-cols-5",children:[E.jsx(Zt,{label:"Total seats",value:B.total??"—"}),E.jsx(Zt,{label:"Available",value:B.available??0,accent:_o.available}),E.jsx(Zt,{label:"Reserved",value:B.reserved??0,accent:_o.reserved}),E.jsx(Zt,{label:"Sold",value:B.sold??0,accent:_o.sold}),E.jsx(Zt,{label:"Blocked",value:B.blocked??0,accent:_o.blocked})]}),E.jsxs("section",{className:"glass-panel flex flex-col gap-4 px-6 py-5 sm:flex-row sm:items-center sm:justify-between",children:[E.jsxs("div",{children:[E.jsx("p",{className:"glass-section-label",children:"Occupancy insight"}),E.jsxs("h3",{className:"text-lg font-semibold text-white",children:[b,"% of seats engaged"]}),E.jsx("p",{className:"text-sm text-slate-200/75",children:B.total?`${R} of ${B.total} seats are reserved or sold for event #${e}.`:"Load an event to view occupancy breakdown."})]}),E.jsx("div",{className:"h-2 w-full max-w-xs overflow-hidden rounded-full bg-white/10",children:E.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-emerald-400 via-sky-400 to-indigo-500",style:{width:`${Math.min(100,Math.max(0,b))}%`}})})]}),E.jsxs("section",{className:"grid gap-6 xl:grid-cols-[1.6fr_1fr]",children:[E.jsx(oh,{seats:u,isLoading:x}),E.jsxs("div",{className:"flex flex-col gap-6",children:[E.jsxs("div",{className:"glass-card space-y-4 p-6",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("h3",{className:"text-lg font-semibold text-white",children:"Auto assign contiguous seats"}),E.jsx("p",{className:"text-sm text-slate-200/80",children:"Quickly reserve blocks for walk-ins or manual handling with a single click."})]}),E.jsxs("form",{onSubmit:q,className:"space-y-4",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{htmlFor:"operations-qty",className:"input-label",children:"Quantity"}),E.jsx("input",{id:"operations-qty",type:"number",min:"1",value:y,onChange:T=>p(T.target.value),className:"input-field"})]}),E.jsx("button",{type:"submit",className:"primary-button w-full disabled:opacity-60",disabled:x,children:x?"Working…":"Reserve block"})]}),N&&E.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-xs text-slate-200/90",children:[E.jsx("p",{className:"font-semibold text-slate-100",children:"Reserved seats"}),E.jsx("p",{className:"mt-1 text-slate-200",children:N.reserved.join(", ")}),E.jsxs("div",{className:"mt-2 space-y-1 text-slate-300",children:[E.jsxs("p",{children:["Token: ",N.reservedToken]}),E.jsxs("p",{children:["Expires: ",new Date(N.reservedUntil).toLocaleString()]})]})]})]}),E.jsx(jm,{eventId:e,onQueued:()=>O(e)})]})]})]})}const Vm=[{to:"/",label:"Dashboard",icon:kp},{to:"/events",label:"Manage Events",icon:Rp},{to:"/operations",label:"Operations",icon:Vp},{to:"/scanner",label:"Scanner",icon:jp}];function Wm(){return E.jsxs("div",{className:"flex min-h-full flex-col bg-transparent text-slate-100 md:flex-row",children:[E.jsx("aside",{className:"hidden w-72 flex-col gap-8 px-6 py-8 md:flex",children:E.jsxs("div",{className:"glass-panel flex flex-col gap-10 px-6 py-8",children:[E.jsxs("div",{children:[E.jsx("span",{className:"rounded-full bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.4em] text-slate-200/80",children:"Control Center"}),E.jsx("h1",{className:"mt-3 text-2xl font-semibold tracking-tight text-white drop-shadow-[0_8px_25px_rgba(56,189,248,0.28)]",children:"CCIS Admin Console"})]}),E.jsx("nav",{className:"space-y-2",children:Vm.map(({to:e,label:n,icon:s})=>E.jsxs(yp,{to:e,end:e==="/",className:({isActive:l})=>`flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold transition ${l?"bg-gradient-to-r from-sky-500/90 to-indigo-500/90 text-white shadow-lg shadow-sky-900/40":"text-slate-200/80 hover:bg-white/10 hover:text-white"}`,children:[E.jsx(s,{className:"h-5 w-5"}),n]},e))}),E.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-xs text-slate-300/80 backdrop-blur",children:[E.jsx("p",{className:"font-semibold uppercase tracking-[0.3em] text-slate-200/80",children:"Tip"}),E.jsx("p",{className:"mt-2 leading-relaxed text-slate-300",children:"Monitor seat availability and send announcements faster by keeping the Operations view pinned in a secondary tab."})]})]})}),E.jsxs("div",{className:"flex flex-1 flex-col",children:[E.jsx("header",{className:"flex items-center justify-between border-b border-white/10 bg-slate-900/60 px-4 py-4 shadow-lg shadow-slate-950/40 backdrop-blur md:hidden",children:E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(_p,{className:"h-5 w-5 text-slate-300"}),E.jsx("span",{className:"text-lg font-semibold text-white",children:"CCIS Admin"})]})}),E.jsx("main",{className:"scrollbar-thin flex-1 overflow-y-auto px-4 py-6 md:px-10 md:py-10",children:E.jsxs(ap,{children:[E.jsx(hi,{path:"/",element:E.jsx(u1,{})}),E.jsx(hi,{path:"/events",element:E.jsx(sm,{})}),E.jsx(hi,{path:"/operations",element:E.jsx(Um,{})}),E.jsx(hi,{path:"/scanner",element:E.jsx(Bm,{})}),E.jsx(hi,{path:"*",element:E.jsx(u1,{})})]})})]})]})}Rl.createRoot(document.getElementById("root")).render(E.jsx(V1.StrictMode,{children:E.jsx(xp,{children:E.jsx(im,{children:E.jsx(Wm,{})})})}));
